import{ae as h,q as T,j as r,au as b,T as c,N as v,at as p}from"./main-BEfQELxr.js";import{u as N}from"./use-update-track-form--unhyqKC.js";import{T as P}from"./track-form-DaFc8iaY.js";import{u as y}from"./use-track-permissions-BH8RwNVs.js";import{g as n}from"./track-link-C79i7Oi0.js";import{C as F}from"./crupdate-resource-layout-kU3RGGgA.js";import{u as d}from"./use-required-params-biXhH1lK.js";import{F as I}from"./file-upload-provider-eR3r-15c.js";import{u}from"./useSuspenseQuery-CLDVgKJu.js";import{B as l,a}from"./breadcrumb-BEqwPK9x.js";import"./paginated-resources-CNSIt8ps.js";import"./FileUpload-DPKPUe4e.js";import"./image-selector-D_1V7xO8.js";import"./use-active-upload-nc09ZUBt.js";import"./open-upload-window-B2GQndIr.js";import"./uploaded-file-DYvUNPPs.js";import"./extension-from-filename-O0XMuZye.js";import"./AddAPhoto-CZHH8SXN.js";import"./file-input-config-DrcTpI3-.js";import"./pretty-bytes-bO14ePu9.js";import"./generate-waveform-data-BFwf5N3g.js";import"./form-chip-field-82C9gJw-.js";import"./input-BypPJ39K.js";import"./chip-list-CnaxlPJ9.js";import"./genre-B_3ZyEC1.js";import"./form-normalized-model-chip-field-4XjViKi1.js";import"./use-normalized-models-ChKc2G_X.js";import"./normalized-model-field-AJN-ee7u.js";import"./select-DvPFHFsY.js";import"./combobox-end-adornment-B98K5MYg.js";import"./Edit-gh_pXqg9.js";import"./skeleton-IvCa_cqw.js";import"./formatted-duration-Dqg2KYhd.js";import"./use-current-date-time-Bg8tRM7A.js";import"./datatable-page-with-header-layout-DgFKm91D.js";import"./dashboard-layout-context-Ors6hOMs.js";import"./use-toggle-dashboard-left-sidebar-BNAUqBUz.js";import"./traditional-D9TTECMQ.js";import"./useEffectEvent-TynbBUG3.js";import"./ChevronRight-BB23vmSu.js";import"./MoreHoriz-B7xw7d55.js";function q({showExternalFields:e=!0,navbar:t,breadcrumbs:k}){const{trackId:x}=d(["trackId"]),o=u(p.tracks.get(x,"editTrackPage")).data.track,{canEdit:f}=y([o]),i=h(),{pathname:g}=T(),{form:j,updateTrack:m}=N(o,{onTrackUpdated:s=>{g.includes("admin")?i("/admin/tracks"):i(n(s.track))}});return f?r.jsx(F,{form:j,onSubmit:s=>{m.mutate(s)},title:k??r.jsxs(l,{size:"xl",children:[r.jsx(a,{to:"/admin/tracks",children:r.jsx(c,{message:"Tracks"})}),r.jsx(a,{children:o.name})]}),isLoading:m.isPending,disableSaveWhenNotDirty:!0,navbar:t,children:r.jsx(I,{children:r.jsx(P,{showExternalIdFields:e})})}):r.jsx(b,{to:"/",replace:!0})}function gr(){const{trackId:e}=d(["trackId"]),t=u(p.tracks.get(e,"editTrackPage"));return r.jsx("div",{className:"h-screen",children:r.jsx(q,{showExternalFields:!1,navbar:r.jsx(v,{className:"flex-shrink-0",color:"bg",darkModeColor:"bg"}),breadcrumbs:r.jsxs(l,{size:"xl",children:[r.jsx(a,{to:n(t.data.track),children:t.data.track.name}),r.jsx(a,{children:r.jsx(c,{message:"Edit"})})]})})})}export{gr as BackstageUpdateTrackPage,q as Component};
