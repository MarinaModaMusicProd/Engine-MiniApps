import{r as s,b4 as bt,aO as dt,bW as D,am as gt,c5 as ht}from"./main-BEfQELxr.js";import{$ as mt}from"./useGlobalListeners-BF1tAQIT.js";import{u as pt}from"./use-pointer-events-CdAPueCj.js";function Rt({minValue:r=0,maxValue:o=100,isDisabled:f=!1,step:m=1,formatOptions:C,onChangeEnd:E,onPointerDown:v,label:U,getValueLabel:X,showThumbOnHoverOnly:_,thumbSize:j,onPointerMove:R,...p}){const[q,L]=s.useState(!1),S=bt(C),{addGlobalListener:H,removeGlobalListener:J}=mt(),g=s.useRef(null),[n,Q]=dt(p.value?p.value:void 0,p.defaultValue??[r],p.onChange),i=s.useRef(null);i.current=n;const[k,Y]=s.useState(new Array(n.length).fill(!1)),b=s.useRef(null);b.current=k;function Z(t){return S.format(t)}const x=t=>{var e;return((e=b.current)==null?void 0:e[t])||!1},V=t=>Z(n[t]),F=t=>t===0?r:n[t-1],A=t=>t===n.length-1?o:n[t+1],I=(t,e)=>{if(f||!P(t)||!i.current)return;const u=F(t),a=A(t);e=ht(e,u,a,m),i.current=G(i.current,t,e),Q(i.current)},T=(t,e)=>{var a;if(f||!P(t))return;const u=(a=b.current)==null?void 0:a[t];b.current=G(b.current||[],t,e),Y(b.current),E&&u&&!b.current.some(Boolean)&&E(i.current||[])},[tt,K]=s.useState(void 0),et=t=>{const e=Math.min(1,(t-r)/(o-r));return isNaN(e)?0:e},N=t=>et(i.current[t]),rt=(t,e)=>{I(t,O(e))},nt=t=>Math.round((t-r)/m)*m+r,O=t=>{const e=t*(o-r)+r;return D(nt(e),r,o)},W=s.useRef(new Array(n.length).fill(!0)),P=t=>W.current[t],ct=(t,e)=>{W.current[t]=e},c=s.useRef(null),z=s.useRef(void 0),st=t=>{if(!(t.pointerType==="mouse"&&(t.button!==0||t.altKey||t.ctrlKey||t.metaKey))&&(v==null||v(),g.current&&!f&&n.every((e,u)=>!k[u]))){const e=g.current.offsetWidth,u=g.current.getBoundingClientRect().left,w=(t.clientX-u)/e,$=O(w);let l;const d=n.findIndex(y=>$-y<0);if(d===0)l=d;else if(d===-1)l=n.length-1;else{const y=n[d-1],it=n[d];Math.abs(y-$)<Math.abs(it-$)?l=d-1:l=d}l>=0&&P(l)?(t.preventDefault(),c.current=l,K(l),z.current=t.pointerId,T(c.current,!0),I(l,$),H(window,"pointerup",B,!1)):c.current=null}},h=s.useRef(null),{domProps:ut}=pt({onPointerDown:st,onMoveStart(){h.current=null},onMove(t,e){var a;const u=((a=g.current)==null?void 0:a.offsetWidth)||0;if(h.current==null&&(h.current=N(c.current||0)*u),h.current+=e,c.current!=null&&g.current){const w=D(h.current/u,0,1);rt(c.current,w)}},onMoveEnd(){c.current!=null&&(T(c.current,!1),c.current=null)}}),ot=gt(ut,{onPointerEnter:()=>{L(!0)},onPointerLeave:()=>{L(!1)},onPointerMove:t=>{R==null||R(t)}}),B=t=>{t.pointerId===z.current&&(c.current!=null&&(T(c.current,!1),c.current=null),J(window,"pointerup",B,!1))},M=s.useId(),lt=U?`${M}-label`:void 0,at=`${M}-group`,ft=[...Array(n.length)].map((t,e)=>`${M}-thumb-${e}`);return{domProps:ot,trackRef:g,isDisabled:f,step:m,values:n,minValue:r,maxValue:o,focusedThumb:tt,labelId:lt,groupId:at,thumbIds:ft,numberFormatter:S,getThumbPercent:N,getThumbMinValue:F,getThumbMaxValue:A,getThumbValueLabel:V,isThumbDragging:x,setThumbValue:I,updateDraggedThumbs:T,setThumbEditable:ct,setFocusedThumb:K,getValueLabel:X,isPointerOver:q,showThumbOnHoverOnly:_,thumbSize:j}}function G(r,o,f){return r[o]===f?r:[...r.slice(0,o),f,...r.slice(o+1)]}export{Rt as u};
