import{al as g,X as m,r as o,j as i,b as f,J as r}from"./main-BEfQELxr.js";import{B as b}from"./billing-redirect-message-BuqkSqow.js";import{C as d,a as h}from"./checkout-product-summary-D3GqYjKe.js";import"./TaskAlt-B4o8WxPe.js";import"./skeleton-IvCa_cqw.js";import"./formatted-price-DtaXBNTQ.js";import"./product-feature-list-BcqypL_v.js";function P(){const{productId:s,priceId:t}=g(),[e]=m(),a=o.useRef(!1),[p,n]=o.useState();return o.useEffect(()=>{const c=e.get("subscriptionId"),u=e.get("status");a.current||(c&&u==="success"?C(c).then(()=>{n(l("success",s,t)),window.location.href="/billing"}):n(l(u,s,t)),a.current=!0)},[t,s,e]),i.jsxs(d,{children:[i.jsx(b,{config:p}),i.jsx(h,{showBillingLine:!1})]})}function l(s,t,e){switch(s){case"success":return{message:r("Subscription successful!"),status:"success",buttonLabel:r("Return to site"),link:"/billing"};default:return{message:r("Something went wrong. Please try again."),status:"error",buttonLabel:r("Go back"),link:y(t,e)}}}function y(s,t){return s&&t?`/checkout/${s}/${t}`:"/"}function C(s){return f.post("billing/paypal/store-subscription-details-locally",{paypal_subscription_id:s})}export{P as Component};
