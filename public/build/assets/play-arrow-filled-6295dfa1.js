import{ch as Ge,dc as ge,dd as We,r as f,a2 as k,j as c,a0 as Xe,aI as Ce,bb as $e,cE as q,t as Qe,bQ as Ie,X as Z,aN as V,M as Ze,n as Je,bO as de,aW as et,aT as tt,bo as Pe,J as oe,de as nt,aO as rt,df as Ne,db as we,aS as st,R as Re,br as Me,bs as at,bP as ot,A as H,W as it,T as Q,aF as re,ay as Y,i as he,k as be,m as ie,$ as J,b as ye,dg as ct,ad as X,ab as lt,aa as ut,Z as Oe,bp as dt,aZ as ft,ai as mt,y as gt,Y as ht,D as ce,_ as bt,bY as xt,am as Ae,ae as pt,I as vt}from"./main-4035601d.js";function se(e){return Ge()?e.metaKey:e.ctrlKey}function wt(e){const{cellCount:n,rowCount:t}=e;return{onKeyDown:s=>{switch(s.key){case"ArrowLeft":O(s,{cell:{op:"decrement"}},e);break;case"ArrowRight":O(s,{cell:{op:"increment"}},e);break;case"ArrowUp":O(s,{row:{op:"decrement"}},e);break;case"ArrowDown":O(s,{row:{op:"increment"}},e);break;case"PageUp":O(s,{row:{op:"decrement",count:5}},e);break;case"PageDown":O(s,{row:{op:"increment",count:5}},e);break;case"Tab":yt(s);break;case"Home":se(s)?O(s,{row:{op:"decrement",count:t},cell:{op:"decrement",count:n}},e):O(s,{cell:{op:"decrement",count:n}},e);break;case"End":se(s)?O(s,{row:{op:"increment",count:t},cell:{op:"increment",count:n}},e):O(s,{cell:{op:"increment",count:n}},e);break}}}}function O(e,n,{cellCount:t,rowCount:r}){var x,w,b,h,v,D,T;if(((x=document.activeElement)==null?void 0:x.tagName)==="input")return;e.preventDefault();const s=e.currentTarget,a=e.target.closest("[aria-colindex]");if(!a||!s)return;const o=a.closest("[aria-rowindex]");if(!o)return;let i=parseInt(o.getAttribute("aria-rowindex")),d=parseInt(a.getAttribute("aria-colindex"));if(Number.isNaN(i)||Number.isNaN(d))return;const u=((w=n.row)==null?void 0:w.count)??1;((b=n.row)==null?void 0:b.op)==="increment"?i=Math.min(r,i+u):((h=n.row)==null?void 0:h.op)==="decrement"&&(i=Math.max(1,i-u));const l=((v=n.cell)==null?void 0:v.count)??1;((D=n.cell)==null?void 0:D.op)==="increment"?d=Math.min(t,d+l):((T=n.cell)==null?void 0:T.op)==="decrement"&&(d=Math.max(1,d-l));const p=s.querySelector(`[aria-rowindex="${i}"] [aria-colindex="${d}"]`);if(!p)return;const g=ge(p).nextNode()||p;a.setAttribute("tabindex","-1"),g.setAttribute("tabindex","0"),g.focus()}function yt(e){const n=e.currentTarget;if(e.shiftKey)n.focus();else{const t=ge(n,{tabbable:!0});let r,s;do s=t.lastChild(),s&&(r=s);while(s);r&&!r.contains(document.activeElement)&&We(r)}}const L=f.createContext(null);function Le({index:e,isHeader:n}){const{columns:t,cellHeight:r="h-46",headerCellHeight:s="h-46"}=f.useContext(L),a=t[e],o=a==null?void 0:a.padding;let i="justify-start";return(a==null?void 0:a.align)==="center"?i="justify-center":(a==null?void 0:a.align)==="end"&&(i="justify-end"),k("flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2",n?s:r,(a==null?void 0:a.width)??"flex-1",a==null?void 0:a.maxWidth,a==null?void 0:a.minWidth,i,o,a==null?void 0:a.className)}function At({rowIndex:e,rowIsHovered:n,index:t,item:r,id:s}){const{columns:a}=f.useContext(L),o=a[t],i=f.useMemo(()=>({index:e,isHovered:n,isPlaceholder:r.isPlaceholder}),[e,n,r.isPlaceholder]),d=Le({index:t,isHeader:!1});return c.jsx("div",{tabIndex:-1,role:"gridcell","aria-colindex":t+1,id:s,className:d,children:c.jsx("div",{className:"w-full min-w-0 overflow-hidden overflow-ellipsis",children:o.body(r,i)})})}function kt(e){return e.shiftKey||se(e)}function Dt({index:e,isSelected:n,isHeader:t}){const r=Xe(),s=Ce(),{hideBorder:a,enableSelection:o,collapseOnMobile:i,onAction:d}=f.useContext(L);return k("flex gap-x-16 break-inside-avoid outline-none border border-transparent",d&&"cursor-pointer",s&&i&&a?"mb-8 pl-8 pr-0 rounded":"px-16",!a&&"border-b-divider",!a&&e===0&&"border-t-divider",n&&!r&&"bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus",n&&r&&"bg-selected hover:bg-focus focus-visible:bg-focus",!n&&!t&&(o||d)&&"focus-visible:bg-focus hover:bg-hover")}function jt({onMoveStart:e,onMove:n,onMoveEnd:t,minimumMovement:r=0,preventDefault:s,stopPropagation:a=!0,onPress:o,onLongPress:i,...d}){const l=f.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:p,removeGlobalListener:m}=$e(),g=h=>{!l.el||(e==null?void 0:e(h,l.el))===!1||(l.originalTouchAction=l.el.style.touchAction,l.el.style.touchAction="none",l.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",l.started=!0)},x=h=>{var v;if(h.button===0&&l.id==null){if(l.started=!1,((v=d.onPointerDown)==null?void 0:v.call(d,h))===!1)return;a&&h.stopPropagation(),s&&h.preventDefault(),l.id=h.pointerId,l.el=h.currentTarget,l.lastPosition={x:h.clientX,y:h.clientY},i&&(l.longPressTimer=setTimeout(()=>{i(h,l.el),l.longPressTriggered=!0},400)),(e||n)&&p(window,"pointermove",w,!1),p(window,"pointerup",b,!1),p(window,"pointercancel",b,!1)}},w=h=>{if(h.pointerId===l.id){const v=h.clientX-l.lastPosition.x,D=h.clientY-l.lastPosition.y;(Math.abs(v)>=r||Math.abs(D)>=r)&&!l.started&&g(h),l.started&&(n==null||n(h,v,D),l.lastPosition={x:h.clientX,y:h.clientY})}},b=h=>{var v;if(h.pointerId===l.id){l.longPressTimer&&clearTimeout(l.longPressTimer);const D=l.longPressTriggered;l.longPressTriggered=!1,l.started&&(t==null||t(h)),l.el&&(h.type!=="pointercancel"&&((v=d.onPointerUp)==null||v.call(d,h,l.el),h.target&&l.el.contains(h.target)&&(D?i==null||i(h,l.el):o==null||o(h,l.el))),document.documentElement.style.userSelect=l.originalUserSelect||"",l.el.style.touchAction=l.originalTouchAction||""),l.id=void 0,l.started=!1,m(window,"pointermove",w,!1),m(window,"pointerup",b,!1),m(window,"pointercancel",b,!1)}};return{domProps:{onPointerDown:q(x)}}}const Et=["button","a","input","select","textarea"];function Tt({item:e,index:n,renderAs:t,className:r,style:s}){const{selectedRows:a,columns:o,toggleRow:i,selectRow:d,onAction:u,selectRowOnContextMenu:l,enableSelection:p,selectionStyle:m,hideHeaderRow:g}=f.useContext(L),x=f.useRef(!1),w=a.includes(e.id),[b,h]=f.useState(!1),v=A=>A.target.closest(Et.join(",")),D=A=>{m==="highlight"&&u&&!x.current&&!v(A)&&(A.preventDefault(),A.stopPropagation(),u(e,n))},T=!!a.length,$=A=>{v(A)||(m==="checkbox"?p&&(T||!u)?i(e):u&&u(e,n):m==="highlight"&&(x.current?p&&T?i(e):u==null||u(e,n):p&&d(e,kt(A))))},{domProps:C}=jt({onPointerDown:A=>{x.current=A.pointerType==="touch"},onPress:$,onLongPress:p?()=>{x.current&&i(e)}:void 0}),I=A=>{p&&A.key===" "?(A.preventDefault(),A.stopPropagation(),m==="checkbox"?i(e):d(e)):A.key==="Enter"&&!a.length&&u&&(A.preventDefault(),A.stopPropagation(),u(e,n))},M=A=>{l&&p&&(a.includes(e.id)||d(e)),x.current&&(A.preventDefault(),A.stopPropagation())},B=Dt({index:n,isSelected:w}),K=t||"div";return c.jsx(K,{role:"row","aria-rowindex":n+1+(g?0:1),"aria-selected":w,tabIndex:-1,className:k(r,B),item:K==="div"?void 0:e,onDoubleClick:q(D),onKeyDown:q(I),onContextMenu:q(M),onPointerEnter:q(()=>h(!0)),onPointerLeave:q(()=>h(!1)),style:s,...C,children:o.map((A,E)=>c.jsx(At,{rowIndex:n,rowIsHovered:b,index:E,item:e},`${e.id}-${A.key}`))})}const Ct={key:"checkbox",header:()=>c.jsx(It,{}),align:"center",width:"w-24 flex-shrink-0",body:(e,n)=>n.isPlaceholder?c.jsx(Qe,{size:"w-24 h-24",variant:"rect"}):c.jsx($t,{item:e})};function $t({item:e}){const{selectedRows:n,toggleRow:t}=f.useContext(L);return c.jsx(Ie,{checked:n.includes(e.id),onChange:()=>t(e)})}function It(){const{trans:e}=Z(),{data:n,selectedRows:t,onSelectionChange:r}=f.useContext(L),s=!!n.length&&n.length===t.length,a=!s&&!!t.length;return c.jsx(Ie,{"aria-label":e({message:"Select all"}),isIndeterminate:a,checked:s,onChange:()=>{r(s?[]:n.map(o=>o.id))}})}const Pt=V(c.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined");function Nt({index:e}){const{columns:n,sortDescriptor:t,onSortChange:r,enableSorting:s}=f.useContext(L),a=n[e],o=Le({index:e,isHeader:!0}),[i,d]=f.useState(!1),u=a.sortingKey||a.key,l=a.allowsSorting&&s,{orderBy:p,orderDir:m}=t||{},g=l&&p===u;let x;g&&m==="asc"?x="ascending":g&&m==="desc"?x="descending":l&&(x="none");const w=()=>{if(!l)return;let v;g&&m==="desc"?v={orderDir:"asc",orderBy:u}:g&&m==="asc"?v={orderBy:void 0,orderDir:void 0}:v={orderDir:"desc",orderBy:u},r==null||r(v)},b=g||i,h={visible:{opacity:1,y:0},hidden:{opacity:0,y:"-25%"}};return c.jsxs("div",{role:"columnheader",tabIndex:-1,"aria-colindex":e+1,"aria-sort":x,className:k(o,"text-xs font-medium text-muted",l&&"cursor-pointer"),onMouseEnter:()=>{d(!0)},onMouseLeave:()=>{d(!1)},onKeyDown:v=>{(v.key===" "||v.key==="Enter")&&(v.preventDefault(),w())},onClick:w,children:[a.hideHeader?c.jsx("div",{className:"opacity-0",children:a.header()}):a.header(),c.jsx(Ze,{children:l&&c.jsx(Je.span,{variants:h,animate:b?"visible":"hidden",initial:!1,transition:{type:"tween"},className:"-mt-2 ml-6 inline-block","data-testid":"table-sort-button","aria-hidden":!b,children:c.jsx(Pt,{size:"xs",className:k("text-muted",m==="asc"&&p===u&&"rotate-180 transition-transform")})},"sort-icon")})]})}function Rt(){const{columns:e}=f.useContext(L);return c.jsx("div",{role:"row","aria-rowindex":1,tabIndex:-1,className:"flex gap-x-16 px-16",children:e.map((n,t)=>c.jsx(Nt,{index:t},n.key))})}function In({className:e,columns:n,collapseOnMobile:t=!0,hideHeaderRow:r=!1,hideBorder:s=!1,data:a,selectedRows:o,defaultSelectedRows:i,onSelectionChange:d,sortDescriptor:u,onSortChange:l,enableSorting:p=!0,onDelete:m,enableSelection:g=!0,selectionStyle:x="checkbox",ariaLabelledBy:w,selectRowOnContextMenu:b,onAction:h,renderRowAs:v,tableBody:D,meta:T,tableRef:$,closeOnInteractOutside:C=!1,cellHeight:I,headerCellHeight:M,...B}){const K=Ce(),A=!!K&&t;A&&(r=!0,s=!0);const[E,z]=de(o,i||[],d),[Be,Ke]=de(u,void 0,l),_e=f.useCallback(j=>{const P=[...E];if(!P.includes(j.id))P.push(j.id);else{const _=P.indexOf(j.id);P.splice(_,1)}z(P)},[E,z]),Ue=f.useCallback((j,P)=>{let _=[];j&&(_=P?[...E==null?void 0:E.filter(G=>G!==j.id),j.id]:[j.id]),z(_)},[E,z]),te=f.useMemo(()=>{const j=n.filter(_=>{const G=_.visibleInMode||"regular";if(G==="all"||G==="compact"&&A||G==="regular"&&!A)return!0});return g&&x!=="highlight"&&!K&&j.unshift(Ct),j},[K,n,g,x,A]),qe={isCollapsedMode:A,cellHeight:I,headerCellHeight:M,hideBorder:s,hideHeaderRow:r,selectedRows:E,onSelectionChange:z,enableSorting:p,enableSelection:g,selectionStyle:x,data:a,columns:te,sortDescriptor:Be,onSortChange:Ke,toggleRow:_e,selectRow:Ue,onAction:h,selectRowOnContextMenu:b,meta:T,collapseOnMobile:t},Ye=wt({cellCount:g?te.length+1:te.length,rowCount:a.length+1}),pe={renderRowAs:v};D?D=f.cloneElement(D,pe):D=c.jsx(Mt,{...pe});const ve=et($);return tt({ref:ve,onInteractOutside:j=>{C&&g&&(E!=null&&E.length)&&!j.target.closest('[role="dialog"]')&&z([])}}),c.jsx(L.Provider,{value:qe,children:c.jsxs("div",{...Pe(B,Ye,{onKeyDown:j=>{j.key==="Escape"?(j.preventDefault(),j.stopPropagation(),E!=null&&E.length&&z([])):j.key==="Delete"?(j.preventDefault(),j.stopPropagation(),E!=null&&E.length&&(m==null||m(a.filter(P=>E==null?void 0:E.includes(P.id))))):se(j)&&j.key==="a"&&(j.preventDefault(),j.stopPropagation(),g&&z(a.map(P=>P.id)))}}),role:"grid",tabIndex:0,"aria-rowcount":a.length+1,"aria-colcount":te.length+1,ref:ve,"aria-multiselectable":g?!0:void 0,"aria-labelledby":w,className:k(e,"isolate select-none text-sm outline-none focus-visible:ring-2"),children:[!r&&c.jsx(Rt,{}),D]})})}function Mt({renderRowAs:e}){const{data:n}=f.useContext(L);return c.jsx(f.Fragment,{children:n.map((t,r)=>c.jsx(Tt,{item:t,index:r,renderAs:e},t.id))})}const ke=["#3b82f6","#6366f1","#0284c7","#9333ea","#059669","#ea580c","#dc2626","#06b6d4","#e11d48"],Ot=f.forwardRef(({size:e,label:n,color:t},r)=>{const{initial:s,bgColor:a}=f.useMemo(()=>{const o=(n||"").split("").reduce((i,d)=>d.charCodeAt(0)+i,(n==null?void 0:n.length)||0);return{initial:n.slice(0,1).toUpperCase(),bgColor:ke[o%ke.length]}},[n]);return c.jsx("div",{ref:r,style:t?void 0:{backgroundColor:a},className:k("flex h-full w-full items-center justify-center font-semibold leading-normal text-on-primary",t,Lt(e)),children:s})});function Lt(e){switch(e){case"xs":return"text-xs";case"sm":return"text-xs";case"xl":return"text-xl";case"md":return"text-base";default:return""}}const Ft=f.forwardRef(({className:e,circle:n,size:t="md",src:r,link:s,label:a,fallback:o="initials",fallbackColor:i,lazy:d=!0,...u},l)=>{let p=r?c.jsx("img",{ref:l,src:r,alt:a,loading:d?"lazy":void 0,className:"block h-full w-full object-cover"}):o==="initials"&&a?c.jsx(Ot,{size:t,label:a,color:i}):c.jsx("div",{className:"h-full w-full bg-alt dark:bg-chip",children:c.jsx(nt,{viewBox:"0 0 48 48",className:"h-full w-full text-muted"})});a&&(p=c.jsx(rt,{label:a,children:p}));const m={...u,className:k(e,"relative block overflow-hidden select-none flex-shrink-0",Ht(t),n?"rounded-full":"rounded")};return s?c.jsx(oe,{...m,to:s,children:p}):c.jsx("div",{...m,children:p})});function Ht(e){switch(e){case"xs":return"w-18 h-18";case"sm":return"w-24 h-24";case"md":return"w-32 h-32";case"lg":return"w-40 h-40";case"xl":return"w-60 h-60";default:return e}}function Pn({className:e,children:n,size:t,color:r,radius:s,selectable:a,wrap:o=!0}){return c.jsx("div",{className:k("flex items-center gap-8",o&&"flex-wrap",e),children:f.Children.map(n,i=>{if(f.isValidElement(i))return f.cloneElement(i,{size:t,color:r,selectable:a,radius:s})})})}const zt=V(c.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined"),F=new Map,N=new Map,Vt=new Map,R={status:"inactive"};function le({e,rect:n,deltaX:t,deltaY:r}){return{rect:n,x:e.clientX,y:e.clientY,deltaX:t??0,deltaY:r??0,nativeEvent:e}}let Fe=null;function De(e){Fe=e}function St(e){return{left:e.left,top:e.top,width:e.width,height:e.height}}function He(e){const n=new IntersectionObserver(t=>{t.forEach(r=>{const{width:s,height:a,left:o,top:i}=r.boundingClientRect,[d,u]=[...e].find(([,p])=>p.ref.current===r.target)||[];if(d==null||u==null)return;const l={width:s,height:a,left:o,top:i};e.set(d,{...u,rect:l})}),n.disconnect()});[...e.values()].forEach(t=>{t.ref.current&&n.observe(t.ref.current)})}function Bt({id:e,disabled:n,ref:t,preview:r,hidePreview:s,...a}){const o=f.useRef(null),{addGlobalListener:i,removeAllGlobalListeners:d}=$e(),u=f.useRef({lastPosition:{x:0,y:0}}).current,l=f.useRef(a);l.current=a,f.useLayoutEffect(()=>(n?F.delete(e):F.set(e,{...F.get(e),id:e,ref:t,type:l.current.type,getData:l.current.getData}),()=>{F.delete(e)}),[e,n,l,t]);const p=b=>{Vt.forEach(h=>{var v;h.type===((v=F.get(e))==null?void 0:v.type)&&b(h)})},m=b=>{var $,C;const h=F.get(e),v=t.current,D=!o.current||!u.clickedEl||o.current.contains(u.clickedEl);if(Fe||!v||!h||!D){b.preventDefault(),b.stopPropagation();return}He(N),De("drag"),s&&Kt(b),b.dataTransfer.effectAllowed="move",u.lastPosition={x:b.clientX,y:b.clientY},u.currentRect=St(v.getBoundingClientRect());const T=le({rect:u.currentRect,e:b});r!=null&&r.current&&r.current(h,I=>{b.dataTransfer.setDragImage(I,0,0)}),R.status="dragging",R.dragTargetId=e,t.current&&(t.current.dataset.dragging="true"),(C=($=l.current).onDragStart)==null||C.call($,T,h),requestAnimationFrame(()=>{p(I=>{var M;return(M=I.onDragStart)==null?void 0:M.call(I,T,h)})}),i(window,"dragover",g,!0)},g=b=>{var C,I;if(b.preventDefault(),!u.currentRect)return;const h=b.clientX-u.lastPosition.x,v=b.clientY-u.lastPosition.y,D={...u.currentRect,left:u.currentRect.left+h,top:u.currentRect.top+v},T=le({rect:D,e:b,deltaX:h,deltaY:v}),$=F.get(e);$&&((I=(C=l.current).onDragMove)==null||I.call(C,T,$),p(M=>{var B;return(B=M.onDragMove)==null?void 0:B.call(M,T,$)})),u.lastPosition={x:b.clientX,y:b.clientY},u.currentRect=D};return{draggableProps:{draggable:!n,onDragStart:m,onDragEnd:b=>{var D,T;if(d(),!u.currentRect)return;De(null),S&&S.remove();const h=le({rect:u.currentRect,e:b}),v=F.get(e);v&&((T=(D=l.current).onDragEnd)==null||T.call(D,h,v),p($=>{var C;return(C=$.onDragEnd)==null?void 0:C.call($,h,v,R.status)})),requestAnimationFrame(()=>{R.dragTargetId=void 0,R.status="inactive",t.current&&delete t.current.dataset.dragging})},onPointerDown:b=>{u.clickedEl=b.target}},dragHandleRef:o}}let S;function Kt(e){S||(S=new Image,document.body.append(S),S.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),e.dataTransfer.setDragImage(S,0,0)}async function*_t(e){const n=[];for(const t of e.items)if(t.kind==="file"){const r=t.webkitGetAsEntry();r&&n.push(r)}for(const t of n)if(t.isFile){if(t.name===".DS_Store")continue;const r=await Ve(t);yield new Ne(r,t.fullPath)}else t.isDirectory&&(yield*ze(t))}async function*ze(e){const n=e.createReader();let t;do{t=await new Promise((r,s)=>{n.readEntries(r,s)});for(const r of t)if(r.isFile){if(r.name===".DS_Store")continue;const s=await Ve(r);yield new Ne(s,r.fullPath)}else r.isDirectory&&(yield*ze(r))}while(t.length>0)}function Ve(e){return new Promise((n,t)=>e.file(n,t))}async function Ut(e){const n=[];for await(const t of e)n.push(t);return n}const qt=400;function Yt({id:e,disabled:n,ref:t,...r}){const s=f.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,a=f.useRef(r);a.current=r,f.useLayoutEffect(()=>(N.set(e,{...N.get(e),disabled:n,id:e,ref:t}),()=>{N.delete(e)}),[e,a,n,t]);const o=m=>{var w;const g=a.current,x=g.allowDragEventsFromItself||t.current!==((w=m.ref)==null?void 0:w.current);return!!(m!=null&&m.type&&x&&g.types.includes(m.type)&&(!g.acceptsDrop||g.acceptsDrop(m)))},i=m=>{var x,w;const g=W(m);g&&((w=(x=a.current).onDragLeave)==null||w.call(x,g))};return{droppableProps:n?{}:{onDragOver:m=>{var x,w;m.preventDefault(),m.stopPropagation();const g=W(m);g&&o(g)&&((w=(x=a.current).onDragOver)==null||w.call(x,g,m))},onDragEnter:m=>{var x,w;if(m.stopPropagation(),s.dragOverElements.add(m.target),s.dragOverElements.size>1)return;const g=W(m);g&&o(g)&&((w=(x=a.current).onDragEnter)==null||w.call(x,g),clearTimeout(s.dropActivateTimer),typeof a.current.onDropActivate=="function"&&(s.dropActivateTimer=setTimeout(()=>{var b,h;g&&((h=(b=a.current).onDropActivate)==null||h.call(b,g))},qt)))},onDragLeave:m=>{m.stopPropagation(),s.dragOverElements.delete(m.target);for(const x of s.dragOverElements)m.currentTarget.contains(x)||s.dragOverElements.delete(x);if(s.dragOverElements.size>0)return;const g=W(m);g&&o(g)&&(i(m),clearTimeout(s.dropActivateTimer))},onDrop:async m=>{var x,w,b,h;m.preventDefault(),m.stopPropagation(),s.dragOverElements.clear(),i(m),clearTimeout(s.dropActivateTimer);const g=W(m);if(g)if((w=(x=a.current).onDragLeave)==null||w.call(x,g),!o(g))R.status!=="inactive"&&(R.status="dropFail");else{const v=(h=(b=a.current).onDrop)==null?void 0:h.call(b,g);R.status!=="inactive"&&(R.status=v===!1?"dropFail":"dropSuccess")}}}}}function W(e){if(R.dragTargetId!=null)return F.get(R.dragTargetId);if(e.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>Ut(_t(e.dataTransfer))}}const Gt={onDragStart:()=>{},onDragEnter:()=>{},onDragOver:({e,ref:n,item:t,sortSession:r,onDropPositionChange:s})=>{var d;const a=r.dropPosition;let o=null;const i=(d=N.get(t))==null?void 0:d.rect;if(i){const u=i.top+i.height/2;e.clientY<=u?o="before":e.clientY>=u&&(o="after")}if(o!==a){const u=r.sortables.indexOf(t);if(r.dropPosition=o,s==null||s(r.dropPosition),je(r),n.current)if(r.dropPosition==="after")ue(n.current,"bottom",r);else if(u===0)ue(n.current,"top",r);else{const m=r.sortables[u-1],g=N.get(m);g!=null&&g.ref.current&&ue(g.ref.current,"bottom",r)}const l=r.sortables.indexOf(t);if(r.activeIndex===l){r.finalIndex=r.activeIndex;return}(u>r.activeIndex?"after":"before")==="after"?r.finalIndex=r.dropPosition==="before"?l-1:l:r.finalIndex=r.dropPosition==="after"?l+1:l}},onDragEnd:e=>{je(e)}};function je(e){e!=null&&e.linePreviewEl&&(e.linePreviewEl.style.borderBottomColor="",e.linePreviewEl.style.borderTopColor="",e.linePreviewEl=void 0)}function ue(e,n,t){const r="rgb(var(--be-primary))";n==="top"?e.style.borderTopColor=r:e.style.borderBottomColor=r,t&&(t.linePreviewEl=e)}function Se(e,n,t){const r=we(n,0,e.length-1),s=we(t,0,e.length-1);if(r===s)return e;const a=e[r],o=s<r?-1:1;for(let i=r;i!==s;i+=o)e[i]=e[i+o];return e[s]=a,e}function Wt(e,n,t){const r=e.slice();return r.splice(t<0?r.length+t:t,0,r.splice(n,1)[0]),r}const Xt="transform 0.2s cubic-bezier(0.2, 0, 0, 1)",Qt={onDragStart:e=>{e.sortables.forEach((n,t)=>{const r=N.get(n);r!=null&&r.ref.current&&(r.ref.current.style.transition=Xt,(e==null?void 0:e.activeIndex)===t&&(r.ref.current.style.opacity="0.4"))})},onDragEnter:(e,n,t)=>{Se(e.sortables,t,n);const r=e.sortables.map(s=>{var a;return(a=N.get(s))==null?void 0:a.rect});e.sortables.forEach((s,a)=>{if(!e)return;const o=Wt(r,n,e.activeIndex),i=r[a],d=o[a],u=N.get(s);if(u!=null&&u.ref.current&&d&&i){const l=d.left-i.left,p=d.top-i.top;u.ref.current.style.transform=`translate3d(${l}px, ${p}px, 0)`}}),e.finalIndex=n},onDragOver:()=>{},onDragEnd:e=>{e.sortables.forEach(n=>{const t=N.get(n);t!=null&&t.ref.current&&(t.ref.current.style.transform="",t.ref.current.style.transition="",t.ref.current.style.opacity="",t.ref.current.style.zIndex="")})}},Zt={onDragStart:()=>{},onDragOver:()=>{},onDragEnter:(e,n,t)=>{var s;const r=(s=N.get(e.sortables[t]))==null?void 0:s.ref.current;r&&(Jt(r,t,n),Se(e.sortables,t,n),e.finalIndex=n)},onDragEnd:()=>{}};function Jt(e,n,t){const r=e.parentElement;if(t<0)r.prepend(e);else{n>-1&&n<=t&&t++;const s=r.children.item(t);s?s.before(e):r.append(e)}}let y=null;const ne={line:Gt,liveSort:Qt,moveNode:Zt};function Nn({item:e,items:n,type:t,ref:r,onSortEnd:s,onSortStart:a,onDragEnd:o,preview:i,disabled:d,onDropPositionChange:u,strategy:l="liveSort"}){f.useEffect(()=>{y&&y.sortables.length!==n.length&&(y.sortables=[...n],y.activeIndex=n.indexOf(e))},[n,e]);const{draggableProps:p,dragHandleRef:m}=Bt({id:e,ref:r,type:t,preview:i,disabled:d,onDragStart:()=>{var x;y={sortables:[...n],activeSortable:e,activeIndex:n.indexOf(e),finalIndex:n.indexOf(e),dropPosition:null,ref:r,scrollParent:r.current?st(r.current):void 0,scrollListener:()=>{He(N)}},ne[l].onDragStart(y),a==null||a(),(x=y.scrollParent)==null||x.addEventListener("scroll",y.scrollListener)},onDragEnd:()=>{var x;y&&(y.dropPosition=null,u==null||u(y.dropPosition),y.activeIndex!==y.finalIndex&&(s==null||s(y.activeIndex,y.finalIndex)),(x=y.scrollParent)==null||x.removeEventListener("scroll",y.scrollListener),ne[l].onDragEnd(y),o==null||o(),y=null)},getData:()=>{}}),{droppableProps:g}=Yt({id:e,ref:r,types:[t],disabled:d,allowDragEventsFromItself:!0,onDragOver:(x,w)=>{y&&ne[l].onDragOver({e:w,ref:r,item:e,sortSession:y,onDropPositionChange:u})},onDragEnter:()=>{if(!y)return;const x=y.sortables.indexOf(e),w=y.sortables.indexOf(y.activeSortable);ne[l].onDragEnter(y,x,w)},onDragLeave:()=>{y&&(y.dropPosition=null,u==null||u(y.dropPosition))}});return{sortableProps:{...Pe(p,g)},dragHandleRef:m}}const ee=Re.createContext(null);function Rn(e){const{size:n="md",children:t,className:r,isLazy:s,overflow:a="overflow-hidden"}=e,o=f.useRef([]),i=f.useId(),[d,u]=de(e.selectedTab,e.defaultSelectedTab||0,e.onTabChange),l=f.useMemo(()=>({selectedTab:d,setSelectedTab:u,tabsRef:o,size:n,isLazy:s,id:i}),[d,i,s,u,n]);return c.jsx(ee.Provider,{value:l,children:c.jsx("div",{className:k(r,a,"max-w-full"),children:t})})}function en(){const{tabsRef:e,selectedTab:n}=f.useContext(ee),[t,r]=f.useState({width:void 0,transform:void 0,className:void 0});return Me(()=>{if(n!=null&&e.current){const s=e.current[n];if(!s)return;r(a=>({width:`${s.offsetWidth}px`,transform:`translateX(${s.offsetLeft}px)`,className:a.width===void 0?"":"transition-all"}))}},[r,n,e]),c.jsx("div",{className:k("absolute bottom-0 left-0 h-2 bg-primary",t.className),role:"presentation",style:{width:t.width,transform:t.transform}})}function Mn({children:e,center:n,expand:t,className:r,border:s="border-b"}){const a=f.Children.toArray(e);return c.jsx(at,{children:c.jsxs("div",{className:k("max-sm:hidden-scrollbar md:compact-scrollbar relative flex max-w-full overflow-auto",s,r),role:"tablist","aria-orientation":"horizontal",children:[a.map((o,i)=>f.isValidElement(o)?f.cloneElement(o,{index:i,className:k(o.props.className,t&&"flex-auto",n&&i===0&&"ml-auto",n&&i===a.length-1&&"mr-auto")}):null),c.jsx(en,{})]})})}function On({index:e,className:n,isDisabled:t,children:r,padding:s,elementType:a="button",to:o,relative:i,width:d="min-w-min",height:u}){const{selectedTab:l,setSelectedTab:p,tabsRef:m,size:g="md",id:x}=f.useContext(ee),w=e===l,b=ot(),h=s||(g==="sm"?"px-12":"px-18"),v=k("tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors","focus-visible:ring focus-visible:ring-2 ring-inset rounded whitespace-nowrap cursor-pointer",d,tn({isDisabled:t,isSelected:w}),n,g==="md"&&`${h} ${u||"h-48"}`,g==="sm"&&`${h} ${u||"h-32"}`,t&&"pointer-events-none"),D=C=>{switch(C.key){case"ArrowLeft":b==null||b.focusPrevious();break;case"ArrowRight":b==null||b.focusNext();break;case"Home":b==null||b.focusFirst();break;case"End":b==null||b.focusLast();break}},T=w?0:-1,$=a;return c.jsx($,{disabled:t,id:`${x}-${e}-tab`,"aria-controls":`${x}-${e}-tabpanel`,type:"button",role:"tab","aria-selected":w,tabIndex:t?void 0:T,onKeyDown:D,onClick:()=>{p(e)},to:o,relative:i,className:v,ref:C=>{m.current&&C&&(m.current[e]=C)},children:r})}function tn({isDisabled:e,isSelected:n}){return e?"text-disabled cursor-default":n?"text-primary":"text-muted hover:text-main"}function Ln({children:e,className:n}){const{selectedTab:t,isLazy:r}=f.useContext(ee),s=f.Children.toArray(e).filter(o=>!!o);let a;if(r){const o=s[t];a=f.isValidElement(o)?f.cloneElement(s[t],{index:t}):null}else a=s.map((o,i)=>{if(f.isValidElement(o)){const d=i===t;return f.cloneElement(o,{index:i,"aria-hidden":!d,className:d?o.props.className:k(o.props.className,"hidden")})}return null});return c.jsx("div",{className:n,children:a})}function Fn({className:e,children:n,index:t,...r}){const{id:s}=f.useContext(ee),[a,o]=f.useState(0),i=f.useRef(null);return Me(()=>{if(i!=null&&i.current){const d=()=>{const l=ge(i.current,{tabbable:!0});o(l.nextNode()?void 0:0)};d();const u=new MutationObserver(d);return u.observe(i.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{u.disconnect()}}},[i]),c.jsx("div",{tabIndex:a,ref:i,id:`${s}-${t}-tabpanel`,"aria-labelledby":`${s}-${t}-tab`,className:k(e,"focus-visible:outline-primary-light"),role:"tabpanel",...r,children:n})}const nn=V(c.jsx("path",{d:"m12 3 .01 10.55c-.59-.34-1.27-.55-2-.55C7.79 13 6 14.79 6 17s1.79 4 4.01 4S14 19.21 14 17V7h4V3h-6zm-1.99 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"MusicNoteOutlined");function Hn({track:e,className:n,size:t,background:r="bg-fg-base/4"}){const{trans:s}=Z(),a=rn(e),o=k(n,t,r,"object-cover",a?"block":"flex items-center justify-center");return a?c.jsx("img",{className:o,draggable:!1,loading:"lazy",src:a,alt:s(H("Image for :name",{values:{name:e.name}}))}):c.jsx("span",{className:k(o,"overflow-hidden"),children:c.jsx(nn,{className:"max-w-[60%] text-divider",size:"text-9xl"})})}function rn(e){var n;if(e.image)return e.image;if((n=e.album)!=null&&n.image)return e.album.image}const sn=V([c.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"},"0"),c.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"},"1")],"MicOutlined");function zn({artist:e,className:n,wrapperClassName:t,size:r,showVerifiedBadge:s=!1}){const{trans:a}=Z(),o=an(e),i=k(r,n,"bg-fg-base/4 object-cover",o?"block":"flex items-center justify-center"),d=o?c.jsx("img",{className:i,draggable:!1,loading:"lazy",src:o,alt:a(H("Image for :name",{values:{name:e.name}}))}):c.jsx("span",{className:k(i,"overflow-hidden"),children:c.jsx(sn,{className:"max-w-[60%] text-divider",size:"text-9xl"})});return c.jsxs("div",{className:k("relative isolate flex-shrink-0",r,t),children:[d,s&&e.verified&&c.jsxs("div",{className:"absolute bottom-24 left-0 right-0 mx-auto flex w-max max-w-full items-center gap-6 rounded-full bg-black/60 px-8 py-4 text-sm text-white",color:"positive",children:[c.jsx("div",{className:"rounded-full bg-primary p-1",children:c.jsx(it,{className:"text-white",size:"sm"})}),c.jsx(Q,{message:"Verified artist"})]})]})}function an(e){var n,t;return e.image_small||((t=(n=e.albums)==null?void 0:n[0])==null?void 0:t.image)}const Vn=f.memo(({minutes:e,seconds:n,ms:t,verbose:r=!1,addZeroToFirstUnit:s=!0,isLive:a,liveInterval:o=5e3})=>{const{trans:i}=Z(),[d,u]=f.useState(()=>e?e*6e4:n?n*1e3:t||0);f.useEffect(()=>{if(a){const g=setInterval(()=>{u(x=>x+o)},o);return()=>clearInterval(g)}},[a,o]);const l=d<0?-d:d,p={days:Math.trunc(l/864e5),hours:Math.trunc(l/36e5)%24,minutes:Math.trunc(l/6e4)%60,seconds:Math.trunc(l/1e3)%60};let m;return r?m=on(p,i):m=cn(p,s),c.jsx(f.Fragment,{children:m})});function on(e,n){const t=[];return e.days&&t.push(`${e.days}${n(H("d"))}`),e.hours&&t.push(`${e.hours}${n(H("hr"))}`),e.minutes&&t.push(`${e.minutes}${n(H("min"))}`),e.seconds&&!e.hours&&t.push(`${e.seconds}${n(H("sec"))}`),t.join(" ")}function cn(e,n=!0){const t=U(e.seconds);let r="";return e.days&&!r&&(r=`${e.days}:${U(e.hours)}:${U(e.minutes)}:${t}`),e.hours&&!r&&(r=`${U(e.hours,n)}:${U(e.minutes)}:${t}`),r||(r=`${U(e.minutes,n)}:${t}`),r}function U(e,n=!0){if(!n)return e;let t=`${e}`;return t.length===1&&(t="0"+t),t}function Sn({track:e,className:n,...t}){const r=f.useMemo(()=>ln(e),[e]);return c.jsx(oe,{...t,className:k("overflow-x-hidden overflow-ellipsis hover:underline",n),to:r,children:e.name})}function ln(e,{absolute:n}={}){let t=`/track/${e.id}/${re(e.name)}`;return n&&(t=`${Y().settings.base_url}${t}`),t}function un({artist:e,className:n,...t}){const r=f.useMemo(()=>dn(e),[e]);return c.jsx(oe,{...t,className:k("overflow-x-hidden overflow-ellipsis outline-none hover:underline focus-visible:underline",n),to:r,children:e.name})}function dn(e,{absolute:n}={}){let t=`/artist/${e.id}/${re(e.name)}`;return n&&(t=`${Y().settings.base_url}${t}`),t}const Bn="genre",fe=1240,ae=45,me=3,fn=.5;function Kn(e){const n=new window.AudioContext;return new Promise((t,r)=>{const s=document.createElement("canvas"),a=s.getContext("2d");if(!a){r();return}s.width=fe,s.height=ae;const o=new FileReader;o.onload=i=>{var u;const d=(u=i.target)==null?void 0:u.result;d?n.decodeAudioData(d,l=>{const p=mn(l,a);t(p)},()=>t(null)):r()},o.readAsArrayBuffer(e)})}function mn(e,n){const t=[],r=e.getChannelData(0),s=fe,a=Math.floor(r.length/s),o=ae,i=[];for(let d=0;d<s;d+=me)i.push(Ee(d*a,a,r)*1e4);for(let d=0;d<s;d+=me){const u=o/Math.max(...i);let l=Ee(d*a,a,r)*1e4;l*=u,l+=1,t.push(gn(d,l))}return n.clearRect(0,0,fe,ae),t}function Ee(e,n,t){let r=0;for(let s=e;s<=e+n-1;s++)r+=Math.pow(t[s],2);return Math.sqrt(r/t.length)}function gn(e,n){let t=me;t*=Math.abs(1-fn);const r=e+t/2,s=ae-n;return[r,s,t,n]}function xe(e){var n;return e.tracks=(n=e.tracks)==null?void 0:n.map(t=>(t.album||(t.album={...e,tracks:void 0}),t)),e}function _n(e){const{trackId:n}=he();return be({queryKey:["tracks",+n,e],queryFn:()=>hn(n,e),initialData:()=>{var r,s;const t=(r=Y().loaders)==null?void 0:r[e.loader];if(((s=t==null?void 0:t.track)==null?void 0:s.id)==n&&(t==null?void 0:t.loader)===e.loader)return t}})}function hn(e,n){return ie.get(`tracks/${e}`,{params:n}).then(t=>(t.data.track.album&&(t.data.track={...t.data.track,album:xe(t.data.track.album)}),t.data))}function Un(e){const{user:n,hasPermission:t}=J();return f.useMemo(()=>{const r={canEdit:!0,canDelete:!0,managesTrack:!0};return e.every(s=>{var i,d;if(!s){r.canEdit=!1,r.canDelete=!1,r.managesTrack=!1;return}const a=(i=s.artists)==null?void 0:i.map(u=>u.id),o=s.owner_id===(n==null?void 0:n.id)||!!((d=n==null?void 0:n.artists)!=null&&d.find(u=>a==null?void 0:a.includes(u.id)));o||(r.managesTrack=!1),!t("tracks.update")&&!t("music.update")&&!o&&(r.canEdit=!1),!t("tracks.delete")&&!t("music.delete")&&!o&&(r.canDelete=!1)}),r},[n,e,t])}const bn=V(c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-12.5c-2.49 0-4.5 2.01-4.5 4.5s2.01 4.5 4.5 4.5 4.5-2.01 4.5-4.5-2.01-4.5-4.5-4.5zm0 5.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"}),"AlbumOutlined");function qn({album:e,className:n,size:t}){const{trans:r}=Z(),s=e==null?void 0:e.image,a=k(n,t,"object-cover bg-fg-base/4",s?"block":"flex items-center justify-center");return s?c.jsx("img",{className:a,draggable:!1,loading:"lazy",src:s,alt:r(H("Image for :name",{values:{name:e.name}}))}):c.jsx("span",{className:k(a,"overflow-hidden"),children:c.jsx(bn,{className:"max-w-[60%] text-divider",size:"text-9xl"})})}function Yn({album:e,artist:n,className:t,target:r}){!n&&e.artists&&(n=e.artists[0]);const s=f.useMemo(()=>xn(e,{artist:n}),[n,e]);return c.jsx(oe,{target:r,className:k("overflow-x-hidden overflow-ellipsis outline-none hover:underline focus-visible:underline",t),to:s,children:e.name})}function xn(e,n={}){var o;const t=n.artist||((o=e.artists)==null?void 0:o[0]),r=re((t==null?void 0:t.name)||"Various Artists"),s=re(e.name);let a=`/album/${e.id}/${r}/${s}`;return n.absolute&&(a=`${Y().settings.base_url}${a}`),a}const Gn="album";function Wn(e){const{albumId:n}=he();return be({queryKey:["albums",+n],queryFn:()=>pn(n,e),initialData:()=>{var r,s;const t=(r=Y().loaders)==null?void 0:r[e.loader];if(((s=t==null?void 0:t.album)==null?void 0:s.id)==n&&(t==null?void 0:t.loader)===e.loader)return t}})}function pn(e,n){return ie.get(`albums/${e}`,{params:n}).then(t=>(t.data.album=xe(t.data.album),t.data))}const Xn=Re.forwardRef((e,n)=>{const t=e.children,[r,s]=f.useState(null),a=f.useRef(null);return f.useImperativeHandle(n,()=>(o,i)=>{ye.flushSync(()=>{s(t(o))}),i(a.current),requestAnimationFrame(()=>{s(null)})},[t]),r?ye.createPortal(c.jsx("div",{style:{zIndex:-100,position:"absolute",top:0,left:-1e5},ref:a,children:r}),ct):null});function Qn(e){const{user:n,hasPermission:t}=J();return f.useMemo(()=>{var s,a;const r={canEdit:!1,canDelete:!1,managesAlbum:!1};if(n!=null&&n.id&&e){const o=(s=e.artists)==null?void 0:s.map(d=>d.id),i=e.owner_id===n.id||!!((a=n.artists)!=null&&a.find(d=>o==null?void 0:o.includes(d.id)));r.canEdit=t("albums.update")||t("music.update")||i,r.canDelete=t("albums.delete")||t("music.delete")||i,r.managesAlbum=i}return r},[n,e,t])}function Zn(){var n;const{user:e}=J();return(n=e==null?void 0:e.artists)==null?void 0:n.find(t=>t.role==="artist")}function Jn({artists:e,className:n,target:t,linkClassName:r,onLinkClick:s}){return e!=null&&e.length?c.jsx("div",{className:k(n,"overflow-x-hidden overflow-ellipsis"),children:e.map((a,o)=>c.jsxs(f.Fragment,{children:[o>0&&", ",c.jsx(un,{artist:a,target:t,className:r,onClick:s})]},a.id))}):c.jsx("div",{className:n,children:c.jsx(Q,{message:"Various artists"})})}const vn=V(c.jsx("path",{d:"M390,32H120c-49.19,0-88,38.81-88,88V390c0,49.19,38.81,90,88,90H390c49.19,0,90-40.81,90-90V120C480,70.81,439.19,32,390,32ZM336,396H284c-42.51,0-72-23.68-72-76V240H176V192c42.51-11,57.95-48.32,60-80h44v72h52v56H280l-.39,70.51c0,21.87,11,29.43,28.62,29.43L336,340Z"})),wn=V(c.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92zM18 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM6 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm12 7.02c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"}),"ShareOutlined");function yn(e,n,t,r){const s=kn(e,n,t,r);e==="mail"?window.location.href=s:An(s)}function An(e){const r=(window.innerWidth-575)/2,s=(window.innerHeight-400)/2,a="status=1, scrollbars=1,width=575,height=400,top="+s+",left="+r;window.open(e,"share",a)}function kn(e,n,t,r){switch(e){case"facebook":return"https://www.facebook.com/sharer/sharer.php?u="+n;case"twitter":return`https://twitter.com/intent/tweet?text=${t}&url=${n}`;case"pinterest":return"https://pinterest.com/pin/create/button/?url="+n+"&media="+r;case"tumblr":return"https://www.tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl=&posttype=photo&title=&caption="+t+"&content="+r+"&url="+n;case"blogger":return"https://www.blogger.com/blog_this.pyra?t&u="+n+"&n="+t;case"mail":return`mailto:?subject=Check out this link.&body=${n}`}}function er({link:e,name:n,image:t,size:r="lg"}){const s=a=>{yn(a,e,n,t)};return c.jsxs("div",{children:[c.jsx(X,{size:r,onClick:()=>s("facebook"),className:"text-facebook",children:c.jsx(lt,{})}),c.jsx(X,{size:r,onClick:()=>s("twitter"),className:"text-twitter",children:c.jsx(ut,{})}),c.jsx(X,{size:r,onClick:()=>s("tumblr"),className:"text-tumblr",children:c.jsx(vn,{viewBox:"0 0 512 512"})}),navigator.share&&c.jsx(X,{size:r,onClick:()=>{try{navigator.share({title:n,url:e})}catch(a){a.name!=="AbortError"&&Oe(H("Could not share link"))}},className:"text-muted",children:c.jsx(wn,{})})]})}function tr({user:e,...n}){var r;const{auth:t}=f.useContext(dt);return c.jsx(Ft,{...n,label:e==null?void 0:e.name,src:e==null?void 0:e.image,link:(e==null?void 0:e.id)&&((r=t.getUserProfileLink)==null?void 0:r.call(t,e))})}const Dn=9007199254740991;function jn(e,n,t="desc"){return e.sort((r,s)=>{let a=Te(r,n),o=Te(s,n);const i=typeof a,d=typeof o;i!==d&&(i==="number"&&(a+=""),d==="number"&&(o+=""));let u=0;return a!=null&&o!=null?a>o?u=1:a<o&&(u=-1):a!=null?u=1:o!=null&&(u=-1),u*(t==="asc"?1:-1)})}function Te(e,n){const t=ft.pick(n,e);if(En(t)){const r=Number(t);return r<Dn?r:t}return t}function En(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}function nr(e){const[n,t]=f.useState({});return{data:f.useMemo(()=>{if(e){if(n!=null&&n.orderBy)return jn([...e],n.orderBy,n.orderDir)}else return[];return e},[n,e]),sortDescriptor:n,onSortChange:t}}function rr(){const{pathname:e}=mt(),n=gt(),{getRedirectUri:t}=J();return ht({mutationFn:r=>Tn(r),onSuccess:(r,{albumId:s})=>{Oe(H("Album deleted")),e.startsWith(`/album/${s}`)&&n(t()),ce.invalidateQueries({queryKey:["tracks"]}),ce.invalidateQueries({queryKey:["albums"]}),ce.invalidateQueries({queryKey:["artists"]})},onError:r=>bt(r)})}function Tn({albumId:e}){return ie.delete(`albums/${e}`).then(n=>n.data)}function sr(){const{fields:e,append:n,remove:t}=xt({name:"links"});return c.jsxs("div",{children:[e.map((r,s)=>c.jsxs("div",{className:"mb-10 flex items-end gap-10",children:[c.jsx(Ae,{required:!0,type:"url",label:c.jsx(Q,{message:"URL"}),name:`links.${s}.url`,size:"sm",className:"flex-auto"}),c.jsx(Ae,{required:!0,label:c.jsx(Q,{message:"Short title"}),name:`links.${s}.title`,size:"sm",className:"flex-auto"}),c.jsx(X,{size:"sm",color:"primary",className:"flex-shrink-0",onClick:()=>{t(s)},children:c.jsx(pt,{})})]},r.id)),c.jsx(vt,{variant:"text",color:"primary",startIcon:c.jsx(zt,{}),size:"xs",onClick:()=>{n({url:"",title:""})},children:c.jsx(Q,{message:"Add another link"})})]})}const ar="artistPage-albumLayout";function or(e){const{artistId:n}=he();return be({queryKey:["artists",n,e],queryFn:()=>Cn(n,e),initialData:()=>{var r,s;const t=(r=Y().loaders)==null?void 0:r[e.loader];if(((s=t==null?void 0:t.artist)==null?void 0:s.id)==n&&(t==null?void 0:t.loader)===e.loader)return t}})}function Cn(e,n){return ie.get(`artists/${e}`,{params:n}).then(t=>(t.data.albums&&(t.data.albums.data=t.data.albums.data.map(r=>xe(r))),t.data))}function ir(e){const{user:n,hasPermission:t}=J();return f.useMemo(()=>{var s;const r={canEdit:!1,canDelete:!1};if(n!=null&&n.id){const a=!!((s=n.artists)!=null&&s.find(o=>o.id===e.id));r.canEdit=t("artists.update")||t("music.update")||a,r.canDelete=t("artists.delete")||t("music.delete")||a}return r},[n,e,t])}const cr=V(c.jsx("path",{d:"M8 19V5l11 7Z"}),"PlayArrowFilled");export{jt as $,zt as A,ae as B,wn as C,xe as D,bn as E,Vn as F,Bn as G,nr as H,ar as I,or as J,Xn as K,Nn as L,sn as M,Wn as N,Pn as O,cr as P,an as Q,_n as R,er as S,Rn as T,tr as U,sr as V,fe as W,nn as X,Wt as Y,Kn as Z,Yt as _,Mn as a,Pt as a0,On as b,Ln as c,Fn as d,Hn as e,qn as f,rn as g,zn as h,kt as i,ln as j,xn as k,dn as l,ir as m,un as n,Qn as o,Yn as p,Jn as q,rr as r,Un as s,Sn as t,Zn as u,Gn as v,L as w,In as x,Tt as y,Ft as z};
//# sourceMappingURL=play-arrow-filled-6295dfa1.js.map
