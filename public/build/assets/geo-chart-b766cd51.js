import{ay as Ce,A as j,cM as U,cN as Ze,cO as O,cP as E,cQ as de,cR as ue,aN as Z,j as s,R as Ve,a2 as C,bs as Ye,c6 as qe,aW as Qe,ca as Xe,cb as Je,bo as Ne,cS as et,cT as tt,cU as fe,cV as Pe,r as h,bO as at,cW as Q,cX as X,cG as _,cF as ae,cY as Re,aI as Y,a1 as S,bP as Ie,cH as A,cZ as st,c_ as rt,c$ as nt,d0 as ot,d1 as it,d2 as ct,d3 as lt,n as Te,ad as se,aX as dt,u as ze,c9 as Le,d4 as Se,d5 as ut,b_ as Ae,b$ as Fe,T,az as ft,aH as mt,I as W,aB as He,aC as Me,M as ht,ax as Oe,E as pt,bc as xt,bi as bt,d6 as gt,bL as me,X as yt,aU as vt,aY as he,aG as jt}from"./main-71da3c50.js";import{g as wt,b as kt,K as Dt,u as $t,S as Ct,t as pe}from"./theme-value-to-hex-1b3b9516.js";function Ee(e){return e.set({hour:0,minute:0,second:0,millisecond:0})}function I(e){return e.set({hour:24-1,minute:60-1,second:60-1,millisecond:1e3-1})}const b=Ee(wt());var De,$e;const J=(($e=(De=Ce())==null?void 0:De.i18n)==null?void 0:$e.language)||"en",Vt=[{key:0,label:j("Today"),getRangeValue:()=>({preset:0,start:b,end:I(b)})},{key:1,label:j("Yesterday"),getRangeValue:()=>({preset:1,start:b.subtract({days:1}),end:I(b).subtract({days:1})})},{key:2,label:j("This week"),getRangeValue:()=>({preset:2,start:U(b,J),end:Ze(I(b),J)})},{key:3,label:j("Last week"),getRangeValue:()=>{const e=U(b,J).subtract({days:7});return{preset:3,start:e,end:e.add({days:6})}}},{key:4,label:j("Last 7 days"),getRangeValue:()=>({preset:4,start:b.subtract({days:7}),end:I(b)})},{key:6,label:j("Last 30 days"),getRangeValue:()=>({preset:6,start:b.subtract({days:30}),end:I(b)})},{key:7,label:j("Last 3 months"),getRangeValue:()=>({preset:7,start:b.subtract({months:3}),end:I(b)})},{key:8,label:j("Last 12 months"),getRangeValue:()=>({preset:8,start:b.subtract({months:12}),end:I(b)})},{key:9,label:j("This month"),getRangeValue:()=>({preset:9,start:O(b),end:E(I(b))})},{key:10,label:j("This year"),getRangeValue:()=>({preset:10,start:de(b),end:ue(I(b))})},{key:11,label:j("Last year"),getRangeValue:()=>({preset:11,start:de(b).subtract({years:1}),end:ue(I(b)).subtract({years:1})})}],Nt=Z(s.jsx("path",{d:"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z"}),"DateRangeOutlined"),Pt=Ve.forwardRef((e,t)=>{const{children:a,inputProps:r,wrapperProps:n,className:o,autoFocus:l,style:i,onClick:c}=e;return s.jsx("div",{...n,onClick:c,children:s.jsx("div",{...r,role:"group",className:C(o,"flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60"),ref:t,style:i,children:s.jsx(Ye,{autoFocus:l,children:a})})})}),Rt=Ve.forwardRef(({inputRef:e,wrapperProps:t,children:a,onBlur:r,...n},o)=>{const l=qe(n),i=Qe(o),{fieldProps:c,inputProps:f}=Xe({...n,focusRef:i,labelElementType:"span"});return l.wrapper=C(l.wrapper,n.disabled&&"pointer-events-none"),s.jsx(Je,{wrapperProps:Ne(t,{onBlur:u=>{var m;(m=i.current)!=null&&m.contains(u.relatedTarget)||r==null||r(u)},onClick:()=>{const u=et(i);u==null||u.focusFirst()}}),fieldClassNames:l,ref:i,...c,children:s.jsx(Pt,{inputProps:f,className:C(l.input,"gap-10"),ref:e,children:a})})});function It(e){return e instanceof tt?"day":"minute"}function re(e,t,a){return t!=null&&e.compare(t)<0||a!=null&&e.compare(a)>0}function F(e,t,a){try{return fe(e,t,a)}catch{return fe(e,"UTC",a)}}function Tt(e,t){const a=Pe(),[r,n]=h.useState(!1),o=t.closeDialogOnSelection??!0,l=t.granularity||It(e),i=t.min?F(t.min,a):void 0,c=t.max?F(t.max,a):void 0;return{timezone:a,granularity:l,min:i,max:c,calendarIsOpen:r,setCalendarIsOpen:n,closeDialogOnSelection:o}}function xe(e){var oe,ie;const t=kt(),[a,r]=h.useState({start:(!e.value||!e.value.start)&&!((oe=e.defaultValue)!=null&&oe.start),end:(!e.value||!e.value.end)&&!((ie=e.defaultValue)!=null&&ie.end)}),n=e.onChange,[o,l]=at(e.value?te(e.value,t):void 0,e.value?void 0:te(e.defaultValue,t),x=>{r({start:!1,end:!1}),n==null||n(x)}),{min:i,max:c,granularity:f,timezone:u,calendarIsOpen:m,setCalendarIsOpen:p,closeDialogOnSelection:y}=Tt(o.start,e),w=h.useCallback(()=>{r({start:!0,end:!0}),l(te(null,t)),n==null||n(null),p(!1)},[t,l,n,p]),[v,z]=h.useState(null),[$,V]=h.useState(!1),[P,H]=h.useState(o),[q,B]=h.useState(()=>be(o,c)),d=h.useCallback(x=>{let k=x.start??t,D=x.end??t;i&&(k=Q(k,i)??k);const ce=c?X(c,D):D;ce&&(k=X(k,ce)??k);const le=i?Q(i,k):k;return le&&(D=Q(D,le)??D),c&&(D=X(D,c)??D),{start:F(k,u),end:F(D,u)}},[i,c,u,t]),g=h.useCallback(x=>{const k={...d(x),preset:x.preset};l(k),H(k),B(be(k,c)),r({start:!1,end:!1})},[l,d,c]),N=h.useCallback(x=>!a.start&&_(x,P.start)||!a.end&&_(x,P.end),[P,a]),L=h.useCallback(x=>($||!a.start&&!a.end)&&x.compare(P.start)>=0&&x.compare(P.end)<=0,[P,a,$]),G=h.useCallback(x=>_(x,P.start),[P]),K=h.useCallback(x=>_(x,P.end),[P]),We=h.useCallback((x,k)=>({onPointerEnter:()=>{$&&k&&H(ee({start:v,end:x,timezone:u}))},onClick:()=>{if(!$)V(!0),z(x),H(ee({start:x,end:x,timezone:u}));else{const D=ee({start:v,end:x,timezone:u});D.start=Ee(D.start),D.end=I(D.end),V(!1),z(null),g==null||g(D),y&&(p==null||p(!1))}}}),[v,$,g,p,y,u]);return{selectedValue:o,setSelectedValue:g,calendarIsOpen:m,setCalendarIsOpen:p,dayIsActive:N,dayIsHighlighted:L,dayIsRangeStart:G,dayIsRangeEnd:K,getCellProps:We,calendarDates:q,setIsPlaceholder:r,isPlaceholder:a,clear:w,setCalendarDates:B,min:i,max:c,granularity:f,timezone:u,closeDialogOnSelection:y}}function be(e,t){let a=ae(O(e.start)),r=ae(E(e.end));return Re(a,r)&&(r=E(r.add({months:1}))),t&&r.compare(t)>0&&(r=a,a=O(a.subtract({months:1}))),[a,r]}function ee(e){const t=F(e.start,e.timezone),a=F(e.end,e.timezone);return t.compare(a)>0?{start:a,end:t}:{start:t,end:a}}function te(e,t){return e!=null&&e.start&&(e!=null&&e.end)?e:!(e!=null&&e.start)&&(e!=null&&e.end)?(e.start=e.end.subtract({months:1}),e):!(e!=null&&e.end)&&(e!=null&&e.start)?(e.end=e.start.add({months:1}),e):{start:t,end:t.add({months:1})}}const zt=Z(s.jsx("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z"}),"ArrowRightAltOutlined");function Lt(e,t,a,r){switch(t){case"era":case"year":case"month":case"day":return e.cycle(t,a,{round:t==="year"})}if("hour"in e)switch(t){case"dayPeriod":{const n=e.hour,o=n>=12;return e.set({hour:o?n-12:n+12})}case"hour":case"minute":case"second":return e.cycle(t,a,{round:t!=="hour",hourCycle:r.hour12?12:24})}return e}function St(e,t,a,r){switch(t){case"day":case"month":case"year":return e.set({[t]:a})}if("hour"in e)switch(t){case"dayPeriod":{const n=e.hour,o=n>=12;return a>=12===o?e:e.set({hour:o?n-12:n+12})}case"hour":if(r.hour12){const o=e.hour>=12;!o&&a===12&&(a=0),o&&a<12&&(a+=12)}case"minute":case"second":return e.set({[t]:a})}return e}const ge={year:5,month:2,day:7,hour:2,minute:15,second:15,dayPeriod:1};function At({segment:e,domProps:t,value:a,onChange:r,isPlaceholder:n,state:{timezone:o,calendarIsOpen:l,setCalendarIsOpen:i}}){const c=Y(),f=h.useRef(""),{localeCode:u}=S(),m=Ie(),p=A({timeZone:o}),y=h.useMemo(()=>new st(u,{maximumFractionDigits:0}),[u]),w=d=>{r(St(a,e.type,d,p.resolvedOptions()))},v=d=>{r(Lt(a,e.type,d,p.resolvedOptions()))},z=()=>{if(y.isValidPartialNumber(e.text)){const d=e.text.slice(0,-1),g=y.parse(d);if(d.length===0||g===0){const N=rt(o);e.type in N&&w(N[e.type])}else w(g);f.current=d}else e.type==="dayPeriod"&&v(-1)},$=d=>{var g;if(!(d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)){switch(d.key){case"ArrowLeft":d.preventDefault(),d.stopPropagation(),m==null||m.focusPrevious();break;case"ArrowRight":d.preventDefault(),d.stopPropagation(),m==null||m.focusNext();break;case"Enter":(g=d.target.closest("form"))==null||g.requestSubmit(),i(!l);break;case"Tab":break;case"Backspace":case"Delete":{d.preventDefault(),d.stopPropagation(),z();break}case"ArrowUp":d.preventDefault(),f.current="",v(1);break;case"ArrowDown":d.preventDefault(),f.current="",v(-1);break;case"PageUp":d.preventDefault(),f.current="",v(ge[e.type]||1);break;case"PageDown":d.preventDefault(),f.current="",v(-(ge[e.type]||1));break;case"Home":d.preventDefault(),f.current="",w(e.maxValue);break;case"End":d.preventDefault(),f.current="",w(e.minValue);break}q(d.key)}},V=A({hour:"numeric",hour12:!0}),P=h.useMemo(()=>{const d=new Date;return d.setHours(0),V.formatToParts(d).find(g=>g.type==="dayPeriod").value},[V]),H=h.useMemo(()=>{const d=new Date;return d.setHours(12),V.formatToParts(d).find(g=>g.type==="dayPeriod").value},[V]),q=d=>{const g=f.current+d;switch(e.type){case"dayPeriod":if(P.toLowerCase().startsWith(d))w(0);else if(H.toLowerCase().startsWith(d))w(12);else break;m==null||m.focusNext();break;case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!y.isValidPartialNumber(g))return;let N=y.parse(g),L=N,G=e.minValue===0;if(e.type==="hour"&&p.resolvedOptions().hour12){switch(p.resolvedOptions().hourCycle){case"h11":N>11&&(L=y.parse(d));break;case"h12":G=!1,N>12&&(L=y.parse(d));break}e.value>=12&&N>1&&(N+=12)}else N>e.maxValue&&(L=y.parse(d));if(Number.isNaN(N))return;const K=L!==0||G;K&&w(L),+`${N}0`>e.maxValue||g.length>=String(e.maxValue).length?(f.current="",K&&(m==null||m.focusNext())):f.current=g;break}}},B=c?{}:{"aria-label":e.type,"aria-valuetext":n?void 0:`${e.value}`,"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":n?void 0:e.value,tabIndex:0,onKeyDown:$};return s.jsx("div",{...Ne(t,{...B,onFocus:d=>{f.current="",d.target.scrollIntoView({block:"nearest"})},onClick:d=>{d.preventDefault(),d.stopPropagation()}}),className:"box-content cursor-default select-none whitespace-nowrap rounded p-2 text-center tabular-nums caret-transparent outline-none focus:bg-primary focus:text-on-primary",children:e.text.padStart(e.minLength,"0")})}function Ft({segment:e,domProps:t}){const a=Ie();return s.jsx("div",{...t,onPointerDown:r=>{r.pointerType==="mouse"&&(r.preventDefault(),a!=null&&a.focusNext({from:r.target})||a==null||a.focusPrevious({from:r.target}))},"aria-hidden":!0,className:"min-w-4 cursor-default select-none",children:e.text})}function Ht(e,t,a){switch(t){case"year":return{value:e.year,placeholder:"yyyy",minValue:1,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,placeholder:"mm",minValue:ot(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:nt(e),maxValue:e.calendar.getDaysInMonth(e),placeholder:"dd"}}if("hour"in e)switch(t){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12,placeholder:"--"};case"hour":if(a.hour12){const r=e.hour>=12;return{value:e.hour,minValue:r?12:0,maxValue:r?23:11,placeholder:"--"}}return{value:e.hour,minValue:0,maxValue:23,placeholder:"--"};case"minute":return{value:e.minute,minValue:0,maxValue:59,placeholder:"--"}}return{}}function ye({segmentProps:e,state:t,value:a,onChange:r,isPlaceholder:n}){const{granularity:o}=t,l=h.useMemo(()=>{const u={year:"numeric",month:"numeric",day:"numeric"};return o==="minute"&&(u.hour="numeric",u.minute="numeric"),u},[o]),i=A(l),c=h.useMemo(()=>a.toDate(),[a]),f=h.useMemo(()=>i.formatToParts(c).map(u=>{const m=Ht(a,u.type,i.resolvedOptions()),p=n&&u.type!=="literal"?m.placeholder:u.value;return{type:u.type,text:u.value===", "?" ":p,...m,minLength:u.type!=="literal"?String(m.maxValue).length:1}}),[c,i,n,a]);return s.jsx("div",{className:"flex items-center",children:f.map((u,m)=>u.type==="literal"?s.jsx(Ft,{domProps:e,segment:u},m):s.jsx(At,{isPlaceholder:n,domProps:e,state:t,value:a,onChange:r,segment:u},m))})}function Mt({date:e,currentMonth:t,state:{dayIsActive:a,dayIsHighlighted:r,dayIsRangeStart:n,dayIsRangeEnd:o,getCellProps:l,timezone:i,min:c,max:f}}){const{localeCode:u}=S(),m=it(e,u),p=a(e),y=r(e),w=n(e),v=o(e),z=ct(e,i),$=Re(e,t),V=re(e,c,f);return s.jsxs("div",{role:"button","aria-disabled":V,className:C("relative isolate h-40 w-40 flex-shrink-0 text-sm",V&&"pointer-events-none text-disabled",!$&&"pointer-events-none invisible"),...l(e,$),children:[s.jsx("span",{className:C("absolute inset-0 z-10 flex h-full w-full cursor-pointer select-none items-center justify-center rounded-full",!p&&!z&&"hover:bg-hover",p&&"bg-primary font-semibold text-on-primary",z&&!p&&"bg-chip"),children:e.day}),y&&$&&s.jsx("span",{className:C("absolute inset-0 h-full w-full bg-primary/focus",(w||m===0||e.day===1)&&"rounded-l-full",(v||m===6||e.day===t.calendar.getDaysInMonth(t))&&"rounded-r-full")})]})}function Ot({startDate:e,state:t,isFirst:a,isLast:r}){const{localeCode:n}=S(),o=lt(e,n),l=U(e,n);return s.jsxs("div",{className:"w-280 flex-shrink-0",children:[s.jsx(Et,{isFirst:a,isLast:r,state:t,currentMonth:e}),s.jsxs("div",{className:"block",role:"grid",children:[s.jsx(Bt,{state:t,startDate:e}),[...new Array(o).keys()].map(i=>s.jsx(Te.div,{className:"mb-6 flex",children:[...new Array(7).keys()].map(c=>s.jsx(Mt,{date:l.add({weeks:i,days:c}),currentMonth:e,state:t},c))},i))]})]})}function Et({currentMonth:e,isFirst:t,isLast:a,state:{calendarDates:r,setCalendarDates:n,timezone:o,min:l,max:i}}){const c=p=>{const y=r.length;let w;p==="forward"?w=r.map(v=>E(v.add({months:y}))):w=r.map(v=>E(v.subtract({months:y}))),n(w)},f=A({month:"long",year:"numeric",era:e.calendar.identifier!=="gregory"?"long":void 0,calendar:e.calendar.identifier}),u=re(e.subtract({days:1}),l,i),m=re(O(e.add({months:1})),l,i);return s.jsxs("div",{className:"flex items-center justify-between gap-10",children:[s.jsx(se,{size:"md",className:C("text-muted",!t&&"invisible"),disabled:!t||u,"aria-hidden":!t,onClick:()=>{c("backward")},children:s.jsx(dt,{})}),s.jsx("div",{className:"select-none text-sm font-semibold",children:f.format(e.toDate(o))}),s.jsx(se,{size:"md",className:C("text-muted",!a&&"invisible"),disabled:!a||m,"aria-hidden":!a,onClick:()=>{c("forward")},children:s.jsx(Dt,{})})]})}function Bt({state:{timezone:e},startDate:t}){const{localeCode:a}=S(),r=A({weekday:"short"}),n=U(t,a);return s.jsx("div",{className:"flex",children:[...new Array(7).keys()].map(o=>{const i=n.add({days:o}).toDate(e),c=r.format(i);return s.jsx("div",{className:"relative h-40 w-40 flex-shrink-0 text-sm font-semibold",children:s.jsx("div",{className:"absolute flex h-full w-full select-none items-center justify-center",children:c})},o)})})}function Gt({state:e,visibleMonths:t=1}){return Y()&&(t=1),s.jsx(h.Fragment,{children:[...new Array(t).keys()].map(r=>{const n=ae(O(e.calendarDates[r])),o=r===0,l=r===t-1;return s.jsx(Ot,{state:e,startDate:n,isFirst:o,isLast:l},r)})})}const Be=h.memo(({start:e,end:t,options:a,preset:r,timezone:n})=>{const{dates:o}=ze(),l=Pe(),i=n||(a==null?void 0:a.timeZone)||l,c=A(a||Le[r||(o==null?void 0:o.format)]);if(!e||!t)return null;let f;try{f=c.formatRange(ve(e,i),ve(t,i))}catch{f=""}return s.jsx(h.Fragment,{children:f})},Se);function ve(e,t){return typeof e=="string"?ut(e,t).toDate():"toDate"in e?e.toDate(t):e}function Kt({onPresetSelected:e,selectedValue:t}){return s.jsx(Ae,{children:Vt.map(a=>s.jsx(Fe,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(t==null?void 0:t.preset)===a.key,onSelected:()=>{const r=a.getRangeValue();e(r)},children:s.jsx(T,{...a.label})},a.key))})}const Ge=[{key:0,label:j("Preceding period"),getRangeValue:e=>{const t=e.start,n=(e.end.toDate().getTime()-t.toDate().getTime())/(1e3*60);return{preset:0,start:t.subtract({minutes:n}),end:t}}},{key:1,label:j("Same period last year"),getRangeValue:e=>({start:e.start.subtract({years:1}),end:e.end.subtract({years:1}),preset:1})},{key:2,label:j("Custom"),getRangeValue:e=>({start:e.start.subtract({weeks:1}),end:e.end.subtract({weeks:1}),preset:2})}];function _t({originalRangeValue:e,onPresetSelected:t,selectedValue:a}){return s.jsx(Ae,{children:Ge.map(r=>s.jsx(Fe,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(a==null?void 0:a.preset)===r.key,onSelected:()=>{const n=r.getRangeValue(e);t(n)},children:s.jsx(T,{...r.label})},r.key))})}function Ut({state:e,compareState:t,showInlineDatePickerField:a=!1,compareVisibleDefault:r=!1}){const n=$t(),{close:o}=ft(),l=h.useRef(e),i=e.isPlaceholder.start||e.isPlaceholder.end,[c,f]=h.useState(r),u=s.jsxs(mt,{dividerTop:!0,startAction:!i&&!n?s.jsx("div",{className:"text-xs",children:s.jsx(Be,{start:e.selectedValue.start.toDate(),end:e.selectedValue.end.toDate(),options:{dateStyle:"medium"}})}):void 0,children:[s.jsx(W,{variant:"text",size:"xs",onClick:()=>{e.setSelectedValue(l.current.selectedValue),e.setIsPlaceholder(l.current.isPlaceholder),o()},children:s.jsx(T,{message:"Cancel"})}),s.jsx(W,{variant:"flat",color:"primary",size:"xs",onClick:()=>{const m=e.selectedValue;t&&c&&(m.compareStart=t.selectedValue.start,m.compareEnd=t.selectedValue.end),o(m)},children:s.jsx(T,{message:"Select"})})]});return s.jsxs(He,{size:"auto",children:[s.jsxs(Me,{className:"flex",padding:"p-0",children:[!n&&s.jsxs("div",{className:"min-w-192 py-14",children:[s.jsx(Kt,{selectedValue:e.selectedValue,onPresetSelected:m=>{e.setSelectedValue(m),e.closeDialogOnSelection&&o(m)}}),!!t&&s.jsxs(h.Fragment,{children:[s.jsx(Ct,{className:"mx-20 mb-10 mt-14",checked:c,onChange:m=>f(m.target.checked),children:s.jsx(T,{message:"Compare"})}),c&&s.jsx(_t,{originalRangeValue:e.selectedValue,selectedValue:t.selectedValue,onPresetSelected:m=>{t.setSelectedValue(m)}})]})]}),s.jsx(ht,{initial:!1,children:s.jsx(Wt,{state:e,compareState:t,showInlineDatePickerField:a,compareVisible:c})})]}),!e.closeDialogOnSelection&&u]})}function Wt({state:e,compareState:t,showInlineDatePickerField:a,compareVisible:r}){return s.jsxs(Te.div,{initial:{width:0,overflow:"hidden"},animate:{width:"auto"},exit:{width:0,overflow:"hidden"},transition:{type:"tween",duration:.125},className:"border-l px-20 pb-20 pt-10",children:[a&&s.jsxs("div",{children:[s.jsx(je,{state:e}),!!t&&r&&s.jsx(je,{state:t,label:s.jsx(T,{message:"Compare"})})]}),s.jsx("div",{className:"flex items-start gap-36",children:s.jsx(Gt,{state:e,visibleMonths:2})})]})}function je({state:e,label:t}){const{selectedValue:a,setSelectedValue:r}=e;return s.jsxs(Rt,{className:"mb-20 mt-10",label:t,children:[s.jsx(ye,{state:e,value:a.start,onChange:n=>{r({...a,start:n})}}),s.jsx(zt,{className:"block flex-shrink-0 text-muted",size:"md"}),s.jsx(ye,{state:e,value:a.end,onChange:n=>{r({...a,end:n})}})]})}const Zt=Z(s.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBackOutlined"),Yt=Z(s.jsx("path",{d:"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"}),"InfoDialogTrigger"),qt={month:"short",day:"2-digit"};function la({value:e,onChange:t,disabled:a,compactOnMobile:r=!0,enableCompare:n=!1,granularity:o="minute"}){const l=Y();return s.jsxs(Oe,{type:"popover",onClose:i=>{i&&t(i)},children:[s.jsx(W,{variant:"outline",color:"chip",endIcon:s.jsx(Nt,{}),disabled:a,children:s.jsx(Be,{start:e.start,end:e.end,options:l&&r?qt:Le.short})}),s.jsx(Qt,{value:e,enableCompare:n,granularity:o})]})}function Qt({value:e,enableCompare:t,granularity:a}){const r=Y(),n=xe({granularity:a,defaultValue:{start:e.start,end:e.end,preset:e.preset},closeDialogOnSelection:!1}),o=!!e.compareStart&&!!e.compareEnd,l=xe({granularity:a,defaultValue:o?{start:e.compareStart,end:e.compareEnd,preset:e.comparePreset}:Ge[0].getRangeValue(n.selectedValue)});return s.jsx(Ut,{state:n,compareState:t?l:void 0,compareVisibleDefault:o,showInlineDatePickerField:!r})}function Ke(e){const{title:t,description:a,children:r,className:n,contentIsFlex:o=!0,contentClassName:l,contentRef:i,minHeight:c="min-h-440"}=e;return s.jsxs("div",{className:C("flex h-full flex-auto flex-col rounded-panel border bg dark:bg-alt",c,n),children:[s.jsxs("div",{className:"flex flex-shrink-0 items-center justify-between p-14 text-xs",children:[s.jsx("div",{className:"text-sm font-semibold",children:t}),a&&s.jsx("div",{className:"text-muted",children:a})]}),s.jsx("div",{ref:i,className:C("relative p-14",o&&"flex flex-auto items-center justify-center",l),children:r})]})}function ne(){return s.jsxs("div",{className:"absolute mx-auto flex items-center gap-10 text-sm",children:[s.jsx(pt,{isIndeterminate:!0,size:"sm"}),s.jsx(T,{message:"Chart loading"})]})}const Xt=h.lazy(()=>xt(()=>import("./lazy-chart-cbf67c6e.js"),["./lazy-chart-cbf67c6e.js","./main-71da3c50.js","./main-1fe46cc4.css"],import.meta.url));function _e(e){const{title:t,description:a,className:r,contentRef:n,isLoading:o}=e;return s.jsx(Ke,{title:t,description:a,className:r,contentRef:n,children:s.jsxs(h.Suspense,{fallback:s.jsx(ne,{}),children:[s.jsx(Xt,{...e}),o&&s.jsx(ne,{})]})})}function Ue(e,{localeCode:t="en",shareFirstDatasetLabels:a=!0}){if(!e)return{datasets:[]};const r=[];return{...e,datasets:e.datasets.map((n,o)=>{const l=n.data.map((i,c)=>{let f;return o===0||!a?(f=Jt(i,e.granularity,t),r[c]=f):f=r[c],{...f,value:i.value}});return{...n,data:l}})}}function Jt(e,t,a){return e.label?{label:e.label}:e.date?ea(e,t,a):{label:""}}function ea({date:e,endDate:t},a="day",r){const n=me(e).toDate(),o=t?me(t).toDate():null;switch(a){case"minute":return{label:R(r,{second:"2-digit"}).format(n),tooltipTitle:R(r,{day:"2-digit",hour:"numeric",minute:"numeric",second:"2-digit"}).format(n)};case"hour":return{label:R(r,{hour:"numeric",minute:"numeric"}).format(n),tooltipTitle:R(r,{month:"short",day:"2-digit",hour:"numeric",minute:"numeric"}).format(n)};case"day":return{label:R(r,{day:"2-digit",weekday:"short"}).format(n),tooltipTitle:R(r,{day:"2-digit",weekday:"short",month:"short"}).format(n)};case"week":return{label:R(r,{month:"short",day:"2-digit"}).format(n),tooltipTitle:R(r,{day:"2-digit",month:"long",year:"numeric"}).formatRange(n,o)};case"month":return{label:R(r,{month:"short",year:"numeric"}).format(n),tooltipTitle:R(r,{month:"long",year:"numeric"}).format(n)};case"year":return{label:R(r,{year:"numeric"}).format(n),tooltipTitle:R(r,{year:"numeric"}).format(n)}}}const R=bt((e,t)=>new gt(e,t),{equals:(e,t)=>Se(e,t),callTimeout:void 0}),we=Ce().themes[0].values["--be-primary"],M=[[`rgb(${we.replaceAll(" ",",")})`,`rgba(${we.replaceAll(" ",",")},0.2)`],["rgb(255,112,67)","rgb(255,112,67,0.2)"],["rgb(255,167,38)","rgb(255,167,38,0.2)"],["rgb(141,110,99)","rgb(141,110,99,0.2)"],["rgb(102,187,106)","rgba(102,187,106,0.2)"],["rgb(92,107,192)","rgb(92,107,192,0.2)"]],ta={parsing:{xAxisKey:"label",yAxisKey:"value"},datasets:{line:{fill:"origin",tension:.1,pointBorderWidth:4,pointHitRadius:10}},plugins:{tooltip:{intersect:!1,mode:"index"}}};function da({data:e,className:t,...a}){const{localeCode:r}=S(),n=h.useMemo(()=>{const o=Ue(e,{localeCode:r});return o.datasets=o.datasets.map((l,i)=>({...l,backgroundColor:M[i][1],borderColor:M[i][0],pointBackgroundColor:M[i][0]})),o},[e,r]);return s.jsx(_e,{...a,className:C(t,"min-w-500"),data:n,type:"line",options:ta})}const aa={parsing:{key:"value"},plugins:{tooltip:{intersect:!0}}};function ua({data:e,className:t,...a}){const{localeCode:r}=S(),n=h.useMemo(()=>{var l;const o=Ue(e,{localeCode:r});return o.labels=(l=o.datasets[0])==null?void 0:l.data.map(i=>i.label),o.datasets=o.datasets.map((i,c)=>({...i,backgroundColor:M.map(f=>f[1]),borderColor:M.map(f=>f[0]),borderWidth:2})),o},[e,r]);return s.jsx(_e,{type:"polarArea",data:n,options:aa,className:C(t,"min-w-500"),...a})}const ke="https://www.gstatic.com/charts/loader.js";function sa({placeholderRef:e,data:t,country:a,onCountrySelected:r}){const{trans:n}=yt(),{analytics:o}=ze(),l=o==null?void 0:o.gchart_api_key,{selectedTheme:i}=vt(),c=h.useRef(),f=!!r&&!a,u=h.useCallback(()=>{var z,$;if(typeof google>"u")return;const p=t.map(V=>[V.label,V.value]);p.unshift([n(a?j("City"):j("Country")),n(j("Clicks"))]);const y=`${pe(i.values["--be-paper"])}`,v={colorAxis:{colors:[`${pe(i.values["--be-primary"])}`]},backgroundColor:y,region:a?a.toUpperCase():void 0,resolution:a?"provinces":"countries",displayMode:a?"markers":"regions",enableRegionInteractivity:f};!c.current&&e.current&&((z=google==null?void 0:google.visualization)!=null&&z.GeoChart)&&(c.current=new google.visualization.GeoChart(e.current)),($=c.current)==null||$.draw(google.visualization.arrayToDataTable(p),v)},[i,t,e,n,a,f]),m=h.useCallback(async()=>{he.isLoadingOrLoaded(ke)||(await he.loadAsset(ke,{type:"js",id:"google-charts-js"}),await google.charts.load("current",{packages:["geochart"],mapsApiKey:l}),u())},[l,u]);return h.useEffect(()=>(c.current&&r&&google.visualization.events.addListener(c.current,"regionClick",p=>r==null?void 0:r(p.region)),()=>{c.current&&google.visualization.events.removeAllListeners(c.current)}),[r,c.current]),h.useEffect(()=>{m()},[m]),h.useEffect(()=>{u()},[i,u,t]),{drawGoogleChart:u}}function ra({title:e,body:t,dialogSize:a="sm",className:r}){return s.jsxs(Oe,{type:"popover",triggerOnHover:!0,children:[s.jsx(se,{className:C("ml-4 text-muted opacity-70",r),iconSize:"xs",size:"2xs",children:s.jsx(Yt,{viewBox:"0 0 16 16"})}),s.jsxs(He,{size:a,children:[e&&s.jsx(jt,{padding:"px-18 pt-12",size:"md",hideDismissButton:!0,children:e}),s.jsx(Me,{children:t})]})]})}const na=h.memo(({code:e})=>{const{localeCode:t}=S(),a=new Intl.DisplayNames([t],{type:"region"});let r;try{r=a.of(e.toUpperCase())}catch{}return s.jsx(h.Fragment,{children:r})});function fa({data:e,isLoading:t,onCountrySelected:a,country:r,...n}){const o=h.useRef(null),l=!!a,i=e==null?void 0:e.datasets[0].data,c=h.useMemo(()=>i||[],[i]);return sa({placeholderRef:o,data:c,country:r,onCountrySelected:a}),s.jsxs(Ke,{...n,className:"min-w-500",title:s.jsxs("div",{className:"flex items-center",children:[s.jsx(T,{message:"Top Locations"}),r?s.jsxs("span",{className:"pl-4",children:["(",s.jsx(na,{code:r}),")"]}):null,l&&s.jsx(oa,{})]}),contentIsFlex:t,children:[t&&s.jsx(ne,{}),s.jsxs("div",{className:"flex gap-24",children:[s.jsx("div",{ref:o,className:"min-h-[340px] w-[480px] flex-auto"}),s.jsxs("div",{className:"w-[170px]",children:[s.jsx("div",{className:"max-h-[340px] w-full flex-initial overflow-y-auto text-sm",children:c.map(f=>s.jsxs("div",{className:C("mb-4 flex items-center gap-4",l&&"cursor-pointer hover:underline"),role:l?"button":void 0,onClick:()=>{a==null||a(f.code)},children:[s.jsx("div",{className:"max-w-110 overflow-hidden overflow-ellipsis whitespace-nowrap",children:f.label}),s.jsxs("div",{children:["(",f.percentage,")%"]})]},f.label))}),r&&s.jsx(W,{variant:"outline",size:"xs",className:"mt-14",startIcon:s.jsx(Zt,{}),onClick:()=>{a==null||a(void 0)},children:s.jsx(T,{message:"Back to countries"})})]})]})]})}function oa(){return s.jsx(ra,{title:s.jsx(T,{message:"Zooming in"}),body:s.jsx(T,{message:"Click on a country inside the map or country list to zoom in and see city data for that country."})})}export{zt as A,_e as B,M as C,Vt as D,Be as F,fa as G,ra as I,da as L,ua as P,la as R,Ut as a,Rt as b,Nt as c,ye as d,Zt as e,Ue as f,Pt as g,Tt as h,Gt as i,Yt as j,Ke as k,ne as l,F as t,xe as u};
//# sourceMappingURL=geo-chart-b766cd51.js.map
