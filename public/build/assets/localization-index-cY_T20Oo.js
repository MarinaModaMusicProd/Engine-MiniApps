import{af as k,G as h,ag as U,I as f,J as u,bx as p,b as y,z as b,$ as x,M as D,j as e,a0 as S,a1 as v,T as s,a2 as w,as as z,V as T,Q as d,t as c,r as A,ab as E,D as j,a8 as H,W as F,v as C,H as N,aa as Q,a4 as B,a5 as K,ac as R}from"./main-BEfQELxr.js";import{a as V,T as W}from"./admin-config-BaCrw7Kt.js";import{D as $}from"./settings-links-BagG4yO6.js";import{u as G,a as J}from"./update-localization-lR8515Uf.js";import{u as O,a as _,G as X,D as Y,b as Z,c as ee}from"./use-datatable-query-DPUO64j4.js";import{a as ae,D as se,b as te,c as oe}from"./datatable-page-with-header-layout-DgFKm91D.js";import{T as ie}from"./table-Bdp6S_DF.js";import{F as re}from"./file-upload-provider-eR3r-15c.js";import{F as ne}from"./formatted-date-B-08Y9yP.js";import{M as le}from"./MoreVert-Dq4kJhtz.js";import{C as me}from"./confirmation-dialog-CYwhNB58.js";import{d as de}from"./download-file-from-url-BVaKcxRP.js";import{F as ce}from"./file-input-config-DrcTpI3-.js";import{o as ue}from"./open-upload-window-B2GQndIr.js";import{D as ge}from"./data-table-add-item-button-BdngBic4.js";import{F as L}from"./select-DvPFHFsY.js";import{D as P}from"./dialog-footer-DZFPEWVp.js";import{g as I}from"./languages-DRZfms_v.js";import"./Album-CXNrxcWI.js";import"./Comment-TqhRbk6J.js";import"./FileUpload-DPKPUe4e.js";import"./Mic-cPqrQSx8.js";import"./PlaylistPlay-jDnYmdDX.js";import"./QueueMusic-C8vaKlwp.js";import"./Sell-DvbBmLb2.js";import"./external-link-CT1zJoZ3.js";import"./FilterAlt-Cy68O-Jt.js";import"./form-normalized-model-chip-field-4XjViKi1.js";import"./use-normalized-models-ChKc2G_X.js";import"./form-chip-field-82C9gJw-.js";import"./input-BypPJ39K.js";import"./chip-list-CnaxlPJ9.js";import"./accordion-CpkAY-cS.js";import"./checkbox-C191zCCH.js";import"./CheckBoxOutlineBlank-B_WkUAPG.js";import"./ArrowRightAlt-CIybcFtZ.js";import"./DateRange-DXC1xWJJ.js";import"./use-base-date-picker-state-C8djIY4i.js";import"./use-date-formatter-BKDPf1lG.js";import"./DateFormatter-Dix9bfnP.js";import"./KeyboardArrowRight-BVstfQVU.js";import"./use-date-range-picker-state-CLLDtAYm.js";import"./list-C_muhLNE.js";import"./switch-kVp777pB.js";import"./is-tablet-media-query-BWKVDwFI.js";import"./use-current-date-time-Bg8tRM7A.js";import"./normalized-model-field-AJN-ee7u.js";import"./Edit-gh_pXqg9.js";import"./skeleton-IvCa_cqw.js";import"./dashboard-layout-context-Ors6hOMs.js";import"./use-toggle-dashboard-left-sidebar-BNAUqBUz.js";import"./ArrowDownward-i0hV0JR6.js";import"./useInteractOutside-Iqh6soAi.js";import"./useEffectEvent-TynbBUG3.js";import"./is-ctrl-or-shift-pressed-CMgU9cG9.js";import"./use-pointer-events-CdAPueCj.js";import"./useGlobalListeners-BF1tAQIT.js";import"./uploaded-file-DYvUNPPs.js";import"./extension-from-filename-O0XMuZye.js";import"./pretty-bytes-bO14ePu9.js";import"./traditional-D9TTECMQ.js";import"./Add-Cqjx6ezR.js";import"./combobox-end-adornment-B98K5MYg.js";import"./countries-EFifpL8Y.js";const pe=""+new URL("around-the-world-DwONd8Eq.svg",import.meta.url).href;function xe(a){return y.post("localizations",a).then(o=>o.data)}function je(a){const o=k();return h({mutationFn:t=>xe(t),onSuccess:()=>{f(u("Localization created")),o.invalidateQueries({queryKey:p.localizations.invalidateKey})},onError:t=>U(t,a)})}function he(){const{trans:a}=b(),{formId:o,close:t}=x(),i=D({defaultValues:{language:"en"}}),r=I(),m=je(i);return e.jsxs(S,{children:[e.jsx(v,{children:e.jsx(s,{message:"Create localization"})}),e.jsx(w,{children:e.jsxs(z,{form:i,id:o,onSubmit:n=>{m.mutate(n,{onSuccess:t})},children:[e.jsx(T,{autoFocus:!0,name:"name",label:e.jsx(s,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(L,{required:!0,name:"language",label:e.jsx(s,{message:"Language"}),selectionMode:"single",showSearchField:!0,searchPlaceholder:a(u("Search languages")),children:r.map(n=>e.jsx(d,{value:n.code,children:n.name},n.code))})]})}),e.jsxs(P,{children:[e.jsx(c,{onClick:t,children:e.jsx(s,{message:"Cancel"})}),e.jsx(c,{variant:"flat",color:"primary",type:"submit",form:o,disabled:m.isPending,children:e.jsx(s,{message:"Save"})})]})]})}function fe({localization:a}){const{trans:o}=b(),{formId:t,close:i}=x(),r=D({defaultValues:{id:a.id,name:a.name,language:a.language}}),m=I(),n=G(r);return e.jsxs(S,{children:[e.jsx(v,{children:e.jsx(s,{message:"Update localization"})}),e.jsx(w,{children:e.jsxs(z,{form:r,id:t,onSubmit:l=>{n.mutate(l,{onSuccess:i})},children:[e.jsx(T,{name:"name",label:e.jsx(s,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(L,{required:!0,name:"language",label:e.jsx(s,{message:"Language"}),selectionMode:"single",showSearchField:!0,searchPlaceholder:o(u("Search languages")),children:m.map(l=>e.jsx(d,{value:l.code,children:l.name},l.code))})]})}),e.jsxs(P,{children:[e.jsx(c,{onClick:i,children:e.jsx(s,{message:"Cancel"})}),e.jsx(c,{variant:"flat",color:"primary",type:"submit",form:t,disabled:n.isPending,children:e.jsx(s,{message:"Save"})})]})]})}const ye=[{key:"name",allowsSorting:!0,sortingKey:"name",visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(s,{message:"Name"}),body:a=>a.name},{key:"language",allowsSorting:!0,sortingKey:"language",header:()=>e.jsx(s,{message:"Language code"}),body:a=>a.language},{key:"updatedAt",allowsSorting:!0,width:"w-100",header:()=>e.jsx(s,{message:"Last updated"}),body:a=>e.jsx(ne,{date:a.updated_at})},{key:"actions",header:()=>e.jsx(s,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-84 flex-shrink-0",visibleInMode:"all",body:a=>e.jsxs("div",{className:"text-muted",children:[e.jsx(H,{label:e.jsx(s,{message:"Translate"}),children:e.jsx(F,{size:"md",elementType:C,to:`${a.id}/translate`,children:e.jsx(W,{})})}),e.jsx(re,{children:e.jsx(be,{locale:a})})]})}];function Ma(){const[a,o]=A.useState([]),{searchParams:t,sortDescriptor:i,mergeIntoSearchParams:r,setSearchQuery:m,isFiltering:n}=O(E),l=_(p.localizations.index(t)),M=e.jsxs(j,{type:"modal",children:[e.jsx(c,{variant:"flat",color:"danger",children:e.jsx(s,{message:"Delete"})}),e.jsx(De,{selectedIds:a,onDelete:()=>o([])})]}),q=e.jsxs(j,{type:"modal",children:[e.jsx(ge,{children:e.jsx(s,{message:"Add new localization"})}),e.jsx(he,{})]});return e.jsxs(ae,{children:[e.jsx(X,{query:l}),e.jsx(se,{title:e.jsx(s,{message:"Localizations"}),showSidebarToggleButton:!0,rightContent:e.jsx($,{variant:"button",link:V.pages.translations,size:"xs"})}),e.jsxs(te,{children:[e.jsx(Y,{searchValue:t.query,onSearchChange:m,actions:q,selectedItems:a,selectedActions:M}),e.jsxs(oe,{children:[e.jsx(ie,{columns:ye,data:l.items,sortDescriptor:i,onSortChange:r,enableSelection:!0,selectedRows:a,onSelectionChange:o,cellHeight:"h-60"}),l.isEmpty&&e.jsx(Z,{isFiltering:n,image:pe,title:e.jsx(s,{message:"No localizations have been created yet"}),filteringTitle:e.jsx(s,{message:"No matching localizations"})}),e.jsx(ee,{query:l,onPageChange:g=>r({page:g}),onPerPageChange:g=>r({perPage:g})})]})]})]})}function be({locale:a}){const o=J();return e.jsxs(B,{children:[e.jsx(F,{disabled:o.isPending,children:e.jsx(le,{})}),e.jsxs(K,{children:[e.jsx(d,{value:"translate",elementType:C,to:`${a.id}/translate`,children:e.jsx(s,{message:"Translate"})}),e.jsx(d,{value:"rename",onSelected:()=>R(fe,{localization:a}),children:e.jsx(s,{message:"Rename"})}),e.jsx(d,{value:"download",onSelected:()=>de(`api/v1/localizations/${a.id}/download`),children:e.jsx(s,{message:"Download"})}),e.jsx(d,{value:"upload",onSelected:async()=>{const t=await ue({types:[ce.json]});t.length==1&&o.mutate({localeId:a.id,file:t[0]})},children:e.jsx(s,{message:"Upload"})})]})]})}function De({selectedIds:a,onDelete:o}){const{close:t}=x(),i=h({mutationFn:()=>y.delete(`localizations/${a.join(",")}`),onSuccess:async()=>{await Q.invalidateQueries({queryKey:p.localizations.invalidateKey}),f(u("Localizations deleted")),o(),t()},onError:r=>N(r)});return e.jsx(me,{isDanger:!0,isLoading:i.isPending,title:e.jsx(s,{message:"Delete localizations"}),body:e.jsx(s,{message:"Are you sure you want to delete selected localizations?",values:{count:a.length}}),confirm:e.jsx(s,{message:"Delete"}),onConfirm:()=>i.mutate()})}export{Ma as Component,De as DeleteLocalizationsDialog};
