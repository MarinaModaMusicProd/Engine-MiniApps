import{j as e,v as c,T as a,W as f,J as r,r as l,a6 as w,bx as y,ab as C,D as S,t as P,$ as T,G as k,H as v,b as F,aa as E,I as L}from"./main-BEfQELxr.js";import{a as A}from"./admin-config-BaCrw7Kt.js";import{N as I}from"./name-with-avatar-FJqara4g.js";import{L as B}from"./external-link-CT1zJoZ3.js";import{F as H}from"./formatted-date-B-08Y9yP.js";import{E as M}from"./Edit-gh_pXqg9.js";import{D as N}from"./settings-links-BagG4yO6.js";import{d as u,F as x,u as q,a as U,G as _,D as O,b as R,c as W}from"./use-datatable-query-DPUO64j4.js";import{D as Q}from"./data-table-add-item-button-BdngBic4.js";import{D as $}from"./datatable-filters-D7Kso37P.js";import{a as G,D as V,b as z,c as K}from"./datatable-page-with-header-layout-DgFKm91D.js";import{T as J}from"./table-Bdp6S_DF.js";import{C as X}from"./confirmation-dialog-CYwhNB58.js";import{U as Y}from"./user-D6GCMJ6c.js";import{c as Z,u as ee}from"./timestamp-filters-CuVT9z9n.js";import"./Album-CXNrxcWI.js";import"./Comment-TqhRbk6J.js";import"./FileUpload-DPKPUe4e.js";import"./Mic-cPqrQSx8.js";import"./PlaylistPlay-jDnYmdDX.js";import"./QueueMusic-C8vaKlwp.js";import"./Sell-DvbBmLb2.js";import"./use-date-formatter-BKDPf1lG.js";import"./DateFormatter-Dix9bfnP.js";import"./FilterAlt-Cy68O-Jt.js";import"./form-normalized-model-chip-field-4XjViKi1.js";import"./use-normalized-models-ChKc2G_X.js";import"./form-chip-field-82C9gJw-.js";import"./input-BypPJ39K.js";import"./chip-list-CnaxlPJ9.js";import"./accordion-CpkAY-cS.js";import"./checkbox-C191zCCH.js";import"./CheckBoxOutlineBlank-B_WkUAPG.js";import"./ArrowRightAlt-CIybcFtZ.js";import"./DateRange-DXC1xWJJ.js";import"./use-base-date-picker-state-C8djIY4i.js";import"./KeyboardArrowRight-BVstfQVU.js";import"./use-date-range-picker-state-CLLDtAYm.js";import"./list-C_muhLNE.js";import"./switch-kVp777pB.js";import"./dialog-footer-DZFPEWVp.js";import"./is-tablet-media-query-BWKVDwFI.js";import"./use-current-date-time-Bg8tRM7A.js";import"./select-DvPFHFsY.js";import"./combobox-end-adornment-B98K5MYg.js";import"./normalized-model-field-AJN-ee7u.js";import"./skeleton-IvCa_cqw.js";import"./Add-Cqjx6ezR.js";import"./dashboard-layout-context-Ors6hOMs.js";import"./use-toggle-dashboard-left-sidebar-BNAUqBUz.js";import"./ArrowDownward-i0hV0JR6.js";import"./useInteractOutside-Iqh6soAi.js";import"./useEffectEvent-TynbBUG3.js";import"./is-ctrl-or-shift-pressed-CMgU9cG9.js";import"./use-pointer-events-CdAPueCj.js";import"./useGlobalListeners-BF1tAQIT.js";import"./formatted-number-ChBvIyPq.js";const te=[{key:"slug",allowsSorting:!0,width:"flex-2 min-w-200",visibleInMode:"all",header:()=>e.jsx(a,{message:"Slug"}),body:t=>e.jsx(c,{target:"_blank",to:`/pages/${t.slug}`,className:B,children:t.slug})},{key:"user_id",allowsSorting:!0,width:"flex-2 min-w-140",header:()=>e.jsx(a,{message:"Owner"}),body:t=>t.user&&e.jsx(I,{image:t.user.image,label:t.user.name,description:t.user.email,avatarCircle:!0})},{key:"type",maxWidth:"max-w-100",header:()=>e.jsx(a,{message:"Type"}),body:t=>e.jsx(a,{message:t.type})},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(a,{message:"Last updated"}),body:t=>e.jsx(H,{date:t.updated_at})},{key:"actions",header:()=>e.jsx(a,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-84 flex-shrink-0",visibleInMode:"all",body:t=>e.jsx(f,{size:"md",className:"text-muted",elementType:c,to:`${t.id}/edit`,children:e.jsx(M,{})})}],ae=""+new URL("articles-sEigaVBk.svg",import.meta.url).href,se=t=>{const o=t.customPages.types.length>1?[{control:{type:x.Select,defaultValue:"default",options:t.customPages.types.map(s=>({value:s.type,label:s.label,key:s.type}))},key:"type",label:r("Type"),description:r("Type of the page"),defaultOperator:u.eq}]:[];return[{key:"user_id",label:r("User"),description:r("User page was created by"),defaultOperator:u.eq,control:{type:x.SelectModel,model:Y}},...o,Z({description:r("Date page was created")}),ee({description:r("Date page was last updated")})]};function nt(){const t=l.useContext(w),[o,s]=l.useState([]),{searchParams:i,sortDescriptor:m,mergeIntoSearchParams:p,setSearchQuery:h,isFiltering:b}=q(C),g=l.useMemo(()=>se(t),[t]),n=U({...y.customPages.index({...i})}),j=e.jsxs(S,{type:"modal",children:[e.jsx(P,{variant:"flat",color:"danger",children:e.jsx(a,{message:"Delete"})}),e.jsx(oe,{selectedIds:o,onDelete:()=>s([])})]}),D=e.jsx(l.Fragment,{children:e.jsx(Q,{elementType:c,to:"new",children:e.jsx(a,{message:"New page"})})});return e.jsxs(G,{children:[e.jsx(_,{query:n}),e.jsx(V,{title:e.jsx(a,{message:"Custom pages"}),showSidebarToggleButton:!0,rightContent:e.jsx(N,{variant:"button",link:A.pages.customPages,size:"xs"})}),e.jsxs(z,{children:[e.jsx(O,{searchValue:i.query,onSearchChange:h,actions:D,selectedItems:o,selectedActions:j,filters:g}),e.jsx($,{filters:g}),e.jsxs(K,{children:[e.jsx(J,{columns:te,data:n.items,sortDescriptor:m,onSortChange:p,enableSelection:!0,selectedRows:o,onSelectionChange:s}),n.isEmpty&&e.jsx(R,{isFiltering:b,image:ae,title:e.jsx(a,{message:"No pages have been created yet"}),filteringTitle:e.jsx(a,{message:"No matching pages"})}),e.jsx(W,{query:n,onPageChange:d=>p({page:d}),onPerPageChange:d=>p({perPage:d})})]})]})]})}function oe({selectedIds:t,onDelete:o}){const{close:s}=T(),i=k({mutationFn:()=>F.delete(`custom-pages/${t.join(",")}`).then(m=>m.data),onSuccess:()=>{E.invalidateQueries({queryKey:y.customPages.invalidateKey}),L(r("Pages deleted")),o(),s()},onError:m=>v(m)});return e.jsx(X,{isLoading:i.isPending,onConfirm:()=>i.mutate(),title:e.jsx(a,{message:"Delete pages"}),body:e.jsx(a,{message:"Are you sure you want to delete selected pages?"}),confirm:e.jsx(a,{message:"Delete"})})}export{nt as Component};
