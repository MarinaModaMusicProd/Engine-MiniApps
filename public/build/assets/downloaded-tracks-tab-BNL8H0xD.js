import{z as T,e as I,r as a,j as r,ar as k,J as w,ao as S,T as x}from"./main-BEfQELxr.js";import{o as f}from"./offline-media-items-DO4Xib0S.js";import{M as N}from"./media-page-no-results-message-CNvquotm.js";import{q,P as M}from"./share-media-button-C9oFSM6L.js";import{V as P}from"./virtual-table-body-B6t11kqm.js";import{T as A}from"./track-table-BzIUEBZK.js";import{u as v}from"./use-filter-BH-sSEP9.js";import"./extension-from-filename-O0XMuZye.js";import"./play-arrow-filled-Bd3mp8QD.js";import"./use-player-store-B0Tt1GmI.js";import"./is-ctrl-or-shift-pressed-CMgU9cG9.js";import"./middleware-BLXTWOs6.js";import"./traditional-D9TTECMQ.js";import"./Pause-BRJy77mF.js";import"./create-playlist-dialog-BfNYpT-L.js";import"./image-selector-D_1V7xO8.js";import"./file-upload-provider-eR3r-15c.js";import"./uploaded-file-DYvUNPPs.js";import"./pretty-bytes-bO14ePu9.js";import"./use-active-upload-nc09ZUBt.js";import"./open-upload-window-B2GQndIr.js";import"./AddAPhoto-CZHH8SXN.js";import"./file-input-config-DrcTpI3-.js";import"./switch-kVp777pB.js";import"./Image-DEFAf6mh.js";import"./dialog-footer-DZFPEWVp.js";import"./use-auth-click-capture-BYdy-0wK.js";import"./Add-Cqjx6ezR.js";import"./KeyboardArrowRight-BVstfQVU.js";import"./FavoriteBorder-CFF5lN5d.js";import"./use-previous-C8UpiCgw.js";import"./album-image-sKMZR621.js";import"./Album-CXNrxcWI.js";import"./album-link-6XmWl295.js";import"./small-artist-image-CgkHpn0Q.js";import"./Mic-cPqrQSx8.js";import"./artist-link-fBSSBvhd.js";import"./playlist-image-CVgZeVzU.js";import"./PlaylistPlay-jDnYmdDX.js";import"./playlist-link-BuIn8fqZ.js";import"./share-media-buttons-LsRpAgAp.js";import"./Share-CwHQAfaU.js";import"./track-image-DjYnH9n0.js";import"./MusicNote-D6buyZMC.js";import"./track-link-C79i7Oi0.js";import"./tabs-QG1LNIzu.js";import"./tab-panels-DmVy49av.js";import"./use-clipboard-C55rQ_RF.js";import"./infinite-scroll-sentinel-CMv-6kYI.js";import"./table-Bdp6S_DF.js";import"./checkbox-C191zCCH.js";import"./CheckBoxOutlineBlank-B_WkUAPG.js";import"./skeleton-IvCa_cqw.js";import"./ArrowDownward-i0hV0JR6.js";import"./useInteractOutside-Iqh6soAi.js";import"./useEffectEvent-TynbBUG3.js";import"./use-pointer-events-CdAPueCj.js";import"./useGlobalListeners-BF1tAQIT.js";import"./getScrollParent--OCc5gFh.js";import"./index-BesylHmI.js";import"./track-context-dialog-B8siridC.js";import"./add-to-queue-menu-button-xRsy1m89.js";import"./artist-links-CJ-I-YoG.js";import"./toggle-in-library-menu-button-DeSIBdG_.js";import"./toggle-repost-menu-button-DQ7TGSVf.js";import"./use-should-show-radio-button-D61M8rRZ.js";import"./use-track-permissions-BH8RwNVs.js";import"./confirmation-dialog-CYwhNB58.js";import"./download-file-from-url-BVaKcxRP.js";import"./entitiy-offline-indicator-icon-CUcYL0oT.js";import"./check-circle-filled-DrCIo0X8.js";import"./like-icon-button-BVGCt62o.js";import"./MoreHoriz-B7xw7d55.js";import"./MoreVert-Dq4kJhtz.js";import"./formatted-duration-Dqg2KYhd.js";import"./use-current-date-time-Bg8tRM7A.js";import"./Schedule-DYoblKcK.js";import"./TrendingUp-CQH53zcx.js";function ir(){const{trans:i}=T(),{user:g}=I(),[p,y]=a.useState(!0),[s,j]=a.useState(""),h=q(g,"libraryDownloadedTracks"),[d,c]=a.useState([]);a.useEffect(()=>{if(!p)return;f.getAllDownloadedTracks().then(e=>{c(e.map(t=>t.data))}).finally(()=>{y(!1)});const o=f.listen("onItemUpdated",e=>{c(t=>{const u=t.findIndex(b=>b.id===e.id);return u!==-1?t[u]=e.data:t.push(e.data),[...t]})}),l=f.listen("onItemDeleted",e=>{c(t=>t.filter(u=>u.id!==e.id))});return()=>{o(),l()}},[p]);const{contains:n}=v({sensitivity:"base"}),m=a.useMemo(()=>d.filter(o=>{var l,e;return n(o.name,s)||((l=o.artists)==null?void 0:l.some(t=>t.name&&n(t.name,s)))||((e=o.album)==null?void 0:e.name)&&n(o.album.name,s)}),[d,s,n]);return r.jsxs("div",{className:"mt-24",children:[r.jsxs("div",{className:"mb-24 flex items-center justify-between gap-24",children:[r.jsx(M,{queueId:h,buttonType:"text",className:"min-w-128 flex-shrink-0",tracks:m}),r.jsx(k,{value:s,onChange:o=>j(o.target.value),className:"max-w-512 flex-auto",size:"sm",startAdornment:r.jsx(S,{}),placeholder:i(w("Search within tracks"))})]}),!m.length&&!p?r.jsx(B,{isFiltering:m.length!==d.length}):r.jsx(A,{queueGroupId:h,tracks:p?D():m,tableBody:r.jsx(P,{query:null,totalItems:m.length})})]})}function B({isFiltering:i}){return r.jsx(N,{className:"mt-34",description:i?r.jsx(x,{message:"Try another search query or different filters."}):r.jsx(x,{message:"You have not downloaded any songs yet."})})}function D(){return[...new Array(3).keys()].map(i=>({isPlaceholder:!0,id:`placeholder-${i}`}))}export{ir as Component};
