import{z as j,ae as y,q as A,G as v,ag as C,I as E,J as N,aa as k,b as q,M as I,j as t,au as P,T as d,N as _,at as l}from"./main-BEfQELxr.js";import{C as F}from"./crupdate-artist-form-D8Uk13xW.js";import{g as c}from"./artist-link-fBSSBvhd.js";import{D as Q}from"./paginated-resources-CNSIt8ps.js";import{u as B}from"./use-artist-permissions-CHoRWnjI.js";import{C as D}from"./crupdate-resource-layout-kU3RGGgA.js";import{u as f}from"./use-required-params-biXhH1lK.js";import{u as g}from"./useSuspenseQuery-CLDVgKJu.js";import{B as x,a as o}from"./breadcrumb-BEqwPK9x.js";import"./music-Bh2SQVZ2.js";import"./album-image-sKMZR621.js";import"./Album-CXNrxcWI.js";import"./album-link-6XmWl295.js";import"./use-delete-album-DEYa43GE.js";import"./table-Bdp6S_DF.js";import"./checkbox-C191zCCH.js";import"./CheckBoxOutlineBlank-B_WkUAPG.js";import"./skeleton-IvCa_cqw.js";import"./ArrowDownward-i0hV0JR6.js";import"./useInteractOutside-Iqh6soAi.js";import"./useEffectEvent-TynbBUG3.js";import"./is-ctrl-or-shift-pressed-CMgU9cG9.js";import"./use-pointer-events-CdAPueCj.js";import"./useGlobalListeners-BF1tAQIT.js";import"./use-sortable-table-data-CTahzIRp.js";import"./sort-array-of-objects-Oyr6J2gK.js";import"./formatted-date-B-08Y9yP.js";import"./use-date-formatter-BKDPf1lG.js";import"./DateFormatter-Dix9bfnP.js";import"./formatted-number-ChBvIyPq.js";import"./Add-Cqjx6ezR.js";import"./Edit-gh_pXqg9.js";import"./confirmation-dialog-CYwhNB58.js";import"./dialog-footer-DZFPEWVp.js";import"./info-dialog-trigger-icon-CxWqq-uN.js";import"./profile-links-form-D8JPxzCN.js";import"./genre-B_3ZyEC1.js";import"./form-normalized-model-chip-field-4XjViKi1.js";import"./use-normalized-models-ChKc2G_X.js";import"./form-chip-field-82C9gJw-.js";import"./input-BypPJ39K.js";import"./chip-list-CnaxlPJ9.js";import"./image-selector-D_1V7xO8.js";import"./file-upload-provider-eR3r-15c.js";import"./uploaded-file-DYvUNPPs.js";import"./extension-from-filename-O0XMuZye.js";import"./pretty-bytes-bO14ePu9.js";import"./traditional-D9TTECMQ.js";import"./use-active-upload-nc09ZUBt.js";import"./open-upload-window-B2GQndIr.js";import"./AddAPhoto-CZHH8SXN.js";import"./file-input-config-DrcTpI3-.js";import"./switch-kVp777pB.js";import"./tabs-QG1LNIzu.js";import"./tab-panels-DmVy49av.js";import"./datatable-page-with-header-layout-DgFKm91D.js";import"./dashboard-layout-context-Ors6hOMs.js";import"./use-toggle-dashboard-left-sidebar-BNAUqBUz.js";import"./ChevronRight-BB23vmSu.js";import"./MoreHoriz-B7xw7d55.js";const L=i=>`artists/${i}`;function S(i){const{trans:s}=j(),e=y(),{pathname:m}=A();return v({mutationFn:a=>w(a),onSuccess:a=>{E(s(N("Artist updated"))),k.invalidateQueries({queryKey:Q("artists")}),m.includes("admin")?e("/admin/artists"):e(c(a.artist))},onError:a=>C(a,i)})}function w({id:i,...s}){return q.put(L(i),s).then(e=>e.data)}function z({showExternalFields:i=!0,breadcrumbs:s,navbar:e}){var u;const{artistId:m}=f(["artistId"]),a=g(l.artists.show(m).artist("editArtistPage")),r=a.data.artist,{canEdit:b}=B(r),p=I({defaultValues:{id:r.id,name:r.name,verified:r.verified,spotify_id:r.spotify_id,genres:r.genres,image_small:r.image_small,links:r.links,profile:r.profile,profile_images:r.profile_images,disabled:r.disabled}}),n=S(p);return b?t.jsx(D,{form:p,onSubmit:h=>{n.mutate(h)},navbar:e,title:s??t.jsxs(x,{size:"xl",children:[t.jsx(o,{to:"/admin/artists",children:t.jsx(d,{message:"Artists"})}),t.jsx(o,{children:r.name})]}),isLoading:n.isPending,disableSaveWhenNotDirty:!0,children:t.jsx(F,{albums:(u=a.data.albums)==null?void 0:u.data,showExternalFields:i})}):t.jsx(P,{to:"/",replace:!0})}function Jt(){const{artistId:i}=f(["artistId"]),s=g(l.artists.show(i).artist("editArtistPage"));return t.jsx("div",{className:"h-screen",children:t.jsx(z,{showExternalFields:!1,navbar:t.jsx(_,{className:"flex-shrink-0",color:"bg",darkModeColor:"bg"}),breadcrumbs:t.jsxs(x,{size:"xl",children:[t.jsx(o,{to:c(s.data.artist),children:s.data.artist.name}),t.jsx(o,{children:t.jsx(d,{message:"Edit"})})]})})})}export{Jt as BackstageUpdateArtistPage,z as Component};
