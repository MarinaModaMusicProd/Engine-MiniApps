import{r as f,u as N,j as s,d as p,aw as P,co as w,a9 as C}from"./main-BEfQELxr.js";import{A as I}from"./album-image-sKMZR621.js";import{A as L}from"./album-link-6XmWl295.js";import{u as q}from"./use-album-permissions-B3fFfLlx.js";import{A as z}from"./artist-links-CJ-I-YoG.js";import{G as F}from"./genre-link-CzCNmJwP.js";import{q as T,P as _,a as R}from"./share-media-button-C9oFSM6L.js";import{W,a as B}from"./track-list-item-DRLzOJL1.js";import{P as G}from"./play-arrow-filled-Bd3mp8QD.js";import{C as S,T as E}from"./comment-bar-new-comment-form-CF3mhZxo.js";import{T as M}from"./track-image-DjYnH9n0.js";import{t as U}from"./track-context-dialog-B8siridC.js";import{u as Q,b as D}from"./use-player-store-B0Tt1GmI.js";import{F as J}from"./formatted-number-ChBvIyPq.js";import{R as K}from"./Repeat-DvTTdzvg.js";const ns=f.memo(({album:e,reposter:i,className:c,hideArtwork:n,hideActions:o,linksInNewTab:a,maxHeight:m})=>{var j;const v=T(e),{player:d}=N(),{managesAlbum:g}=q(e),l=(e==null?void 0:e.tracks)||[],x=Q(t=>t.cuedMedia),r=l.find(t=>t.id===(x==null?void 0:x.meta.id))||l[0],k=(d==null?void 0:d.seekbar_type)==="waveform"&&U(r);return s.jsxs("div",{className:p("overflow-hidden",!n&&"md:flex md:gap-24",c,m),children:[!n&&s.jsx(I,{album:e,className:"flex-shrink-0 rounded max-md:hidden",size:"w-184 h-184"}),s.jsxs("div",{className:p("min-w-0 flex-auto",m&&"flex h-full flex-col"),children:[s.jsxs("div",{className:"flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-14",children:[s.jsx(_,{queueId:v,track:r,tracks:e.tracks,buttonType:"icon",color:"primary",variant:"flat",radius:"rounded-full",equalizerColor:"white"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted",children:[s.jsx(z,{artists:e.artists,target:a?"_blank":void 0}),i&&s.jsxs(f.Fragment,{children:[s.jsx(K,{size:"xs"}),s.jsx(P,{user:i,target:a?"_blank":void 0})]})]}),s.jsx("div",{children:s.jsx(L,{album:e,target:a?"_blank":void 0})})]}),s.jsxs("div",{className:"ml-auto text-sm",children:[s.jsx(w,{date:e.created_at}),(j=e.genres)!=null&&j.length?s.jsx(C,{className:"mt-6 w-max",size:"xs",children:s.jsx(F,{genre:e.genres[0],target:a?"_blank":void 0})}):null]})]}),r&&s.jsx("div",{className:"my-20",children:k?s.jsx(S,{disableCommenting:o,children:s.jsx(W,{track:r,queue:e.tracks})}):s.jsx(B,{track:r,queue:e.tracks})})]}),s.jsx("div",{className:"flex-auto overflow-y-auto",children:l.map((t,u)=>{var h;const y=u-1===((h=e.tracks)==null?void 0:h.length),A=(r==null?void 0:r.id)===t.id;return s.jsx(O,{track:t,album:e,index:u,isLast:y,isActive:A},t.id)})}),!o&&s.jsx(E,{className:"mt-20",item:e,managesItem:g})]})]},e.id)});function O({track:e,index:i,isLast:c,isActive:n,album:o}){const a=D();return s.jsxs("div",{className:p("flex cursor-pointer items-center gap-8 p-8 text-[13px] hover:bg-hover",!c&&"border-b",n&&"text-primary"),onClick:async()=>{var m;(m=o.tracks)!=null&&m.length&&a.overrideQueueAndPlay(await R(o.tracks),i)},children:[s.jsx(M,{track:e,size:"w-20 h-20",className:"rounded"}),s.jsx("div",{children:i+1}),s.jsx("div",{className:"mx-10 flex-auto",children:e.name}),e.plays&&e.plays>0?s.jsxs(f.Fragment,{children:[s.jsx(G,{size:"xs",className:"ml-auto text-muted"}),s.jsx("div",{className:"text-muted",children:s.jsx(J,{value:e.plays})})]}):null]},e.id)}export{ns as A};
