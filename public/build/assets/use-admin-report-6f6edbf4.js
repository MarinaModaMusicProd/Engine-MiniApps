import{r as n,j as s,ac as C,aN as g,a1 as T,a2 as A,T as i,bz as F,M as z,n as f,q as j,t as D,k as I,l as k,m as P}from"./main-ad2abfa3.js";import{T as S}from"./TrendingUp-b54ad5fa.js";import{f as V,C as r,B as E,L as R,P as B,G as M}from"./geo-chart-eadb8cc8.js";import{F as x}from"./theme-value-to-hex-dbcdc97d.js";const q=n.memo(({bytes:e})=>s.jsx(n.Fragment,{children:C(e)})),G=g(s.jsx("path",{d:"m16 18 2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6h-6z"}),"TrendingDownOutlined");function H({data:e,direction:t="vertical",individualBarColors:a=!1,className:l,...N}){const{localeCode:d}=T(),w=n.useMemo(()=>{const o=V(e,{localeCode:d});return o.datasets=o.datasets.map((y,u)=>({...y,backgroundColor:a?r.map(m=>m[1]):r[u][1],borderColor:a?r.map(m=>m[0]):r[u][0],borderWidth:2})),o},[e,d,a]),c=t==="horizontal",b=n.useMemo(()=>({indexAxis:c?"y":"x",parsing:{xAxisKey:c?"value":"label",yAxisKey:c?"label":"value"}}),[c]);return s.jsx(E,{type:"bar",className:A(l,"min-w-500"),data:w,options:b,...N})}const v="gap-12 md:gap-16 mb-12 md:mb-16",h=`flex flex-col md:flex-row md:items-center overflow-x-auto ${v}`;function Y({report:e,isLoading:t}){const a=e==null?void 0:e.pageViews.total;return s.jsxs(n.Fragment,{children:[s.jsxs("div",{className:h,children:[s.jsx(R,{isLoading:t,className:"flex-auto",data:e==null?void 0:e.pageViews,title:s.jsx(i,{message:"Pageviews"}),description:a?s.jsx(i,{message:":count total views",values:{count:s.jsx(x,{value:a})}}):null}),s.jsx(B,{isLoading:t,data:e==null?void 0:e.devices,title:s.jsx(i,{message:"Top devices"})})]}),s.jsxs("div",{className:h,children:[s.jsx(H,{isLoading:t,data:e==null?void 0:e.browsers,className:"flex-auto md:w-1/3",direction:"horizontal",individualBarColors:!0,hideLegend:!0,title:s.jsx(i,{message:"Top browsers"})}),s.jsx(M,{isLoading:t,className:"flex-auto",data:e==null?void 0:e.locations,title:s.jsx(i,{message:"Top locations"})})]})]})}const K=g(s.jsx("path",{d:"m22 12-4-4v3H3v2h15v3l4-4z"}),"TrendingFlatOutlined");function _({report:e,isLoading:t}){return s.jsx("div",{className:`flex h-[97px] flex-shrink-0 items-center overflow-x-auto ${v}`,children:e==null?void 0:e.map(a=>s.jsx(L,{datum:a,isLoading:t},a.name))})}function L({datum:e,isLoading:t=!1}){let a;if(n.isValidElement(e.icon))a=n.cloneElement(e.icon,{size:"lg"});else{const l=F(e.icon);a=s.jsx(l,{size:"lg"})}return s.jsxs("div",{className:"flex h-full flex-auto items-center gap-18 whitespace-nowrap rounded-panel border p-20",children:[s.jsx("div",{className:"flex-shrink-0 rounded-lg bg-primary-light/20 p-10 text-primary",children:a}),s.jsxs("div",{className:"flex-auto",children:[s.jsx("div",{className:"flex items-center justify-between gap-20",children:s.jsx("div",{className:"text-lg font-bold text-main",children:s.jsx(z,{initial:!1,mode:"wait",children:t?s.jsx(f.div,{...j,children:s.jsx(D,{className:"min-w-24"})},"skeleton"):s.jsx(f.div,{...j,children:s.jsx(O,{datum:e})},"value")})})}),s.jsxs("div",{className:"flex items-center justify-between gap-20",children:[s.jsx("h2",{className:"text-sm text-muted",children:e.name}),(e.percentageChange!=null||e.previousValue!=null)&&s.jsx("div",{className:"flex items-center gap-10",children:s.jsx($,{datum:e})})]})]})]},e.name)}function O({datum:e}){switch(e.type){case"fileSize":return s.jsx(q,{bytes:e.currentValue});case"percentage":return s.jsx(x,{value:e.currentValue,style:"percent",maximumFractionDigits:1});default:return s.jsx(x,{value:e.currentValue})}}function $({datum:e}){const t=Q(e);let a;return t>0?a=s.jsx(S,{size:"md",className:"text-positive"}):t===0?a=s.jsx(K,{className:"text-muted"}):a=s.jsx(G,{className:"text-danger"}),s.jsxs(n.Fragment,{children:[a,s.jsxs("div",{className:"text-sm font-semibold text-muted",children:[t,"%"]})]})}function Q({percentageChange:e,previousValue:t,currentValue:a}){return e!=null||t==null||a==null?e??0:t===0?100:Math.round((a-t)/t*100)}const p="admin/reports";function ee(e={}){return I({queryKey:[p,e],queryFn:()=>U(e),placeholderData:k})}function U({types:e,dateRange:t}){const a={};return e&&(a.types=e.join(",")),t&&(a.startDate=t.start.toAbsoluteString(),a.endDate=t.end.toAbsoluteString(),a.timezone=t.start.timeZone),P.get(p,{params:a}).then(l=>l.data)}export{_ as A,q as F,G as T,Y as V,K as a,ee as u};
//# sourceMappingURL=use-admin-report-6f6edbf4.js.map
