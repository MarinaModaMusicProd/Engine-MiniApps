import{j as t,X as d,T as e,N as j,ae as h,q as v,M as C,r as N}from"./main-BEfQELxr.js";import{u as A,A as P}from"./use-create-album-k8yNEMKL.js";import{g as I}from"./album-link-6XmWl295.js";import{C as k}from"./crupdate-resource-layout-kU3RGGgA.js";import{u as F}from"./normalized-model-field-AJN-ee7u.js";import{F as S,u as B}from"./file-upload-provider-eR3r-15c.js";import{B as c,a as i}from"./breadcrumb-BEqwPK9x.js";import{u as w}from"./use-current-date-time-Bg8tRM7A.js";import"./FileUpload-DPKPUe4e.js";import"./Add-Cqjx6ezR.js";import"./DragHandle-nDiL0duR.js";import"./Edit-gh_pXqg9.js";import"./track-form-DaFc8iaY.js";import"./paginated-resources-CNSIt8ps.js";import"./image-selector-D_1V7xO8.js";import"./use-active-upload-nc09ZUBt.js";import"./open-upload-window-B2GQndIr.js";import"./uploaded-file-DYvUNPPs.js";import"./extension-from-filename-O0XMuZye.js";import"./AddAPhoto-CZHH8SXN.js";import"./file-input-config-DrcTpI3-.js";import"./pretty-bytes-bO14ePu9.js";import"./generate-waveform-data-BFwf5N3g.js";import"./form-chip-field-82C9gJw-.js";import"./input-BypPJ39K.js";import"./chip-list-CnaxlPJ9.js";import"./genre-B_3ZyEC1.js";import"./form-normalized-model-chip-field-4XjViKi1.js";import"./use-normalized-models-ChKc2G_X.js";import"./formatted-duration-Dqg2KYhd.js";import"./use-update-track-form--unhyqKC.js";import"./dialog-footer-DZFPEWVp.js";import"./confirmation-dialog-CYwhNB58.js";import"./music-Bh2SQVZ2.js";import"./use-create-track-form-DVM9TCgc.js";import"./drag-preview-CUlfnP8k.js";import"./use-sortable-CXyvsr-E.js";import"./getScrollParent--OCc5gFh.js";import"./useGlobalListeners-BF1tAQIT.js";import"./date-picker-BHCsGJUh.js";import"./use-date-formatter-BKDPf1lG.js";import"./DateFormatter-Dix9bfnP.js";import"./DateRange-DXC1xWJJ.js";import"./use-base-date-picker-state-C8djIY4i.js";import"./KeyboardArrowRight-BVstfQVU.js";import"./datatable-page-with-header-layout-DgFKm91D.js";import"./dashboard-layout-context-Ors6hOMs.js";import"./use-toggle-dashboard-left-sidebar-BNAUqBUz.js";import"./select-DvPFHFsY.js";import"./combobox-end-adornment-B98K5MYg.js";import"./skeleton-IvCa_cqw.js";import"./traditional-D9TTECMQ.js";import"./useEffectEvent-TynbBUG3.js";import"./ChevronRight-BB23vmSu.js";import"./MoreHoriz-B7xw7d55.js";function z({breadcrumbs:r,navbar:m}){return t.jsx(S,{children:t.jsx(E,{breadcrumbs:r,navbar:m})})}function E({breadcrumbs:r,navbar:m}){const x=!!B(n=>n.activeUploadsCount),b=w(),a=h(),{pathname:g}=v(),[l]=d(),{data:p}=F(`normalized-models/artist/${l.get("artistId")}`,void 0,{enabled:!!l.get("artistId")}),s=p==null?void 0:p.model,o=C({defaultValues:{release_date:b.toAbsoluteString()}}),u=A(o);return N.useEffect(()=>{s&&o.reset({artists:[s]})},[s,o]),t.jsx(k,{form:o,onSubmit:n=>{u.mutate(n,{onSuccess:f=>{g.includes("admin")?a(s?`/admin/artists/${s.id}/edit`:"/admin/albums"):a(I(f.album))}})},title:r??t.jsxs(c,{size:"xl",children:[t.jsx(i,{to:"/admin/albums",children:t.jsx(e,{message:"Albums"})}),t.jsx(i,{children:t.jsx(e,{message:"New"})})]}),isLoading:u.isPending||x,disableSaveWhenNotDirty:!0,navbar:m,children:t.jsx(P,{showExternalIdFields:!0})})}function Mt(){const[r]=d();return t.jsx("div",{className:"h-screen",children:t.jsx(z,{navbar:t.jsx(j,{className:"flex-shrink-0",color:"bg",darkModeColor:"bg"}),breadcrumbs:t.jsxs(c,{size:"xl",children:[t.jsx(i,{to:`/backstage/artists/${r.get("artistId")}/edit`,children:t.jsx(e,{message:"Backstage"})}),t.jsx(i,{children:t.jsx(e,{message:"New album"})})]})})})}export{Mt as BackstageCreateAlbumPage,z as Component};
