import{a as g,b as j,c as v,j as e,d as i,L as w,C as y,K as S,r as d,e as h,D as N,f as D,T as I,B as A,h as L,i as z,U as k,k as T,O as f,l as K,E as C,m as E,s as _}from"./main-BEfQELxr.js";import{D as B,a as U}from"./dashboard-layout-DmMWayOh.js";import{D as F}from"./dashboard-sidenav-DLEjBFF7.js";import{S as M}from"./section-helper-BaiMamTr.js";import{I as R}from"./Info-ZOh_50La.js";import{A as q}from"./admin-config-BaCrw7Kt.js";import{D as H}from"./dashboard-layout-context-Ors6hOMs.js";import{u as O}from"./use-toggle-dashboard-left-sidebar-BNAUqBUz.js";import{K as Q}from"./KeyboardArrowRight-BVstfQVU.js";import{K as G}from"./KeyboardArrowUp-CS3Ftv43.js";import"./use-previous-C8UpiCgw.js";import"./Album-CXNrxcWI.js";import"./Comment-TqhRbk6J.js";import"./FileUpload-DPKPUe4e.js";import"./Mic-cPqrQSx8.js";import"./PlaylistPlay-jDnYmdDX.js";import"./QueueMusic-C8vaKlwp.js";import"./Sell-DvbBmLb2.js";function J(){return g({queryKey:["admin-site-alerts"],queryFn:()=>j.get("admin/site-alerts").then(t=>t.data)})}function P({className:t,isCompactMode:s=!1,matchDescendants:a,menuName:o,bottomContent:n,isOverlayMode:r,showToggleSidebarButton:l=!0,defaultIcons:c,customMenuRender:m}){const u=v();return e.jsxs("div",{className:i(t,"relative flex h-full w-full flex-col gap-20 overflow-y-auto overflow-x-hidden text-sm font-medium text-muted",r&&"border-r bg"),children:[e.jsxs("div",{className:i(s?"px-6 pt-6":"px-12 pt-24"),children:[e.jsx(w,{color:u?"light":"dark",logoType:s?"compact":"wide",className:s?"mx-auto mt-12":"mb-12 ml-10",size:s?"h-34 w-34":"h-36"}),l&&e.jsx(V,{})]}),e.jsx(y,{defaultIcons:c,matchDescendants:a,menu:o,orientation:"vertical",onlyShowIcons:s,iconSize:s?"md":"sm",gap:s?"gap-2":"gap-4",className:i("compact-scrollbar flex-auto overflow-y-auto overflow-x-hidden",s?"px-6":"px-12"),itemClassName:({isActive:x})=>b({isActive:x,isCompactMode:s}),children:m}),e.jsx("div",{className:i("mt-auto space-y-2 border-t pb-6 pt-16",s?"mx-auto px-6":"px-12"),children:n})]})}function V(){const{leftSidenavStatus:t,toggleLeftSidenav:s,isMobileMode:a}=O();return a?null:e.jsx("button",{className:i("fixed bottom-180 z-10 flex select-none appearance-none items-center justify-center rounded-full border bg align-middle outline-none transition-[left,color,shadow] duration-200 hover:text-primary focus-visible:ring",t==="open"?"left-[212px]":"left-48"),onClick:()=>s(),children:t==="open"?e.jsx(S,{size:"sm"}):e.jsx(Q,{size:"sm"})})}const W=d.forwardRef(({elementType:t="button",isCompact:s=!1,children:[a,o,...n],className:r,target:l,to:c,...m},u)=>{const x=t;return e.jsxs(x,{ref:u,...m,target:l,to:c,className:i(r,"flex",s?"gap-2":"gap-8",b({isActive:!1,isCompactMode:s})),children:[d.cloneElement(a,{size:s?"md":"sm"}),!s&&o,n]})});function b({isActive:t,isCompactMode:s}){return i("rounded-panel flex-shrink-0",s?"w-48 h-48 items-center justify-center":"w-full py-12 px-16 block justify-start",t?"bg-primary/6 text-primary font-semibold":"hover:bg-hover")}function X(t){const{isMobileMode:s,leftSidenavStatus:a}=d.useContext(H),o=!s&&a==="compact",n=e.jsxs(d.Fragment,{children:[e.jsx(Y,{isCompact:o}),e.jsx(Z,{isCompact:o})]});return e.jsx(P,{...t,defaultIcons:q,matchDescendants:r=>r==="/admin",menuName:"admin-sidebar",bottomContent:n,showToggleSidebarButton:!1})}function Y({isCompact:t}){const{user:s}=h(),a=!!(s!=null&&s.unread_notifications_count);return e.jsxs(N,{type:"popover",placement:"top",children:[e.jsxs(W,{isCompact:t,className:"relative",children:[e.jsx(D,{}),e.jsx(I,{message:"Notifications"}),a?e.jsx(A,{children:s==null?void 0:s.unread_notifications_count}):void 0]}),e.jsx(L,{settingsLink:null})]})}function Z({isCompact:t,avatar:s,accountSettingsLink:a}){const{user:o}=h();if(!o)return null;const n=s||k,r=e.jsx(n,{user:o,size:"w-32 h-32"});return e.jsx(z,{placement:"top",accountSettingsLink:a,children:t?e.jsx("button",{"aria-label":"toggle authentication menu",className:"flex h-48 w-48 items-center justify-center rounded-panel hover:bg-hover",children:r}):e.jsxs("button",{className:"flex w-full items-center rounded-panel px-12 py-8 hover:bg-hover",children:[r,e.jsx("span",{className:"ml-8 block min-w-0 overflow-x-hidden overflow-ellipsis whitespace-nowrap text-sm",children:o.name}),e.jsx(G,{size:"xs",className:"ml-auto block"})]})})}function ge(){const s=T().some(a=>{var o;return(o=a.handle)==null?void 0:o.customDashboardLayout});return e.jsxs(B,{name:"admin",leftSidenavCanBeCompact:!0,className:"dashboard-layout-with-spacing",children:[e.jsx(F,{position:"left",size:"sm",children:e.jsx(X,{})}),s?e.jsxs(e.Fragment,{children:[e.jsx(p,{}),e.jsx(f,{})]}):e.jsx(U,{isScrollable:!0,stableScrollbar:!1,children:e.jsxs("div",{className:"dashboard-rounded-panel",children:[e.jsx(p,{}),e.jsx(f,{})]})})]})}function p(){const{data:t}=J(),[s]=K("dismissed-site-alerts",[]),a=t==null?void 0:t.alerts.filter(o=>!(s!=null&&s.some(n=>n.id===o.id&&Date.now()-n.timestamp<864e5)));return a!=null&&a.length?e.jsx("div",{className:"fixed bottom-24 right-24 z-10 mx-auto flex w-[742px] max-w-[calc(100%-48px)] flex-col gap-12",children:a.map(o=>e.jsx($,{alert:o},o.id))}):null}function $({alert:t}){const s=e.jsx("div",{dangerouslySetInnerHTML:{__html:t.description}}),a=()=>{const n=E("dismissed-site-alerts")||[],r={id:t.id,timestamp:Date.now()},l=n.findIndex(c=>c.id===t.id);l===-1?n.push(r):n[l]=r,_("dismissed-site-alerts",n)},o=t.severity==="error"?e.jsx(C,{size:"xs",className:"text-danger"}):e.jsx(R,{size:"xs"});return e.jsx("div",{className:i("overflow-hidden rounded-panel bg shadow-lg"),children:e.jsx(M,{leadingIcon:o,onClose:()=>a(),title:t.title,description:s,color:t.severity==="error"?"danger":"neutral"},t.title)})}export{ge as Component};
