import{J as n,r as p,at as u,j as e,S as j,T as a,ab as y,D as c,t as b,W as D,$ as f,G as k,H as w,b as S,aa as T,I as C}from"./main-BEfQELxr.js";import{C as L,U as P}from"./update-lyric-dialog-BwsKR_sX.js";import{c as A,u as v}from"./timestamp-filters-CuVT9z9n.js";import{A as I}from"./album-link-6XmWl295.js";import{A as F}from"./artist-links-CJ-I-YoG.js";import{T as E}from"./track-image-DjYnH9n0.js";import{T as H}from"./track-link-C79i7Oi0.js";import{u as B,a as N,G as q,D as M,b as Q,c as _}from"./use-datatable-query-DPUO64j4.js";import{D as G}from"./data-table-add-item-button-BdngBic4.js";import{D as R}from"./datatable-filters-D7Kso37P.js";import{a as U,D as W,b as z,c as K}from"./datatable-page-with-header-layout-DgFKm91D.js";import{T as V}from"./table-Bdp6S_DF.js";import{F as $}from"./formatted-date-B-08Y9yP.js";import{E as J}from"./Edit-gh_pXqg9.js";import{C as X}from"./confirmation-dialog-CYwhNB58.js";import"./dialog-footer-DZFPEWVp.js";import"./paginated-resources-CNSIt8ps.js";import"./switch-kVp777pB.js";import"./normalized-model-field-AJN-ee7u.js";import"./use-normalized-models-ChKc2G_X.js";import"./select-DvPFHFsY.js";import"./combobox-end-adornment-B98K5MYg.js";import"./skeleton-IvCa_cqw.js";import"./use-date-range-picker-state-CLLDtAYm.js";import"./list-C_muhLNE.js";import"./use-date-formatter-BKDPf1lG.js";import"./DateFormatter-Dix9bfnP.js";import"./ArrowRightAlt-CIybcFtZ.js";import"./is-tablet-media-query-BWKVDwFI.js";import"./use-base-date-picker-state-C8djIY4i.js";import"./input-BypPJ39K.js";import"./KeyboardArrowRight-BVstfQVU.js";import"./use-current-date-time-Bg8tRM7A.js";import"./formatted-number-ChBvIyPq.js";import"./artist-link-fBSSBvhd.js";import"./MusicNote-D6buyZMC.js";import"./FilterAlt-Cy68O-Jt.js";import"./form-normalized-model-chip-field-4XjViKi1.js";import"./form-chip-field-82C9gJw-.js";import"./chip-list-CnaxlPJ9.js";import"./accordion-CpkAY-cS.js";import"./checkbox-C191zCCH.js";import"./CheckBoxOutlineBlank-B_WkUAPG.js";import"./DateRange-DXC1xWJJ.js";import"./Add-Cqjx6ezR.js";import"./dashboard-layout-context-Ors6hOMs.js";import"./use-toggle-dashboard-left-sidebar-BNAUqBUz.js";import"./ArrowDownward-i0hV0JR6.js";import"./useInteractOutside-Iqh6soAi.js";import"./useEffectEvent-TynbBUG3.js";import"./is-ctrl-or-shift-pressed-CMgU9cG9.js";import"./use-pointer-events-CdAPueCj.js";import"./useGlobalListeners-BF1tAQIT.js";const d=[A({description:n("Date lyric was created")}),v({description:n("Date lyric was last updated")})],O=""+new URL("source-code-BmXy6VbC.svg",import.meta.url).href,Y=[{key:"track_id",allowsSorting:!0,header:()=>e.jsx(a,{message:"Track"}),width:"flex-3 min-w-200",visibleInMode:"all",body:t=>{var s;return t.track?e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsx(E,{track:t.track,className:"flex-shrink-0 rounded",size:"w-34 h-34"}),e.jsxs("div",{children:[e.jsx(H,{track:t.track,target:"_blank"}),e.jsx(F,{className:"text-muted",artists:(s=t.track)==null?void 0:s.artists})]})]}):null}},{key:"album",width:"flex-2",header:()=>e.jsx(a,{message:"Album"}),body:t=>{var s;return(s=t.track)!=null&&s.album?e.jsx(I,{album:t.track.album}):null}},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(a,{message:"Last updated"}),body:t=>e.jsx($,{date:t.updated_at})},{key:"actions",header:()=>e.jsx(a,{message:"Actions"}),hideHeader:!0,align:"end",visibleInMode:"all",width:"w-42 flex-shrink-0",body:t=>e.jsxs(c,{type:"modal",children:[e.jsx(D,{size:"md",className:"text-muted",children:e.jsx(J,{})}),e.jsx(P,{lyric:t})]})}];function et(){const[t,s]=p.useState([]),{searchParams:i,sortDescriptor:o,mergeIntoSearchParams:r,setSearchQuery:g,isFiltering:x}=B(y),l=N(u.lyrics.index({...i,with:"track.album.artists"})),h=e.jsxs(c,{type:"modal",children:[e.jsx(b,{variant:"flat",color:"danger",children:e.jsx(a,{message:"Delete"})}),e.jsx(ee,{selectedIds:t,onDelete:()=>s([])})]});return e.jsxs(U,{children:[e.jsx(q,{query:l}),e.jsx(j,{children:e.jsx(a,{message:"Lyrics"})}),e.jsx(W,{title:e.jsx(a,{message:"Lyrics"}),showSidebarToggleButton:!0}),e.jsxs(z,{children:[e.jsx(M,{searchValue:i.query,onSearchChange:g,actions:e.jsx(Z,{}),selectedItems:t,selectedActions:h,filters:d}),e.jsx(R,{filters:d}),e.jsxs(K,{children:[e.jsx(V,{columns:Y,data:l.items,sortDescriptor:o,onSortChange:r,enableSelection:!0,selectedRows:t,onSelectionChange:s,cellHeight:"h-54"}),l.isEmpty&&e.jsx(Q,{isFiltering:x,image:O,title:e.jsx(a,{message:"No lyrics have been created yet"}),filteringTitle:e.jsx(a,{message:"No matching lyrics"})}),e.jsx(_,{query:l,onPageChange:m=>r({page:m}),onPerPageChange:m=>r({perPage:m})})]})]})]})}function Z(){return e.jsx(p.Fragment,{children:e.jsxs(c,{type:"modal",children:[e.jsx(G,{children:e.jsx(a,{message:"Add new lyric"})}),e.jsx(L,{})]})})}function ee({selectedIds:t,onDelete:s}){const{close:i}=f(),o=k({mutationFn:()=>S.delete(`lyrics/${t.join(",")}`),onSuccess:async()=>{await T.invalidateQueries({queryKey:u.lyrics.invalidateKey}),C(n("Lyrics deleted")),s(),i()},onError:r=>w(r)});return e.jsx(X,{isDanger:!0,isLoading:o.isPending,title:e.jsx(a,{message:"Delete lyrics"}),body:e.jsx(a,{message:"Are you sure you want to delete selected lyrics?",values:{count:t.length}}),confirm:e.jsx(a,{message:"Delete"}),onConfirm:()=>o.mutate()})}export{et as Component};
