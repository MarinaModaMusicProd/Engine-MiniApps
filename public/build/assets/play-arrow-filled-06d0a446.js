import{ch as Xe,da as ge,db as Qe,r as f,a2 as D,j as u,a0 as Ze,aI as Pe,bb as Ie,cE as q,t as Je,bR as Ne,X as Z,aN as V,M as et,n as tt,bO as de,aW as nt,aT as rt,bo as Re,J as oe,dc as st,aO as at,dd as Me,d9 as we,aS as ot,R as Oe,br as Le,bs as it,bP as ct,A as H,W as lt,T as Q,bL as ye,aF as re,ay as Y,i as be,k as he,m as ie,$ as J,a as Ae,de as ut,ad as X,ab as dt,aa as ft,Z as Fe,bp as mt,aZ as gt,ai as bt,y as ht,Y as xt,D as ce,_ as pt,bZ as vt,am as ke,ae as wt,I as yt}from"./main-8e42e7ab.js";import{g as De}from"./theme-value-to-hex-b47e4451.js";function se(e){return Xe()?e.metaKey:e.ctrlKey}function At(e){const{cellCount:n,rowCount:t}=e;return{onKeyDown:s=>{switch(s.key){case"ArrowLeft":O(s,{cell:{op:"decrement"}},e);break;case"ArrowRight":O(s,{cell:{op:"increment"}},e);break;case"ArrowUp":O(s,{row:{op:"decrement"}},e);break;case"ArrowDown":O(s,{row:{op:"increment"}},e);break;case"PageUp":O(s,{row:{op:"decrement",count:5}},e);break;case"PageDown":O(s,{row:{op:"increment",count:5}},e);break;case"Tab":kt(s);break;case"Home":se(s)?O(s,{row:{op:"decrement",count:t},cell:{op:"decrement",count:n}},e):O(s,{cell:{op:"decrement",count:n}},e);break;case"End":se(s)?O(s,{row:{op:"increment",count:t},cell:{op:"increment",count:n}},e):O(s,{cell:{op:"increment",count:n}},e);break}}}}function O(e,n,{cellCount:t,rowCount:r}){var x,v,h,b,p,y,T;if(((x=document.activeElement)==null?void 0:x.tagName)==="input")return;e.preventDefault();const s=e.currentTarget,a=e.target.closest("[aria-colindex]");if(!a||!s)return;const o=a.closest("[aria-rowindex]");if(!o)return;let i=parseInt(o.getAttribute("aria-rowindex")),d=parseInt(a.getAttribute("aria-colindex"));if(Number.isNaN(i)||Number.isNaN(d))return;const c=((v=n.row)==null?void 0:v.count)??1;((h=n.row)==null?void 0:h.op)==="increment"?i=Math.min(r,i+c):((b=n.row)==null?void 0:b.op)==="decrement"&&(i=Math.max(1,i-c));const l=((p=n.cell)==null?void 0:p.count)??1;((y=n.cell)==null?void 0:y.op)==="increment"?d=Math.min(t,d+l):((T=n.cell)==null?void 0:T.op)==="decrement"&&(d=Math.max(1,d-l));const w=s.querySelector(`[aria-rowindex="${i}"] [aria-colindex="${d}"]`);if(!w)return;const m=ge(w).nextNode()||w;a.setAttribute("tabindex","-1"),m.setAttribute("tabindex","0"),m.focus()}function kt(e){const n=e.currentTarget;if(e.shiftKey)n.focus();else{const t=ge(n,{tabbable:!0});let r,s;do s=t.lastChild(),s&&(r=s);while(s);r&&!r.contains(document.activeElement)&&Qe(r)}}const L=f.createContext(null);function He({index:e,isHeader:n}){const{columns:t,cellHeight:r="h-46",headerCellHeight:s="h-46"}=f.useContext(L),a=t[e],o=a==null?void 0:a.padding;let i="justify-start";return(a==null?void 0:a.align)==="center"?i="justify-center":(a==null?void 0:a.align)==="end"&&(i="justify-end"),D("flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2",n?s:r,(a==null?void 0:a.width)??"flex-1",a==null?void 0:a.maxWidth,a==null?void 0:a.minWidth,i,o,a==null?void 0:a.className)}function Dt({rowIndex:e,rowIsHovered:n,index:t,item:r,id:s}){const{columns:a}=f.useContext(L),o=a[t],i=f.useMemo(()=>({index:e,isHovered:n,isPlaceholder:r.isPlaceholder}),[e,n,r.isPlaceholder]),d=He({index:t,isHeader:!1});return u.jsx("div",{tabIndex:-1,role:"gridcell","aria-colindex":t+1,id:s,className:d,children:u.jsx("div",{className:"w-full min-w-0 overflow-hidden overflow-ellipsis",children:o.body(r,i)})})}function jt(e){return e.shiftKey||se(e)}function Tt({index:e,isSelected:n,isHeader:t}){const r=Ze(),s=Pe(),{hideBorder:a,enableSelection:o,collapseOnMobile:i,onAction:d}=f.useContext(L);return D("flex gap-x-16 break-inside-avoid outline-none border border-transparent",d&&"cursor-pointer",s&&i&&a?"mb-8 pl-8 pr-0 rounded":"px-16",!a&&"border-b-divider",!a&&e===0&&"border-t-divider",n&&!r&&"bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus",n&&r&&"bg-selected hover:bg-focus focus-visible:bg-focus",!n&&!t&&(o||d)&&"focus-visible:bg-focus hover:bg-hover")}function Et({onMoveStart:e,onMove:n,onMoveEnd:t,minimumMovement:r=0,preventDefault:s,stopPropagation:a=!0,onPress:o,onLongPress:i,...d}){const l=f.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:w,removeGlobalListener:g}=Ie(),m=b=>{!l.el||(e==null?void 0:e(b,l.el))===!1||(l.originalTouchAction=l.el.style.touchAction,l.el.style.touchAction="none",l.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",l.started=!0)},x=b=>{var p;if(b.button===0&&l.id==null){if(l.started=!1,((p=d.onPointerDown)==null?void 0:p.call(d,b))===!1)return;a&&b.stopPropagation(),s&&b.preventDefault(),l.id=b.pointerId,l.el=b.currentTarget,l.lastPosition={x:b.clientX,y:b.clientY},i&&(l.longPressTimer=setTimeout(()=>{i(b,l.el),l.longPressTriggered=!0},400)),(e||n)&&w(window,"pointermove",v,!1),w(window,"pointerup",h,!1),w(window,"pointercancel",h,!1)}},v=b=>{if(b.pointerId===l.id){const p=b.clientX-l.lastPosition.x,y=b.clientY-l.lastPosition.y;(Math.abs(p)>=r||Math.abs(y)>=r)&&!l.started&&m(b),l.started&&(n==null||n(b,p,y),l.lastPosition={x:b.clientX,y:b.clientY})}},h=b=>{var p;if(b.pointerId===l.id){l.longPressTimer&&clearTimeout(l.longPressTimer);const y=l.longPressTriggered;l.longPressTriggered=!1,l.started&&(t==null||t(b)),l.el&&(b.type!=="pointercancel"&&((p=d.onPointerUp)==null||p.call(d,b,l.el),b.target&&l.el.contains(b.target)&&(y?i==null||i(b,l.el):o==null||o(b,l.el))),document.documentElement.style.userSelect=l.originalUserSelect||"",l.el.style.touchAction=l.originalTouchAction||""),l.id=void 0,l.started=!1,g(window,"pointermove",v,!1),g(window,"pointerup",h,!1),g(window,"pointercancel",h,!1)}};return{domProps:{onPointerDown:q(x)}}}const Ct=["button","a","input","select","textarea"];function $t({item:e,index:n,renderAs:t,className:r,style:s}){const{selectedRows:a,columns:o,toggleRow:i,selectRow:d,onAction:c,selectRowOnContextMenu:l,enableSelection:w,selectionStyle:g,hideHeaderRow:m}=f.useContext(L),x=f.useRef(!1),v=a.includes(e.id),[h,b]=f.useState(!1),p=k=>k.target.closest(Ct.join(",")),y=k=>{g==="highlight"&&c&&!x.current&&!p(k)&&(k.preventDefault(),k.stopPropagation(),c(e,n))},T=!!a.length,E=k=>{p(k)||(g==="checkbox"?w&&(T||!c)?i(e):c&&c(e,n):g==="highlight"&&(x.current?w&&T?i(e):c==null||c(e,n):w&&d(e,jt(k))))},{domProps:$}=Et({onPointerDown:k=>{x.current=k.pointerType==="touch"},onPress:E,onLongPress:w?()=>{x.current&&i(e)}:void 0}),P=k=>{w&&k.key===" "?(k.preventDefault(),k.stopPropagation(),g==="checkbox"?i(e):d(e)):k.key==="Enter"&&!a.length&&c&&(k.preventDefault(),k.stopPropagation(),c(e,n))},M=k=>{l&&w&&(a.includes(e.id)||d(e)),x.current&&(k.preventDefault(),k.stopPropagation())},B=Tt({index:n,isSelected:v}),K=t||"div";return u.jsx(K,{role:"row","aria-rowindex":n+1+(m?0:1),"aria-selected":v,tabIndex:-1,className:D(r,B),item:K==="div"?void 0:e,onDoubleClick:q(y),onKeyDown:q(P),onContextMenu:q(M),onPointerEnter:q(()=>b(!0)),onPointerLeave:q(()=>b(!1)),style:s,...$,children:o.map((k,C)=>u.jsx(Dt,{rowIndex:n,rowIsHovered:h,index:C,item:e},`${e.id}-${k.key}`))})}const Pt={key:"checkbox",header:()=>u.jsx(Nt,{}),align:"center",width:"w-24 flex-shrink-0",body:(e,n)=>n.isPlaceholder?u.jsx(Je,{size:"w-24 h-24",variant:"rect"}):u.jsx(It,{item:e})};function It({item:e}){const{selectedRows:n,toggleRow:t}=f.useContext(L);return u.jsx(Ne,{checked:n.includes(e.id),onChange:()=>t(e)})}function Nt(){const{trans:e}=Z(),{data:n,selectedRows:t,onSelectionChange:r}=f.useContext(L),s=!!n.length&&n.length===t.length,a=!s&&!!t.length;return u.jsx(Ne,{"aria-label":e({message:"Select all"}),isIndeterminate:a,checked:s,onChange:()=>{r(s?[]:n.map(o=>o.id))}})}const Rt=V(u.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined");function Mt({index:e}){const{columns:n,sortDescriptor:t,onSortChange:r,enableSorting:s}=f.useContext(L),a=n[e],o=He({index:e,isHeader:!0}),[i,d]=f.useState(!1),c=a.sortingKey||a.key,l=a.allowsSorting&&s,{orderBy:w,orderDir:g}=t||{},m=l&&w===c;let x;m&&g==="asc"?x="ascending":m&&g==="desc"?x="descending":l&&(x="none");const v=()=>{if(!l)return;let p;m&&g==="desc"?p={orderDir:"asc",orderBy:c}:m&&g==="asc"?p={orderBy:void 0,orderDir:void 0}:p={orderDir:"desc",orderBy:c},r==null||r(p)},h=m||i,b={visible:{opacity:1,y:0},hidden:{opacity:0,y:"-25%"}};return u.jsxs("div",{role:"columnheader",tabIndex:-1,"aria-colindex":e+1,"aria-sort":x,className:D(o,"text-xs font-medium text-muted",l&&"cursor-pointer"),onMouseEnter:()=>{d(!0)},onMouseLeave:()=>{d(!1)},onKeyDown:p=>{(p.key===" "||p.key==="Enter")&&(p.preventDefault(),v())},onClick:v,children:[a.hideHeader?u.jsx("div",{className:"opacity-0",children:a.header()}):a.header(),u.jsx(et,{children:l&&u.jsx(tt.span,{variants:b,animate:h?"visible":"hidden",initial:!1,transition:{type:"tween"},className:"-mt-2 ml-6 inline-block","data-testid":"table-sort-button","aria-hidden":!h,children:u.jsx(Rt,{size:"xs",className:D("text-muted",g==="asc"&&w===c&&"rotate-180 transition-transform")})},"sort-icon")})]})}function Ot(){const{columns:e}=f.useContext(L);return u.jsx("div",{role:"row","aria-rowindex":1,tabIndex:-1,className:"flex gap-x-16 px-16",children:e.map((n,t)=>u.jsx(Mt,{index:t},n.key))})}function Rn({className:e,columns:n,collapseOnMobile:t=!0,hideHeaderRow:r=!1,hideBorder:s=!1,data:a,selectedRows:o,defaultSelectedRows:i,onSelectionChange:d,sortDescriptor:c,onSortChange:l,enableSorting:w=!0,onDelete:g,enableSelection:m=!0,selectionStyle:x="checkbox",ariaLabelledBy:v,selectRowOnContextMenu:h,onAction:b,renderRowAs:p,tableBody:y,meta:T,tableRef:E,closeOnInteractOutside:$=!1,cellHeight:P,headerCellHeight:M,...B}){const K=Pe(),k=!!K&&t;k&&(r=!0,s=!0);const[C,z]=de(o,i||[],d),[_e,Ue]=de(c,void 0,l),qe=f.useCallback(j=>{const I=[...C];if(!I.includes(j.id))I.push(j.id);else{const _=I.indexOf(j.id);I.splice(_,1)}z(I)},[C,z]),Ye=f.useCallback((j,I)=>{let _=[];j&&(_=I?[...C==null?void 0:C.filter(G=>G!==j.id),j.id]:[j.id]),z(_)},[C,z]),te=f.useMemo(()=>{const j=n.filter(_=>{const G=_.visibleInMode||"regular";if(G==="all"||G==="compact"&&k||G==="regular"&&!k)return!0});return m&&x!=="highlight"&&!K&&j.unshift(Pt),j},[K,n,m,x,k]),Ge={isCollapsedMode:k,cellHeight:P,headerCellHeight:M,hideBorder:s,hideHeaderRow:r,selectedRows:C,onSelectionChange:z,enableSorting:w,enableSelection:m,selectionStyle:x,data:a,columns:te,sortDescriptor:_e,onSortChange:Ue,toggleRow:qe,selectRow:Ye,onAction:b,selectRowOnContextMenu:h,meta:T,collapseOnMobile:t},We=At({cellCount:m?te.length+1:te.length,rowCount:a.length+1}),pe={renderRowAs:p};y?y=f.cloneElement(y,pe):y=u.jsx(Lt,{...pe});const ve=nt(E);return rt({ref:ve,onInteractOutside:j=>{$&&m&&(C!=null&&C.length)&&!j.target.closest('[role="dialog"]')&&z([])}}),u.jsx(L.Provider,{value:Ge,children:u.jsxs("div",{...Re(B,We,{onKeyDown:j=>{j.key==="Escape"?(j.preventDefault(),j.stopPropagation(),C!=null&&C.length&&z([])):j.key==="Delete"?(j.preventDefault(),j.stopPropagation(),C!=null&&C.length&&(g==null||g(a.filter(I=>C==null?void 0:C.includes(I.id))))):se(j)&&j.key==="a"&&(j.preventDefault(),j.stopPropagation(),m&&z(a.map(I=>I.id)))}}),role:"grid",tabIndex:0,"aria-rowcount":a.length+1,"aria-colcount":te.length+1,ref:ve,"aria-multiselectable":m?!0:void 0,"aria-labelledby":v,className:D(e,"isolate select-none text-sm outline-none focus-visible:ring-2"),children:[!r&&u.jsx(Ot,{}),y]})})}function Lt({renderRowAs:e}){const{data:n}=f.useContext(L);return u.jsx(f.Fragment,{children:n.map((t,r)=>u.jsx($t,{item:t,index:r,renderAs:e},t.id))})}const je=["#3b82f6","#6366f1","#0284c7","#9333ea","#059669","#ea580c","#dc2626","#06b6d4","#e11d48"],Ft=f.forwardRef(({size:e,label:n,labelForBackground:t,color:r},s)=>{const{initial:a,bgColor:o}=f.useMemo(()=>{const i=t||n||"",d=i.split("").reduce((c,l)=>l.charCodeAt(0)+c,i.length);return{initial:n.slice(0,1).toUpperCase(),bgColor:je[d%je.length]}},[n,t]);return u.jsx("div",{ref:s,style:r?void 0:{backgroundColor:o},className:D("flex h-full w-full items-center justify-center font-semibold leading-normal text-on-primary",r,Ht(e)),children:a})});function Ht(e){switch(e){case"xs":return"text-xs";case"sm":return"text-xs";case"xl":return"text-xl";case"md":return"text-base";default:return""}}const zt=f.forwardRef(function({className:e,circle:n,size:t="md",src:r,link:s,label:a,labelForBackground:o,fallback:i="initials",fallbackColor:d,lazy:c=!0,...l},w){let g=r?u.jsx("img",{ref:w,src:r,alt:a,loading:c?"lazy":void 0,className:"block h-full w-full object-cover"}):i==="initials"&&a?u.jsx(Ft,{size:t,label:a,labelForBackground:o,color:d}):u.jsx("div",{className:"h-full w-full bg-alt dark:bg-chip",children:u.jsx(st,{viewBox:"0 0 48 48",className:"h-full w-full text-muted"})});a&&(g=u.jsx(at,{label:a,children:g}));const m={...l,className:D(e,"relative block overflow-hidden select-none flex-shrink-0",Vt(t),n?"rounded-full":"rounded")};return s?u.jsx(oe,{...m,to:s,children:g}):u.jsx("div",{...m,children:g})});function Vt(e){switch(e){case"xs":return"w-18 h-18";case"sm":return"w-24 h-24";case"md":return"w-32 h-32";case"lg":return"w-40 h-40";case"xl":return"w-60 h-60";default:return e}}function Mn({className:e,children:n,size:t,color:r,radius:s,selectable:a,wrap:o=!0,startButton:i}){return u.jsxs("div",{className:D("flex items-center gap-8",o&&"flex-wrap",e),children:[i,f.Children.map(n,d=>{if(f.isValidElement(d))return f.cloneElement(d,{size:t,color:r,selectable:a,radius:s})})]})}const St=V(u.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined"),F=new Map,N=new Map,Bt=new Map,R={status:"inactive"};function le({e,rect:n,deltaX:t,deltaY:r}){return{rect:n,x:e.clientX,y:e.clientY,deltaX:t??0,deltaY:r??0,nativeEvent:e}}let ze=null;function Te(e){ze=e}function Kt(e){return{left:e.left,top:e.top,width:e.width,height:e.height}}function Ve(e){const n=new IntersectionObserver(t=>{t.forEach(r=>{const{width:s,height:a,left:o,top:i}=r.boundingClientRect,[d,c]=[...e].find(([,w])=>w.ref.current===r.target)||[];if(d==null||c==null)return;const l={width:s,height:a,left:o,top:i};e.set(d,{...c,rect:l})}),n.disconnect()});[...e.values()].forEach(t=>{t.ref.current&&n.observe(t.ref.current)})}function _t({id:e,disabled:n,ref:t,preview:r,hidePreview:s,...a}){const o=f.useRef(null),{addGlobalListener:i,removeAllGlobalListeners:d}=Ie(),c=f.useRef({lastPosition:{x:0,y:0}}).current,l=f.useRef(a);l.current=a,f.useLayoutEffect(()=>(n?F.delete(e):F.set(e,{...F.get(e),id:e,ref:t,type:l.current.type,getData:l.current.getData}),()=>{F.delete(e)}),[e,n,l,t]);const w=h=>{Bt.forEach(b=>{var p;b.type===((p=F.get(e))==null?void 0:p.type)&&h(b)})},g=h=>{var E,$;const b=F.get(e),p=t.current,y=!o.current||!c.clickedEl||o.current.contains(c.clickedEl);if(ze||!p||!b||!y){h.preventDefault(),h.stopPropagation();return}Ve(N),Te("drag"),s&&Ut(h),h.dataTransfer.effectAllowed="move",c.lastPosition={x:h.clientX,y:h.clientY},c.currentRect=Kt(p.getBoundingClientRect());const T=le({rect:c.currentRect,e:h});r!=null&&r.current&&r.current(b,P=>{h.dataTransfer.setDragImage(P,0,0)}),R.status="dragging",R.dragTargetId=e,t.current&&(t.current.dataset.dragging="true"),($=(E=l.current).onDragStart)==null||$.call(E,T,b),requestAnimationFrame(()=>{w(P=>{var M;return(M=P.onDragStart)==null?void 0:M.call(P,T,b)})}),i(window,"dragover",m,!0)},m=h=>{var $,P;if(h.preventDefault(),!c.currentRect)return;const b=h.clientX-c.lastPosition.x,p=h.clientY-c.lastPosition.y,y={...c.currentRect,left:c.currentRect.left+b,top:c.currentRect.top+p},T=le({rect:y,e:h,deltaX:b,deltaY:p}),E=F.get(e);E&&((P=($=l.current).onDragMove)==null||P.call($,T,E),w(M=>{var B;return(B=M.onDragMove)==null?void 0:B.call(M,T,E)})),c.lastPosition={x:h.clientX,y:h.clientY},c.currentRect=y};return{draggableProps:{draggable:!n,onDragStart:g,onDragEnd:h=>{var y,T;if(d(),!c.currentRect)return;Te(null),S&&S.remove();const b=le({rect:c.currentRect,e:h}),p=F.get(e);p&&((T=(y=l.current).onDragEnd)==null||T.call(y,b,p),w(E=>{var $;return($=E.onDragEnd)==null?void 0:$.call(E,b,p,R.status)})),requestAnimationFrame(()=>{R.dragTargetId=void 0,R.status="inactive",t.current&&delete t.current.dataset.dragging})},onPointerDown:h=>{c.clickedEl=h.target}},dragHandleRef:o}}let S;function Ut(e){S||(S=new Image,document.body.append(S),S.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),e.dataTransfer.setDragImage(S,0,0)}async function*qt(e){const n=[];for(const t of e.items)if(t.kind==="file"){const r=t.webkitGetAsEntry();r&&n.push(r)}for(const t of n)if(t.isFile){if(t.name===".DS_Store")continue;const r=await Be(t);yield new Me(r,t.fullPath)}else t.isDirectory&&(yield*Se(t))}async function*Se(e){const n=e.createReader();let t;do{t=await new Promise((r,s)=>{n.readEntries(r,s)});for(const r of t)if(r.isFile){if(r.name===".DS_Store")continue;const s=await Be(r);yield new Me(s,r.fullPath)}else r.isDirectory&&(yield*Se(r))}while(t.length>0)}function Be(e){return new Promise((n,t)=>e.file(n,t))}async function Yt(e){const n=[];for await(const t of e)n.push(t);return n}const Gt=400;function Wt({id:e,disabled:n,ref:t,...r}){const s=f.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,a=f.useRef(r);a.current=r,f.useLayoutEffect(()=>(N.set(e,{...N.get(e),disabled:n,id:e,ref:t}),()=>{N.delete(e)}),[e,a,n,t]);const o=g=>{var v;const m=a.current,x=m.allowDragEventsFromItself||t.current!==((v=g.ref)==null?void 0:v.current);return!!(g!=null&&g.type&&x&&m.types.includes(g.type)&&(!m.acceptsDrop||m.acceptsDrop(g)))},i=g=>{var x,v;const m=W(g);m&&((v=(x=a.current).onDragLeave)==null||v.call(x,m))};return{droppableProps:n?{}:{onDragOver:g=>{var x,v;g.preventDefault(),g.stopPropagation();const m=W(g);m&&o(m)&&((v=(x=a.current).onDragOver)==null||v.call(x,m,g))},onDragEnter:g=>{var x,v;if(g.stopPropagation(),s.dragOverElements.add(g.target),s.dragOverElements.size>1)return;const m=W(g);m&&o(m)&&((v=(x=a.current).onDragEnter)==null||v.call(x,m),clearTimeout(s.dropActivateTimer),typeof a.current.onDropActivate=="function"&&(s.dropActivateTimer=setTimeout(()=>{var h,b;m&&((b=(h=a.current).onDropActivate)==null||b.call(h,m))},Gt)))},onDragLeave:g=>{g.stopPropagation(),s.dragOverElements.delete(g.target);for(const x of s.dragOverElements)g.currentTarget.contains(x)||s.dragOverElements.delete(x);if(s.dragOverElements.size>0)return;const m=W(g);m&&o(m)&&(i(g),clearTimeout(s.dropActivateTimer))},onDrop:async g=>{var x,v,h,b;g.preventDefault(),g.stopPropagation(),s.dragOverElements.clear(),i(g),clearTimeout(s.dropActivateTimer);const m=W(g);if(m)if((v=(x=a.current).onDragLeave)==null||v.call(x,m),!o(m))R.status!=="inactive"&&(R.status="dropFail");else{const p=(b=(h=a.current).onDrop)==null?void 0:b.call(h,m);R.status!=="inactive"&&(R.status=p===!1?"dropFail":"dropSuccess")}}}}}function W(e){if(R.dragTargetId!=null)return F.get(R.dragTargetId);if(e.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>Yt(qt(e.dataTransfer))}}const Xt={onDragStart:()=>{},onDragEnter:()=>{},onDragOver:({e,ref:n,item:t,sortSession:r,onDropPositionChange:s})=>{var d;const a=r.dropPosition;let o=null;const i=(d=N.get(t))==null?void 0:d.rect;if(i){const c=i.top+i.height/2;e.clientY<=c?o="before":e.clientY>=c&&(o="after")}if(o!==a){const c=r.sortables.indexOf(t);if(r.dropPosition=o,s==null||s(r.dropPosition),Ee(r),n.current)if(r.dropPosition==="after")ue(n.current,"bottom",r);else if(c===0)ue(n.current,"top",r);else{const g=r.sortables[c-1],m=N.get(g);m!=null&&m.ref.current&&ue(m.ref.current,"bottom",r)}const l=r.sortables.indexOf(t);if(r.activeIndex===l){r.finalIndex=r.activeIndex;return}(c>r.activeIndex?"after":"before")==="after"?r.finalIndex=r.dropPosition==="before"?l-1:l:r.finalIndex=r.dropPosition==="after"?l+1:l}},onDragEnd:e=>{Ee(e)}};function Ee(e){e!=null&&e.linePreviewEl&&(e.linePreviewEl.style.borderBottomColor="",e.linePreviewEl.style.borderTopColor="",e.linePreviewEl=void 0)}function ue(e,n,t){const r="rgb(var(--be-primary))";n==="top"?e.style.borderTopColor=r:e.style.borderBottomColor=r,t&&(t.linePreviewEl=e)}function Ke(e,n,t){const r=we(n,0,e.length-1),s=we(t,0,e.length-1);if(r===s)return e;const a=e[r],o=s<r?-1:1;for(let i=r;i!==s;i+=o)e[i]=e[i+o];return e[s]=a,e}function Qt(e,n,t){const r=e.slice();return r.splice(t<0?r.length+t:t,0,r.splice(n,1)[0]),r}const Zt="transform 0.2s cubic-bezier(0.2, 0, 0, 1)",Jt={onDragStart:e=>{e.sortables.forEach((n,t)=>{const r=N.get(n);r!=null&&r.ref.current&&(r.ref.current.style.transition=Zt,(e==null?void 0:e.activeIndex)===t&&(r.ref.current.style.opacity="0.4"))})},onDragEnter:(e,n,t)=>{Ke(e.sortables,t,n);const r=e.sortables.map(s=>{var a;return(a=N.get(s))==null?void 0:a.rect});e.sortables.forEach((s,a)=>{if(!e)return;const o=Qt(r,n,e.activeIndex),i=r[a],d=o[a],c=N.get(s);if(c!=null&&c.ref.current&&d&&i){const l=d.left-i.left,w=d.top-i.top;c.ref.current.style.transform=`translate3d(${l}px, ${w}px, 0)`}}),e.finalIndex=n},onDragOver:()=>{},onDragEnd:e=>{e.sortables.forEach(n=>{const t=N.get(n);t!=null&&t.ref.current&&(t.ref.current.style.transform="",t.ref.current.style.transition="",t.ref.current.style.opacity="",t.ref.current.style.zIndex="")})}},en={onDragStart:()=>{},onDragOver:()=>{},onDragEnter:(e,n,t)=>{var s;const r=(s=N.get(e.sortables[t]))==null?void 0:s.ref.current;r&&(tn(r,t,n),Ke(e.sortables,t,n),e.finalIndex=n)},onDragEnd:()=>{}};function tn(e,n,t){const r=e.parentElement;if(t<0)r.prepend(e);else{n>-1&&n<=t&&t++;const s=r.children.item(t);s?s.before(e):r.append(e)}}let A=null;const ne={line:Xt,liveSort:Jt,moveNode:en};function On({item:e,items:n,type:t,ref:r,onSortEnd:s,onSortStart:a,onDragEnd:o,preview:i,disabled:d,onDropPositionChange:c,strategy:l="liveSort"}){f.useEffect(()=>{A&&A.sortables.length!==n.length&&(A.sortables=[...n],A.activeIndex=n.indexOf(e))},[n,e]);const{draggableProps:w,dragHandleRef:g}=_t({id:e,ref:r,type:t,preview:i,disabled:d,onDragStart:()=>{var x;A={sortables:[...n],activeSortable:e,activeIndex:n.indexOf(e),finalIndex:n.indexOf(e),dropPosition:null,ref:r,scrollParent:r.current?ot(r.current):void 0,scrollListener:()=>{Ve(N)}},ne[l].onDragStart(A),a==null||a(),(x=A.scrollParent)==null||x.addEventListener("scroll",A.scrollListener)},onDragEnd:()=>{var x;A&&(A.dropPosition=null,c==null||c(A.dropPosition),A.activeIndex!==A.finalIndex&&(s==null||s(A.activeIndex,A.finalIndex)),(x=A.scrollParent)==null||x.removeEventListener("scroll",A.scrollListener),ne[l].onDragEnd(A),o==null||o(),A=null)},getData:()=>{}}),{droppableProps:m}=Wt({id:e,ref:r,types:[t],disabled:d,allowDragEventsFromItself:!0,onDragOver:(x,v)=>{A&&ne[l].onDragOver({e:v,ref:r,item:e,sortSession:A,onDropPositionChange:c})},onDragEnter:()=>{if(!A)return;const x=A.sortables.indexOf(e),v=A.sortables.indexOf(A.activeSortable);ne[l].onDragEnter(A,x,v)},onDragLeave:()=>{A&&(A.dropPosition=null,c==null||c(A.dropPosition))}});return{sortableProps:{...Re(w,m)},dragHandleRef:g}}const ee=Oe.createContext(null);function Ln(e){const{size:n="md",children:t,className:r,isLazy:s,overflow:a="overflow-hidden"}=e,o=f.useRef([]),i=f.useId(),[d,c]=de(e.selectedTab,e.defaultSelectedTab||0,e.onTabChange),l=f.useMemo(()=>({selectedTab:d,setSelectedTab:c,tabsRef:o,size:n,isLazy:s,id:i}),[d,i,s,c,n]);return u.jsx(ee.Provider,{value:l,children:u.jsx("div",{className:D(r,a,"max-w-full"),children:t})})}function nn(){const{tabsRef:e,selectedTab:n}=f.useContext(ee),[t,r]=f.useState({width:void 0,transform:void 0,className:void 0});return Le(()=>{if(n!=null&&e.current){const s=e.current[n];if(!s)return;r(a=>({width:`${s.offsetWidth}px`,transform:`translateX(${s.offsetLeft}px)`,className:a.width===void 0?"":"transition-all"}))}},[r,n,e]),u.jsx("div",{className:D("absolute bottom-0 left-0 h-2 bg-primary",t.className),role:"presentation",style:{width:t.width,transform:t.transform}})}function Fn({children:e,center:n,expand:t,className:r,border:s="border-b"}){const a=f.Children.toArray(e);return u.jsx(it,{children:u.jsxs("div",{className:D("max-sm:hidden-scrollbar md:compact-scrollbar relative flex max-w-full overflow-auto",s,r),role:"tablist","aria-orientation":"horizontal",children:[a.map((o,i)=>f.isValidElement(o)?f.cloneElement(o,{index:i,className:D(o.props.className,t&&"flex-auto",n&&i===0&&"ml-auto",n&&i===a.length-1&&"mr-auto")}):null),u.jsx(nn,{})]})})}function Hn({index:e,className:n,isDisabled:t,children:r,padding:s,elementType:a="button",to:o,relative:i,width:d="min-w-min",height:c}){const{selectedTab:l,setSelectedTab:w,tabsRef:g,size:m="md",id:x}=f.useContext(ee),v=e===l,h=ct(),b=s||(m==="sm"?"px-12":"px-18"),p=D("tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors","focus-visible:ring focus-visible:ring-2 ring-inset rounded whitespace-nowrap cursor-pointer",d,rn({isDisabled:t,isSelected:v}),n,m==="md"&&`${b} ${c||"h-48"}`,m==="sm"&&`${b} ${c||"h-32"}`,t&&"pointer-events-none"),y=$=>{switch($.key){case"ArrowLeft":h==null||h.focusPrevious();break;case"ArrowRight":h==null||h.focusNext();break;case"Home":h==null||h.focusFirst();break;case"End":h==null||h.focusLast();break}},T=v?0:-1,E=a;return u.jsx(E,{disabled:t,id:`${x}-${e}-tab`,"aria-controls":`${x}-${e}-tabpanel`,type:"button",role:"tab","aria-selected":v,tabIndex:t?void 0:T,onKeyDown:y,onClick:()=>{w(e)},to:o,relative:i,className:p,ref:$=>{g.current&&$&&(g.current[e]=$)},children:r})}function rn({isDisabled:e,isSelected:n}){return e?"text-disabled cursor-default":n?"text-primary":"text-muted hover:text-main"}function zn({children:e,className:n}){const{selectedTab:t,isLazy:r}=f.useContext(ee),s=f.Children.toArray(e).filter(o=>!!o);let a;if(r){const o=s[t];a=f.isValidElement(o)?f.cloneElement(s[t],{index:t}):null}else a=s.map((o,i)=>{if(f.isValidElement(o)){const d=i===t;return f.cloneElement(o,{index:i,"aria-hidden":!d,className:d?o.props.className:D(o.props.className,"hidden")})}return null});return u.jsx("div",{className:n,children:a})}function Vn({className:e,children:n,index:t,...r}){const{id:s}=f.useContext(ee),[a,o]=f.useState(0),i=f.useRef(null);return Le(()=>{if(i!=null&&i.current){const d=()=>{const l=ge(i.current,{tabbable:!0});o(l.nextNode()?void 0:0)};d();const c=new MutationObserver(d);return c.observe(i.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{c.disconnect()}}},[i]),u.jsx("div",{tabIndex:a,ref:i,id:`${s}-${t}-tabpanel`,"aria-labelledby":`${s}-${t}-tab`,className:D(e,"focus-visible:outline-primary-light"),role:"tabpanel",...r,children:n})}const sn=V(u.jsx("path",{d:"m12 3 .01 10.55c-.59-.34-1.27-.55-2-.55C7.79 13 6 14.79 6 17s1.79 4 4.01 4S14 19.21 14 17V7h4V3h-6zm-1.99 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"MusicNoteOutlined");function Sn({track:e,className:n,size:t,background:r="bg-fg-base/4"}){const{trans:s}=Z(),a=an(e),o=D(n,t,r,"object-cover",a?"block":"flex items-center justify-center");return a?u.jsx("img",{className:o,draggable:!1,loading:"lazy",src:a,alt:s(H("Image for :name",{values:{name:e.name}}))}):u.jsx("span",{className:D(o,"overflow-hidden"),children:u.jsx(sn,{className:"max-w-[60%] text-divider",size:"text-9xl"})})}function an(e){var n;if(e.image)return e.image;if((n=e.album)!=null&&n.image)return e.album.image}const on=V([u.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"},"0"),u.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"},"1")],"MicOutlined");function Bn({artist:e,className:n,wrapperClassName:t,size:r,showVerifiedBadge:s=!1}){const{trans:a}=Z(),o=cn(e),i=D(r,n,"bg-fg-base/4 object-cover",o?"block":"flex items-center justify-center"),d=o?u.jsx("img",{className:i,draggable:!1,loading:"lazy",src:o,alt:a(H("Image for :name",{values:{name:e.name}}))}):u.jsx("span",{className:D(i,"overflow-hidden"),children:u.jsx(on,{className:"max-w-[60%] text-divider",size:"text-9xl"})});return u.jsxs("div",{className:D("relative isolate flex-shrink-0",r,t),children:[d,s&&e.verified&&u.jsxs("div",{className:"absolute bottom-24 left-0 right-0 mx-auto flex w-max max-w-full items-center gap-6 rounded-full bg-black/60 px-8 py-4 text-sm text-white",color:"positive",children:[u.jsx("div",{className:"rounded-full bg-primary p-1",children:u.jsx(lt,{className:"text-white",size:"sm"})}),u.jsx(Q,{message:"Verified artist"})]})]})}function cn(e){var n,t;return e.image_small||((t=(n=e.albums)==null?void 0:n[0])==null?void 0:t.image)}const Kn=f.memo(({minutes:e,seconds:n,ms:t,startDate:r,endDate:s,verbose:a=!1,addZeroToFirstUnit:o=!0,isLive:i,maxIsLiveMs:d,minDuration:c=0,liveInterval:l=5e3})=>{const{trans:w}=Z(),g=f.useMemo(()=>{if(r||s){const y=r?ye(r):De(),E=(s?ye(s):De()).toDate().getTime()-y.toDate().getTime();return E>c?E:c}return e?e*6e4:n?n*1e3:t||c},[e,n,t,r,s,c]),[m,x]=f.useState(g);f.useEffect(()=>{x(g)},[g]);const v=f.useRef(m);v.current=m,f.useEffect(()=>{const y=d&&v.current>d;if(i&&!y){const T=setInterval(()=>{x(E=>E+l)},l);return()=>clearInterval(T)}},[i,l,d,g]);const h=m<0?-m:m,b={days:Math.trunc(h/864e5),hours:Math.trunc(h/36e5)%24,minutes:Math.trunc(h/6e4)%60,seconds:Math.trunc(h/1e3)%60};let p;return a?p=ln(b,w):p=un(b,o),u.jsx(f.Fragment,{children:p})});function ln(e,n){const t=[];return e.days&&t.push(`${e.days}${n(H("d"))}`),e.hours&&t.push(`${e.hours}${n(H("hr"))}`),e.minutes&&t.push(`${e.minutes}${n(H("min"))}`),e.seconds&&!e.hours&&t.push(`${e.seconds}${n(H("sec"))}`),t.join(" ")}function un(e,n=!0){const t=U(e.seconds);let r="";return e.days&&!r&&(r=`${e.days}:${U(e.hours)}:${U(e.minutes)}:${t}`),e.hours&&!r&&(r=`${U(e.hours,n)}:${U(e.minutes)}:${t}`),r||(r=`${U(e.minutes,n)}:${t}`),r}function U(e,n=!0){if(!n)return e;let t=`${e}`;return t.length===1&&(t="0"+t),t}function _n({track:e,className:n,...t}){const r=f.useMemo(()=>dn(e),[e]);return u.jsx(oe,{...t,className:D("overflow-x-hidden overflow-ellipsis hover:underline",n),to:r,children:e.name})}function dn(e,{absolute:n}={}){let t=`/track/${e.id}/${re(e.name)}`;return n&&(t=`${Y().settings.base_url}${t}`),t}function fn({artist:e,className:n,...t}){const r=f.useMemo(()=>mn(e),[e]);return u.jsx(oe,{...t,className:D("overflow-x-hidden overflow-ellipsis outline-none hover:underline focus-visible:underline",n),to:r,children:e.name})}function mn(e,{absolute:n}={}){let t=`/artist/${e.id}/${re(e.name)}`;return n&&(t=`${Y().settings.base_url}${t}`),t}const Un="genre",fe=1240,ae=45,me=3,gn=.5;function qn(e){const n=new window.AudioContext;return new Promise((t,r)=>{const s=document.createElement("canvas"),a=s.getContext("2d");if(!a){r();return}s.width=fe,s.height=ae;const o=new FileReader;o.onload=i=>{var c;const d=(c=i.target)==null?void 0:c.result;d?n.decodeAudioData(d,l=>{const w=bn(l,a);t(w)},()=>t(null)):r()},o.readAsArrayBuffer(e)})}function bn(e,n){const t=[],r=e.getChannelData(0),s=fe,a=Math.floor(r.length/s),o=ae,i=[];for(let d=0;d<s;d+=me)i.push(Ce(d*a,a,r)*1e4);for(let d=0;d<s;d+=me){const c=o/Math.max(...i);let l=Ce(d*a,a,r)*1e4;l*=c,l+=1,t.push(hn(d,l))}return n.clearRect(0,0,fe,ae),t}function Ce(e,n,t){let r=0;for(let s=e;s<=e+n-1;s++)r+=Math.pow(t[s],2);return Math.sqrt(r/t.length)}function hn(e,n){let t=me;t*=Math.abs(1-gn);const r=e+t/2,s=ae-n;return[r,s,t,n]}function xe(e){var n;return e.tracks=(n=e.tracks)==null?void 0:n.map(t=>(t.album||(t.album={...e,tracks:void 0}),t)),e}function Yn(e){const{trackId:n}=be();return he({queryKey:["tracks",+n,e],queryFn:()=>xn(n,e),initialData:()=>{var r,s;const t=(r=Y().loaders)==null?void 0:r[e.loader];if(((s=t==null?void 0:t.track)==null?void 0:s.id)==n&&(t==null?void 0:t.loader)===e.loader)return t}})}function xn(e,n){return ie.get(`tracks/${e}`,{params:n}).then(t=>(t.data.track.album&&(t.data.track={...t.data.track,album:xe(t.data.track.album)}),t.data))}function Gn(e){const{user:n,hasPermission:t}=J();return f.useMemo(()=>{const r={canEdit:!0,canDelete:!0,managesTrack:!0};return e.every(s=>{var i,d;if(!s){r.canEdit=!1,r.canDelete=!1,r.managesTrack=!1;return}const a=(i=s.artists)==null?void 0:i.map(c=>c.id),o=s.owner_id===(n==null?void 0:n.id)||!!((d=n==null?void 0:n.artists)!=null&&d.find(c=>a==null?void 0:a.includes(c.id)));o||(r.managesTrack=!1),!t("tracks.update")&&!t("music.update")&&!o&&(r.canEdit=!1),!t("tracks.delete")&&!t("music.delete")&&!o&&(r.canDelete=!1)}),r},[n,e,t])}const pn=V(u.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-12.5c-2.49 0-4.5 2.01-4.5 4.5s2.01 4.5 4.5 4.5 4.5-2.01 4.5-4.5-2.01-4.5-4.5-4.5zm0 5.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"}),"AlbumOutlined");function Wn({album:e,className:n,size:t}){const{trans:r}=Z(),s=e==null?void 0:e.image,a=D(n,t,"object-cover bg-fg-base/4",s?"block":"flex items-center justify-center");return s?u.jsx("img",{className:a,draggable:!1,loading:"lazy",src:s,alt:r(H("Image for :name",{values:{name:e.name}}))}):u.jsx("span",{className:D(a,"overflow-hidden"),children:u.jsx(pn,{className:"max-w-[60%] text-divider",size:"text-9xl"})})}function Xn({album:e,artist:n,className:t,target:r}){!n&&e.artists&&(n=e.artists[0]);const s=f.useMemo(()=>vn(e,{artist:n}),[n,e]);return u.jsx(oe,{target:r,className:D("overflow-x-hidden overflow-ellipsis outline-none hover:underline focus-visible:underline",t),to:s,children:e.name})}function vn(e,n={}){var o;const t=n.artist||((o=e.artists)==null?void 0:o[0]),r=re((t==null?void 0:t.name)||"Various Artists"),s=re(e.name);let a=`/album/${e.id}/${r}/${s}`;return n.absolute&&(a=`${Y().settings.base_url}${a}`),a}const Qn="album";function Zn(e){const{albumId:n}=be();return he({queryKey:["albums",+n],queryFn:()=>wn(n,e),initialData:()=>{var r,s;const t=(r=Y().loaders)==null?void 0:r[e.loader];if(((s=t==null?void 0:t.album)==null?void 0:s.id)==n&&(t==null?void 0:t.loader)===e.loader)return t}})}function wn(e,n){return ie.get(`albums/${e}`,{params:n}).then(t=>(t.data.album=xe(t.data.album),t.data))}const Jn=Oe.forwardRef((e,n)=>{const t=e.children,[r,s]=f.useState(null),a=f.useRef(null);return f.useImperativeHandle(n,()=>(o,i)=>{Ae.flushSync(()=>{s(t(o))}),i(a.current),requestAnimationFrame(()=>{s(null)})},[t]),r?Ae.createPortal(u.jsx("div",{style:{zIndex:-100,position:"absolute",top:0,left:-1e5},ref:a,children:r}),ut):null});function er(e){const{user:n,hasPermission:t}=J();return f.useMemo(()=>{var s,a;const r={canEdit:!1,canDelete:!1,managesAlbum:!1};if(n!=null&&n.id&&e){const o=(s=e.artists)==null?void 0:s.map(d=>d.id),i=e.owner_id===n.id||!!((a=n.artists)!=null&&a.find(d=>o==null?void 0:o.includes(d.id)));r.canEdit=t("albums.update")||t("music.update")||i,r.canDelete=t("albums.delete")||t("music.delete")||i,r.managesAlbum=i}return r},[n,e,t])}function tr(){var n;const{user:e}=J();return(n=e==null?void 0:e.artists)==null?void 0:n.find(t=>t.role==="artist")}function nr({artists:e,className:n,target:t,linkClassName:r,onLinkClick:s}){return e!=null&&e.length?u.jsx("div",{className:D(n,"overflow-x-hidden overflow-ellipsis"),children:e.map((a,o)=>u.jsxs(f.Fragment,{children:[o>0&&", ",u.jsx(fn,{artist:a,target:t,className:r,onClick:s})]},a.id))}):u.jsx("div",{className:n,children:u.jsx(Q,{message:"Various artists"})})}const yn=V(u.jsx("path",{d:"M390,32H120c-49.19,0-88,38.81-88,88V390c0,49.19,38.81,90,88,90H390c49.19,0,90-40.81,90-90V120C480,70.81,439.19,32,390,32ZM336,396H284c-42.51,0-72-23.68-72-76V240H176V192c42.51-11,57.95-48.32,60-80h44v72h52v56H280l-.39,70.51c0,21.87,11,29.43,28.62,29.43L336,340Z"})),An=V(u.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92zM18 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM6 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm12 7.02c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"}),"ShareOutlined");function kn(e,n,t,r){const s=jn(e,n,t,r);e==="mail"?window.location.href=s:Dn(s)}function Dn(e){const r=(window.innerWidth-575)/2,s=(window.innerHeight-400)/2,a="status=1, scrollbars=1,width=575,height=400,top="+s+",left="+r;window.open(e,"share",a)}function jn(e,n,t,r){switch(e){case"facebook":return"https://www.facebook.com/sharer/sharer.php?u="+n;case"twitter":return`https://twitter.com/intent/tweet?text=${t}&url=${n}`;case"pinterest":return"https://pinterest.com/pin/create/button/?url="+n+"&media="+r;case"tumblr":return"https://www.tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl=&posttype=photo&title=&caption="+t+"&content="+r+"&url="+n;case"blogger":return"https://www.blogger.com/blog_this.pyra?t&u="+n+"&n="+t;case"mail":return`mailto:?subject=Check out this link.&body=${n}`}}function rr({link:e,name:n,image:t,size:r="lg"}){const s=a=>{kn(a,e,n,t)};return u.jsxs("div",{children:[u.jsx(X,{size:r,onClick:()=>s("facebook"),className:"text-facebook",children:u.jsx(dt,{})}),u.jsx(X,{size:r,onClick:()=>s("twitter"),className:"text-twitter",children:u.jsx(ft,{})}),u.jsx(X,{size:r,onClick:()=>s("tumblr"),className:"text-tumblr",children:u.jsx(yn,{viewBox:"0 0 512 512"})}),navigator.share&&u.jsx(X,{size:r,onClick:()=>{try{navigator.share({title:n,url:e})}catch(a){a.name!=="AbortError"&&Fe(H("Could not share link"))}},className:"text-muted",children:u.jsx(An,{})})]})}function sr({user:e,...n}){var r;const{auth:t}=f.useContext(mt);return u.jsx(zt,{...n,label:e==null?void 0:e.name,src:e==null?void 0:e.image,link:(e==null?void 0:e.id)&&((r=t.getUserProfileLink)==null?void 0:r.call(t,e))})}const Tn=9007199254740991;function En(e,n,t="desc"){return e.sort((r,s)=>{let a=$e(r,n),o=$e(s,n);const i=typeof a,d=typeof o;i!==d&&(i==="number"&&(a+=""),d==="number"&&(o+=""));let c=0;return a!=null&&o!=null?a>o?c=1:a<o&&(c=-1):a!=null?c=1:o!=null&&(c=-1),c*(t==="asc"?1:-1)})}function $e(e,n){const t=gt.pick(n,e);if(Cn(t)){const r=Number(t);return r<Tn?r:t}return t}function Cn(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}function ar(e){const[n,t]=f.useState({});return{data:f.useMemo(()=>{if(e){if(n!=null&&n.orderBy)return En([...e],n.orderBy,n.orderDir)}else return[];return e},[n,e]),sortDescriptor:n,onSortChange:t}}function or(){const{pathname:e}=bt(),n=ht(),{getRedirectUri:t}=J();return xt({mutationFn:r=>$n(r),onSuccess:(r,{albumId:s})=>{Fe(H("Album deleted")),e.startsWith(`/album/${s}`)&&n(t()),ce.invalidateQueries({queryKey:["tracks"]}),ce.invalidateQueries({queryKey:["albums"]}),ce.invalidateQueries({queryKey:["artists"]})},onError:r=>pt(r)})}function $n({albumId:e}){return ie.delete(`albums/${e}`).then(n=>n.data)}function ir(){const{fields:e,append:n,remove:t}=vt({name:"links"});return u.jsxs("div",{children:[e.map((r,s)=>u.jsxs("div",{className:"mb-10 flex items-end gap-10",children:[u.jsx(ke,{required:!0,type:"url",label:u.jsx(Q,{message:"URL"}),name:`links.${s}.url`,size:"sm",className:"flex-auto"}),u.jsx(ke,{required:!0,label:u.jsx(Q,{message:"Short title"}),name:`links.${s}.title`,size:"sm",className:"flex-auto"}),u.jsx(X,{size:"sm",color:"primary",className:"flex-shrink-0",onClick:()=>{t(s)},children:u.jsx(wt,{})})]},r.id)),u.jsx(yt,{variant:"text",color:"primary",startIcon:u.jsx(St,{}),size:"xs",onClick:()=>{n({url:"",title:""})},children:u.jsx(Q,{message:"Add another link"})})]})}const cr="artistPage-albumLayout";function lr(e){const{artistId:n}=be();return he({queryKey:["artists",n,e],queryFn:()=>Pn(n,e),initialData:()=>{var r,s;const t=(r=Y().loaders)==null?void 0:r[e.loader];if(((s=t==null?void 0:t.artist)==null?void 0:s.id)==n&&(t==null?void 0:t.loader)===e.loader)return t}})}function Pn(e,n){return ie.get(`artists/${e}`,{params:n}).then(t=>(t.data.albums&&(t.data.albums.data=t.data.albums.data.map(r=>xe(r))),t.data))}function ur(e){const{user:n,hasPermission:t}=J();return f.useMemo(()=>{var s;const r={canEdit:!1,canDelete:!1};if(n!=null&&n.id){const a=!!((s=n.artists)!=null&&s.find(o=>o.id===e.id));r.canEdit=t("artists.update")||t("music.update")||a,r.canDelete=t("artists.delete")||t("music.delete")||a}return r},[n,e,t])}const dr=V(u.jsx("path",{d:"M8 19V5l11 7Z"}),"PlayArrowFilled");export{Et as $,St as A,ae as B,An as C,xe as D,pn as E,Kn as F,Un as G,ar as H,cr as I,lr as J,Jn as K,On as L,on as M,Zn as N,Mn as O,dr as P,cn as Q,Yn as R,rr as S,Ln as T,sr as U,ir as V,fe as W,sn as X,Qt as Y,qn as Z,Wt as _,Fn as a,Rt as a0,Hn as b,zn as c,Vn as d,Sn as e,Wn as f,an as g,Bn as h,jt as i,dn as j,vn as k,mn as l,ur as m,fn as n,er as o,Xn as p,nr as q,or as r,Gn as s,_n as t,tr as u,Qn as v,L as w,Rn as x,$t as y,zt as z};
//# sourceMappingURL=play-arrow-filled-06d0a446.js.map
