import{j as t,at as j,r as n,cH as h,bo as k,a9 as P,v as T,T as p,c1 as C,ai as y}from"./main-BEfQELxr.js";import{o as A,P as N,q as f}from"./share-media-button-C9oFSM6L.js";import{O as I,A as v}from"./avatar-group-BJHmqeAp.js";import{b as B,o as F}from"./offline-media-items-DO4Xib0S.js";import{A as D}from"./album-image-sKMZR621.js";import{u as S}from"./use-album-permissions-B3fFfLlx.js";import{g as L}from"./artist-link-fBSSBvhd.js";import{B as M}from"./bullet-separated-items-BFxNMU00.js";import{M as q,a as d}from"./media-page-header-layout-ouASZtwH.js";import{P as w}from"./player-page-header-gradient-QFN0d4GT.js";import{P as E}from"./player-page-suspsense-BeDCBfjQ.js";import{u as _,T as G,C as H}from"./truncated-description-CG6NKLqH.js";import{C as O,b as $,T as Q}from"./comment-bar-new-comment-form-CF3mhZxo.js";import{T as R}from"./track-table-BzIUEBZK.js";import{A as l}from"./ad-host-DTAFXere.js";import{P as z}from"./page-meta-tags-BmlELluj.js";import{u as g}from"./use-required-params-biXhH1lK.js";import{u as V}from"./use-sortable-table-data-CTahzIRp.js";import{u as J}from"./useSuspenseQuery-CLDVgKJu.js";import{C as K}from"./chip-list-CnaxlPJ9.js";import{F as U}from"./formatted-date-B-08Y9yP.js";import{F as W}from"./formatted-duration-Dqg2KYhd.js";import"./play-arrow-filled-Bd3mp8QD.js";import"./use-player-store-B0Tt1GmI.js";import"./is-ctrl-or-shift-pressed-CMgU9cG9.js";import"./middleware-BLXTWOs6.js";import"./traditional-D9TTECMQ.js";import"./Pause-BRJy77mF.js";import"./create-playlist-dialog-BfNYpT-L.js";import"./image-selector-D_1V7xO8.js";import"./file-upload-provider-eR3r-15c.js";import"./uploaded-file-DYvUNPPs.js";import"./extension-from-filename-O0XMuZye.js";import"./pretty-bytes-bO14ePu9.js";import"./use-active-upload-nc09ZUBt.js";import"./open-upload-window-B2GQndIr.js";import"./AddAPhoto-CZHH8SXN.js";import"./file-input-config-DrcTpI3-.js";import"./switch-kVp777pB.js";import"./Image-DEFAf6mh.js";import"./dialog-footer-DZFPEWVp.js";import"./use-auth-click-capture-BYdy-0wK.js";import"./Add-Cqjx6ezR.js";import"./KeyboardArrowRight-BVstfQVU.js";import"./FavoriteBorder-CFF5lN5d.js";import"./use-previous-C8UpiCgw.js";import"./album-link-6XmWl295.js";import"./small-artist-image-CgkHpn0Q.js";import"./Mic-cPqrQSx8.js";import"./playlist-image-CVgZeVzU.js";import"./PlaylistPlay-jDnYmdDX.js";import"./playlist-link-BuIn8fqZ.js";import"./share-media-buttons-LsRpAgAp.js";import"./Share-CwHQAfaU.js";import"./track-image-DjYnH9n0.js";import"./MusicNote-D6buyZMC.js";import"./track-link-C79i7Oi0.js";import"./tabs-QG1LNIzu.js";import"./tab-panels-DmVy49av.js";import"./use-clipboard-C55rQ_RF.js";import"./add-to-queue-menu-button-xRsy1m89.js";import"./check-circle-filled-DrCIo0X8.js";import"./Download-Dfp9nObW.js";import"./Album-CXNrxcWI.js";import"./external-link-CT1zJoZ3.js";import"./use-delete-comments-DstBHm9_.js";import"./Reply-B32MlVig.js";import"./formatted-number-ChBvIyPq.js";import"./MoreVert-Dq4kJhtz.js";import"./confirmation-dialog-CYwhNB58.js";import"./infinite-scroll-sentinel-CMv-6kYI.js";import"./use-flat-infinite-query-items-YeEYVBoR.js";import"./useSuspenseInfiniteQuery-BxRXpJI4.js";import"./infiniteQueryObserver-GtpVk2tr.js";import"./Comment-TqhRbk6J.js";import"./skeleton-IvCa_cqw.js";import"./use-linkified-string-C1m5nlj_.js";import"./linkify-Cbuu_PPG.js";import"./album-context-dialog-DOovC4OY.js";import"./use-delete-album-DEYa43GE.js";import"./artist-links-CJ-I-YoG.js";import"./toggle-in-library-menu-button-DeSIBdG_.js";import"./toggle-repost-menu-button-DQ7TGSVf.js";import"./Repeat-DvTTdzvg.js";import"./track-context-dialog-B8siridC.js";import"./use-should-show-radio-button-D61M8rRZ.js";import"./use-track-permissions-BH8RwNVs.js";import"./download-file-from-url-BVaKcxRP.js";import"./MoreHoriz-B7xw7d55.js";import"./table-Bdp6S_DF.js";import"./checkbox-C191zCCH.js";import"./CheckBoxOutlineBlank-B_WkUAPG.js";import"./ArrowDownward-i0hV0JR6.js";import"./useInteractOutside-Iqh6soAi.js";import"./useEffectEvent-TynbBUG3.js";import"./use-pointer-events-CdAPueCj.js";import"./useGlobalListeners-BF1tAQIT.js";import"./entitiy-offline-indicator-icon-CUcYL0oT.js";import"./like-icon-button-BVGCt62o.js";import"./Schedule-DYoblKcK.js";import"./TrendingUp-CQH53zcx.js";import"./getScrollParent--OCc5gFh.js";import"./default-meta-tags-Bj5ecgXc.js";import"./sort-array-of-objects-Oyr6J2gK.js";import"./use-date-formatter-BKDPf1lG.js";import"./DateFormatter-Dix9bfnP.js";import"./use-current-date-time-Bg8tRM7A.js";function re(){return t.jsx(E,{offlineFallback:t.jsx(tt,{}),children:t.jsx(X,{})})}function X(){const{albumId:r}=g(["albumId"]),e=J(j.albums.get(r,"albumPage"));return t.jsx(x,{data:e.data})}function x({data:r}){var o;const{canEdit:e}=S(r.album),{canView:m,canCreate:s}=_();return t.jsxs(t.Fragment,{children:[t.jsx(z,{data:r}),r.album.image&&t.jsx(w,{image:r.album.image}),t.jsxs("div",{className:"relative",children:[t.jsxs(O,{children:[t.jsx(l,{slot:"general_top",className:"mb-44"}),t.jsx(Z,{album:r.album}),s?t.jsx($,{className:"mb-16",commentable:r.album}):null]}),(o=r.album.tags)!=null&&o.length?t.jsx(k,{children:t.jsx(K,{className:"mb-16",selectable:!0,children:r.album.tags.map(a=>t.jsxs(P,{elementType:T,to:`/tag/${a.name}`,children:["#",a.display_name||a.name]},a.id))})}):null,t.jsx(G,{description:r.album.description,className:"mt-24 text-sm"}),t.jsx(l,{slot:"album_above",className:"mt-34"}),t.jsx(Y,{album:r.album}),m&&t.jsx(H,{className:"mt-34",commentable:r.album,canDeleteAllComments:e}),t.jsx(l,{slot:"general_bottom",className:"mt-44"})]})]})}function Y({album:r}){var o;const{data:e,sortDescriptor:m,onSortChange:s}=V(r.tracks);return t.jsxs("div",{className:"mt-44",children:[t.jsx(R,{queueGroupId:f(r),tracks:e,sortDescriptor:m,onSortChange:s,hideTrackImage:!0,hideAlbum:!0,hidePopularity:!1}),(o=r.tracks)!=null&&o.length?null:t.jsx(y,{className:"mt-34",title:t.jsx(p,{message:"Nothing to display"}),description:t.jsx(p,{message:"This album does not have any tracks yet"})})]})}function Z({album:r}){var m,s,o,a,u,c;const e=(m=r.tracks)==null?void 0:m.reduce((i,b)=>i+(b.duration||0),0);return t.jsx(n.Fragment,{children:t.jsx(q,{centerItems:!0,image:t.jsx(D,{album:r,className:"rounded-panel"}),title:r.name,subtitle:t.jsx(v,{children:(s=r.artists)==null?void 0:s.map(i=>t.jsx(C,{circle:!0,src:i.image_small,label:i.name,link:L(i)},i.id))}),description:t.jsxs(M,{className:"text-sm text-muted",children:[(o=r.tracks)!=null&&o.length?t.jsx(p,{message:"[one 1 track|other :count tracks]",values:{count:r.tracks.length}}):null,(a=r.tracks)!=null&&a.length?t.jsx(W,{ms:e,verbose:!0}):null,t.jsx(U,{date:r.release_date})]}),actionsBar:t.jsxs(Q,{item:r,managesItem:!1,buttonGap:void 0,buttonSize:"sm",buttonClassName:d(),children:[t.jsx(N,{disabled:!((u=r.tracks)!=null&&u.length),buttonType:"text",queueId:f(r),className:d({isFirst:!0})}),t.jsx(I,{className:"mr-8",item:r,totalTracksCount:((c=r.tracks)==null?void 0:c.length)??0})]})})})}function tt(){const[r,e]=n.useState(null),[m,s]=n.useState(!0),{albumId:o}=g(["albumId"]);return n.useEffect(()=>{rt(+o).then(e).finally(()=>s(!1))},[o]),r?t.jsx(x,{data:r}):m?null:t.jsx(h,{})}async function rt(r){if(!A().offlinedAlbumIds.has(r))return null;const e=await B.getAlbumById(r),m=e==null?void 0:e.data;if(!m)return null;const s=await F.getTracksOfflinedBy(m);return s.length?{loader:"albumPage",album:{...m,tracks:s.map(o=>o.data)}}:null}export{re as Component};
